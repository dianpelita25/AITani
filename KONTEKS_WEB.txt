--- AWAL DARI SNAPSHOT KODE PROYEK WEB ---

Proyek: ai_tani_kupang Tallwind
Dibuat pada: Sat Sep 06 2025 17:37:04 GMT+0800 (Singapore Standard Time)

================================================================================
STRUKTUR FILE & KONTEN
================================================================================


--- File: ./README.md ---

# React

A modern React-based project utilizing the latest frontend technologies and tools for building responsive web applications.

## üöÄ Features

- **React 18** - React version with improved rendering and concurrent features
- **Vite** - Lightning-fast build tool and development server
- **Redux Toolkit** - State management with simplified Redux setup
- **TailwindCSS** - Utility-first CSS framework with extensive customization
- **React Router v6** - Declarative routing for React applications
- **Data Visualization** - Integrated D3.js and Recharts for powerful data visualization
- **Form Management** - React Hook Form for efficient form handling
- **Animation** - Framer Motion for smooth UI animations
- **Testing** - Jest and React Testing Library setup

## üìã Prerequisites

- Node.js (v14.x or higher)
- npm or yarn

## üõ†Ô∏è Installation

1. Install dependencies:
   ```bash
   npm install
   # or
   yarn install
   ```
   
2. Start the development server:
   ```bash
   npm start
   # or
   yarn start
   ```

## üìÅ Project Structure

```
react_app/
‚îú‚îÄ‚îÄ public/             # Static assets
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/     # Reusable UI components
‚îÇ   ‚îú‚îÄ‚îÄ pages/          # Page components
‚îÇ   ‚îú‚îÄ‚îÄ styles/         # Global styles and Tailwind configuration
‚îÇ   ‚îú‚îÄ‚îÄ App.jsx         # Main application component
‚îÇ   ‚îú‚îÄ‚îÄ Routes.jsx      # Application routes
‚îÇ   ‚îî‚îÄ‚îÄ index.jsx       # Application entry point
‚îú‚îÄ‚îÄ .env                # Environment variables
‚îú‚îÄ‚îÄ index.html          # HTML template
‚îú‚îÄ‚îÄ package.json        # Project dependencies and scripts
‚îú‚îÄ‚îÄ tailwind.config.js  # Tailwind CSS configuration
‚îî‚îÄ‚îÄ vite.config.js      # Vite configuration
```

## üß© Adding Routes

To add new routes to the application, update the `Routes.jsx` file:

```jsx
import { useRoutes } from "react-router-dom";
import HomePage from "pages/HomePage";
import AboutPage from "pages/AboutPage";

const ProjectRoutes = () => {
  let element = useRoutes([
    { path: "/", element: <HomePage /> },
    { path: "/about", element: <AboutPage /> },
    // Add more routes as needed
  ]);

  return element;
};
```

## üé® Styling

This project uses Tailwind CSS for styling. The configuration includes:

- Forms plugin for form styling
- Typography plugin for text styling
- Aspect ratio plugin for responsive elements
- Container queries for component-specific responsive design
- Fluid typography for responsive text
- Animation utilities

## üì± Responsive Design

The app is built with responsive design using Tailwind CSS breakpoints.


## üì¶ Deployment

Build the application for production:

```bash
npm run build
```

## üôè Acknowledgments

- Built by PT. AiTi Global Nexus
- Powered by React and Vite
- Styled with Tailwind CSS





--- File: ./index.html ---

<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>ai-tani-kupang</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#000000" />
  <meta name="description" content="Web site created using create-react-app" />
  <link rel="icon" href="/favicon.ico" />
  <link rel="manifest" href="/manifest.json" />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Faitaniku4885back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
</head>

<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div class="dhiwise-code" id="root"></div>
  <script type="module" src="/src/index.jsx"></script>
</body>

</html>


--- File: ./jsconfig.json ---

{
  "compilerOptions": {
    "baseUrl": "./src"
  }
}



--- File: ./package.json ---

{
  "name": "ai-tani-kupang",
  "version": "0.1.0",
  "private": true,
  "rocketCritical": {
    "dependencies": [
      "@dhiwise/component-tagger",
      "react",
      "react-dom",
      "@reduxjs/toolkit",
      "redux",
      "react-router-dom"
    ],
    "devDependencies": [
      "@vitejs/plugin-react",
      "vite",
      "vite-tsconfig-paths",
      "tailwindcss",
      "autoprefixer",
      "postcss"
    ],
    "scripts": [
      "start",
      "build",
      "serve"
    ],
    "warning": "üö® CRITICAL: DO NOT REMOVE OR MODIFY ABOVE DEPENDENCIES - Required for app functionality"
  },
  "dependencies": {
    "@dhiwise/component-tagger": "^1.0.10",
    "@radix-ui/react-slot": "^1.2.3",
    "@reduxjs/toolkit": "^2.6.1",
    "@tailwindcss/forms": "^0.5.7",
    "@testing-library/jest-dom": "^5.15.1",
    "@testing-library/react": "^11.2.7",
    "@testing-library/user-event": "^12.8.3",
    "axios": "^1.8.4",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "d3": "^7.9.0",
    "date-fns": "^4.1.0",
    "dotenv": "^16.0.1",
    "framer-motion": "^10.16.4",
    "lucide-react": "^0.484.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-helmet": "^6.1.0",
    "react-hook-form": "^7.55.0",
    "react-router-dom": "6.0.2",
    "react-router-hash-link": "^2.4.3",
    "recharts": "^2.15.2",
    "redux": "^5.0.1",
    "tailwind-merge": "^3.3.1",
    "tailwindcss-animate": "^1.0.7",
    "tailwindcss-elevation": "^2.0.0",
    "tailwindcss-fluid-type": "^2.0.7"
  },
  "scripts": {
    "start": "vite",
    "build": "vite build --sourcemap",
    "serve": "vite preview"
  },
  "eslintConfig": {
    "extends": [
      "react-app",
      "react-app/jest"
    ]
  },
  "browserslist": {
    "production": [
      ">0.2%",
      "not dead",
      "not op_mini all"
    ],
    "development": [
      "last 1 chrome version",
      "last 1 firefox version",
      "last 1 safari version"
    ]
  },
  "devDependencies": {
    "@tailwindcss/aspect-ratio": "^0.4.2",
    "@tailwindcss/container-queries": "^0.1.1",
    "@tailwindcss/line-clamp": "^0.1.0",
    "@tailwindcss/typography": "^0.5.16",
    "@vitejs/plugin-react": "4.3.4",
    "autoprefixer": "10.4.2",
    "postcss": "8.4.8",
    "tailwindcss": "3.4.6",
    "vite": "5.0.0",
    "vite-tsconfig-paths": "3.6.0"
  }
}



--- File: ./postcss.config.js ---

module.exports = {
  plugins: {
    "tailwindcss/nesting": {},
    tailwindcss: {},
    autoprefixer: {},
  },
};



--- File: ./public/manifest.json ---

{
  "short_name": "ai-tani-kupang",
  "name": "ai-tani-kupang",
  "icons": [
    {
      "src": "favicon.ico",
      "sizes": "64x64 32x32 24x24 16x16",
      "type": "image/x-icon"
    }
  ],
  "start_url": ".",
  "display": "standalone",
  "theme_color": "#000000",
  "background_color": "#ffffff"
}



--- File: ./public/robots.txt ---

# https://www.robotstxt.org/robotstxt.html
User-agent: *
Disallow:



--- File: ./src/App.jsx ---

import React from "react";
import Routes from "./Routes";

function App() {
  return (
    <Routes />
  );
}

export default App;



--- File: ./src/Routes.jsx ---

import React from "react";
import { BrowserRouter, Routes as RouterRoutes, Route } from "react-router-dom";
import ScrollToTop from "components/ScrollToTop";
import ErrorBoundary from "components/ErrorBoundary";
import NotFound from "pages/NotFound";
import HomeDashboard from './pages/home-dashboard';
import PhotoDiagnosis from './pages/photo-diagnosis';
import CommunityAlerts from './pages/community-alerts';
import DiagnosisResults from './pages/diagnosis-results';
import FarmingCalendar from './pages/farming-calendar';

const Routes = () => {
  return (
    <BrowserRouter>
      <ErrorBoundary>
      <ScrollToTop />
      <RouterRoutes>
        {/* Define your route here */}
        <Route path="/" element={<HomeDashboard />} />
        <Route path="/home-dashboard" element={<HomeDashboard />} />
        <Route path="/photo-diagnosis" element={<PhotoDiagnosis />} />
        <Route path="/community-alerts" element={<CommunityAlerts />} />
        <Route path="/diagnosis-results" element={<DiagnosisResults />} />
        <Route path="/farming-calendar" element={<FarmingCalendar />} />
        <Route path="*" element={<NotFound />} />
      </RouterRoutes>
      </ErrorBoundary>
    </BrowserRouter>
  );
};

export default Routes;



--- File: ./src/components/AppIcon.jsx ---

import React from 'react';
import * as LucideIcons from 'lucide-react';
import { HelpCircle } from 'lucide-react';

function Icon({
    name,
    size = 24,
    color = "currentColor",
    className = "",
    strokeWidth = 2,
    ...props
}) {
    const IconComponent = LucideIcons?.[name];

    if (!IconComponent) {
        return <HelpCircle size={size} color="gray" strokeWidth={strokeWidth} className={className} {...props} />;
    }

    return <IconComponent
        size={size}
        color={color}
        strokeWidth={strokeWidth}
        className={className}
        {...props}
    />;
}
export default Icon;


--- File: ./src/components/AppImage.jsx ---

import React from 'react';

function Image({
  src,
  alt = "Image Name",
  className = "",
  ...props
}) {

  return (
    <img
      src={src}
      alt={alt}
      className={className}
      onError={(e) => {
        e.target.src = "/assets/images/no_image.png"
      }}
      {...props}
    />
  );
}

export default Image;



--- File: ./src/components/ErrorBoundary.jsx ---

import React from "react";
import Icon from "./AppIcon";

class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error) {
    return { hasError: true };
  }

  componentDidCatch(error, errorInfo) {
    error.__ErrorBoundary = true;
    window.__COMPONENT_ERROR__?.(error, errorInfo);
    // console.log("Error caught by ErrorBoundary:", error, errorInfo);
  }

  render() {
    if (this.state?.hasError) {
      return (
        <div className="min-h-screen flex items-center justify-center bg-neutral-50">
          <div className="text-center p-8 max-w-md">
            <div className="flex justify-center items-center mb-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="42px" height="42px" viewBox="0 0 32 33" fill="none">
                <path d="M16 28.5C22.6274 28.5 28 23.1274 28 16.5C28 9.87258 22.6274 4.5 16 4.5C9.37258 4.5 4 9.87258 4 16.5C4 23.1274 9.37258 28.5 16 28.5Z" stroke="#343330" strokeWidth="2" strokeMiterlimit="10" />
                <path d="M11.5 15.5C12.3284 15.5 13 14.8284 13 14C13 13.1716 12.3284 12.5 11.5 12.5C10.6716 12.5 10 13.1716 10 14C10 14.8284 10.6716 15.5 11.5 15.5Z" fill="#343330" />
                <path d="M20.5 15.5C21.3284 15.5 22 14.8284 22 14C22 13.1716 21.3284 12.5 20.5 12.5C19.6716 12.5 19 13.1716 19 14C19 14.8284 19.6716 15.5 20.5 15.5Z" fill="#343330" />
                <path d="M21 22.5C19.9625 20.7062 18.2213 19.5 16 19.5C13.7787 19.5 12.0375 20.7062 11 22.5" stroke="#343330" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
              </svg>
            </div>
            <div className="flex flex-col gap-1 text-center">
              <h1 className="text-2xl font-medium text-neutral-800">Something went wrong</h1>
              <p className="text-neutral-600 text-base w w-8/12 mx-auto">We encountered an unexpected error while processing your request.</p>
            </div>
            <div className="flex justify-center items-center mt-6">
              <button
                onClick={() => {
                  window.location.href = "/";
                }}
                className="bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded flex items-center gap-2 transition-colors duration-200 shadow-sm"
              >
                <Icon name="ArrowLeft" size={18} color="#fff" />
                Back
              </button>
            </div>
          </div >
        </div >
      );
    }

    return this.props?.children;
  }
}

export default ErrorBoundary;


--- File: ./src/components/ScrollToTop.jsx ---

import { useEffect } from "react";
import { useLocation } from "react-router-dom";

const ScrollToTop = () => {
  const { pathname } = useLocation();

  useEffect(() => {
    window.scrollTo(0, 0);
  }, [pathname]);

  return null;
};

export default ScrollToTop;


--- File: ./src/components/layout/MobileLayout.jsx ---

// src/components/layout/MobileLayout.jsx
import React from 'react';
import BottomNavigation from 'components/ui/BottomNavigation';

export default function MobileLayout({ children, className = '' }) {
  return (
    <div className="min-h-screen bg-background">
      <div className="mx-auto max-w-[420px] px-4 pb-20"> 
        {children}
      </div>
      <BottomNavigation />
    </div>
  );
}



--- File: ./src/components/ui/BottomNavigation.jsx ---

import React from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import Icon from '../AppIcon';

const BottomNavigation = () => {
  const location = useLocation();
  const navigate = useNavigate();

  const navigationItems = [
    {
      id: 'home',
      label: 'Beranda',
      path: '/home-dashboard',
      icon: 'Home',
      tooltip: 'Dashboard utama dan ringkasan aktivitas'
    },
    {
      id: 'diagnosis',
      label: 'Diagnosis',
      path: '/photo-diagnosis',
      icon: 'Camera',
      tooltip: 'Foto tanaman untuk diagnosis AI'
    },
    {
      id: 'calendar',
      label: 'Kalender',
      path: '/farming-calendar',
      icon: 'Calendar',
      tooltip: 'Jadwal dan catatan pertanian'
    },
    {
      id: 'community',
      label: 'Komunitas',
      path: '/community-alerts',
      icon: 'AlertTriangle',
      tooltip: 'Peringatan hama dan komunitas'
    }
  ];

  const handleNavigation = (path) => {
    navigate(path);
  };

  const isActive = (path) => {
    return location?.pathname === path;
  };

  return (
    <nav 
      className="fixed bottom-0 left-0 right-0 bg-card border-t border-border z-100"
      role="navigation"
      aria-label="Navigasi utama"
    >
      <div className="flex items-center justify-around px-4 py-2 max-w-[420px] mx-auto">
        {navigationItems?.map((item) => {
          const active = isActive(item?.path);
          
          return (
            <button
              key={item?.id}
              onClick={() => handleNavigation(item?.path)}
              className={`
                flex flex-col items-center justify-center min-h-touch px-2 py-1 rounded-lg
                transition-smooth haptic-feedback
                ${active 
                  ? 'text-primary bg-primary/10' :'text-muted-foreground hover:text-foreground hover:bg-muted'
                }
              `}
              aria-label={item?.tooltip}
              title={item?.tooltip}
            >
              <Icon 
                name={item?.icon} 
                size={24} 
                strokeWidth={active ? 2.5 : 2}
                className="mb-1"
              />
              <span className={`text-xs font-medium ${active ? 'font-semibold' : ''}`}>
                {item?.label}
              </span>
            </button>
          );
        })}
      </div>
    </nav>
  );
};

export default BottomNavigation;


--- File: ./src/components/ui/Button.jsx ---

import React from 'react';
import { Slot } from "@radix-ui/react-slot";
import { cva } from "class-variance-authority";
import { cn } from "../../utils/cn";
import Icon from '../AppIcon';

const buttonVariants = cva(
    "inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",
    {
        variants: {
            variant: {
                default: "bg-primary text-primary-foreground hover:bg-primary/90",
                destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
                outline: "border border-input hover:bg-accent hover:text-accent-foreground",
                secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
                ghost: "hover:bg-accent hover:text-accent-foreground",
                link: "text-primary underline-offset-4 hover:underline",
                success: "bg-success text-success-foreground hover:bg-success/90",
                warning: "bg-warning text-warning-foreground hover:bg-warning/90",
                danger: "bg-error text-error-foreground hover:bg-error/90",
            },
            size: {
                default: "h-10 px-4 py-2",
                sm: "h-9 rounded-md px-3",
                lg: "h-11 rounded-md px-8",
                icon: "h-10 w-10",
                xs: "h-8 rounded-md px-2 text-xs",
                xl: "h-12 rounded-md px-10 text-base",
            },
        },
        defaultVariants: {
            variant: "default",
            size: "default",
        },
    }
);

const Button = React.forwardRef(({
    className,
    variant,
    size,
    asChild = false,
    children,
    loading = false,
    iconName = null,
    iconPosition = 'left',
    iconSize = null,
    fullWidth = false,
    disabled = false,
    ...props
}, ref) => {
    const Comp = asChild ? Slot : "button";

    // Icon size mapping based on button size
    const iconSizeMap = {
        xs: 12,
        sm: 14,
        default: 16,
        lg: 18,
        xl: 20,
        icon: 16,
    };

    const calculatedIconSize = iconSize || iconSizeMap?.[size] || 16;

    // Loading spinner
    const LoadingSpinner = () => (
        <svg className="animate-spin -ml-1 mr-2 h-4 w-4" fill="none" viewBox="0 0 24 24">
            <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" />
            <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
        </svg>
    );

    const renderIcon = () => {
        if (!iconName) return null;
        try {
            return (
                <Icon
                    name={iconName}
                    size={calculatedIconSize}
                    className={cn(
                        children && iconPosition === 'left' && "mr-2",
                        children && iconPosition === 'right' && "ml-2"
                    )}
                />
            );
        } catch {
            return null;
        }
    };

    const renderFallbackButton = () => (
        <button
            className={cn(
                buttonVariants({ variant, size, className }),
                fullWidth && "w-full"
            )}
            ref={ref}
            disabled={disabled || loading}
            {...props}
        >
            {loading && <LoadingSpinner />}
            {iconName && iconPosition === 'left' && renderIcon()}
            {children}
            {iconName && iconPosition === 'right' && renderIcon()}
        </button>
    );

    // When asChild is true, merge icons into the child element
    if (asChild) {
        try {
            if (!children || React.Children?.count(children) !== 1) {
                return renderFallbackButton();
            }

            const child = React.Children?.only(children);

            if (!React.isValidElement(child)) {
                return renderFallbackButton();
            }
            const content = (
                <>
                    {loading && <LoadingSpinner />}
                    {iconName && iconPosition === 'left' && renderIcon()}
                    {child?.props?.children}
                    {iconName && iconPosition === 'right' && renderIcon()}
                </>
            );

            const clonedChild = React.cloneElement(child, {
                className: cn(
                    buttonVariants({ variant, size, className }),
                    fullWidth && "w-full",
                    child?.props?.className
                ),
                disabled: disabled || loading || child?.props?.disabled,
                children: content,
            });

            return <Comp ref={ref} {...props}>{clonedChild}</Comp>;
        } catch {
            return renderFallbackButton();
        }
    }

    return (
        <Comp
            className={cn(
                buttonVariants({ variant, size, className }),
                fullWidth && "w-full"
            )}
            ref={ref}
            disabled={disabled || loading}
            {...props}
        >
            {loading && <LoadingSpinner />}
            {iconName && iconPosition === 'left' && renderIcon()}
            {children}
            {iconName && iconPosition === 'right' && renderIcon()}
        </Comp>
    );
});

Button.displayName = "Button";
export default Button;


--- File: ./src/components/ui/Checkbox.jsx ---

import React from "react";
import { Check, Minus } from "lucide-react";
import { cn } from "../../utils/cn";

const Checkbox = React.forwardRef(({
    className,
    id,
    checked,
    indeterminate = false,
    disabled = false,
    required = false,
    label,
    description,
    error,
    size = "default",
    ...props
}, ref) => {
    // Generate unique ID if not provided
    const checkboxId = id || `checkbox-${Math.random()?.toString(36)?.substr(2, 9)}`;

    // Size variants
    const sizeClasses = {
        sm: "h-4 w-4",
        default: "h-4 w-4",
        lg: "h-5 w-5"
    };

    return (
        <div className={cn("flex items-start space-x-2", className)}>
            <div className="relative flex items-center">
                <input
                    type="checkbox"
                    ref={ref}
                    id={checkboxId}
                    checked={checked}
                    disabled={disabled}
                    required={required}
                    className="sr-only"
                    {...props}
                />

                <label
                    htmlFor={checkboxId}
                    className={cn(
                        "peer shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground cursor-pointer transition-colors",
                        sizeClasses?.[size],
                        checked && "bg-primary text-primary-foreground border-primary",
                        indeterminate && "bg-primary text-primary-foreground border-primary",
                        error && "border-destructive",
                        disabled && "cursor-not-allowed opacity-50"
                    )}
                >
                    {checked && !indeterminate && (
                        <Check className="h-3 w-3 text-current flex items-center justify-center" />
                    )}
                    {indeterminate && (
                        <Minus className="h-3 w-3 text-current flex items-center justify-center" />
                    )}
                </label>
            </div>
            {(label || description || error) && (
                <div className="flex-1 space-y-1">
                    {label && (
                        <label
                            htmlFor={checkboxId}
                            className={cn(
                                "text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",
                                error ? "text-destructive" : "text-foreground"
                            )}
                        >
                            {label}
                            {required && <span className="text-destructive ml-1">*</span>}
                        </label>
                    )}

                    {description && !error && (
                        <p className="text-sm text-muted-foreground">
                            {description}
                        </p>
                    )}

                    {error && (
                        <p className="text-sm text-destructive">
                            {error}
                        </p>
                    )}
                </div>
            )}
        </div>
    );
});

Checkbox.displayName = "Checkbox";

// Checkbox Group component
const CheckboxGroup = React.forwardRef(({
    className,
    children,
    label,
    description,
    error,
    required = false,
    disabled = false,
    ...props
}, ref) => {
    return (
        <fieldset
            ref={ref}
            disabled={disabled}
            className={cn("space-y-3", className)}
            {...props}
        >
            {label && (
                <legend className={cn(
                    "text-sm font-medium",
                    error ? "text-destructive" : "text-foreground"
                )}>
                    {label}
                    {required && <span className="text-destructive ml-1">*</span>}
                </legend>
            )}

            {description && !error && (
                <p className="text-sm text-muted-foreground">
                    {description}
                </p>
            )}

            <div className="space-y-2">
                {children}
            </div>

            {error && (
                <p className="text-sm text-destructive">
                    {error}
                </p>
            )}
        </fieldset>
    );
});

CheckboxGroup.displayName = "CheckboxGroup";

export { Checkbox, CheckboxGroup };


--- File: ./src/components/ui/Input.jsx ---

import React from "react";
import { cn } from "../../utils/cn";

const Input = React.forwardRef(({
    className,
    type = "text",
    label,
    description,
    error,
    required = false,
    id,
    ...props
}, ref) => {
    // Generate unique ID if not provided
    const inputId = id || `input-${Math.random()?.toString(36)?.substr(2, 9)}`;

    // Base input classes
    const baseInputClasses = "flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50";

    // Checkbox-specific styles
    if (type === "checkbox") {
        return (
            <input
                type="checkbox"
                className={cn(
                    "h-4 w-4 rounded border border-input bg-background text-primary focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
                    className
                )}
                ref={ref}
                id={inputId}
                {...props}
            />
        );
    }

    // Radio button-specific styles
    if (type === "radio") {
        return (
            <input
                type="radio"
                className={cn(
                    "h-4 w-4 rounded-full border border-input bg-background text-primary focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
                    className
                )}
                ref={ref}
                id={inputId}
                {...props}
            />
        );
    }

    // For regular inputs with wrapper structure
    return (
        <div className="space-y-2">
            {label && (
                <label
                    htmlFor={inputId}
                    className={cn(
                        "text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",
                        error ? "text-destructive" : "text-foreground"
                    )}
                >
                    {label}
                    {required && <span className="text-destructive ml-1">*</span>}
                </label>
            )}

            <input
                type={type}
                className={cn(
                    baseInputClasses,
                    error && "border-destructive focus-visible:ring-destructive",
                    className
                )}
                ref={ref}
                id={inputId}
                {...props}
            />

            {description && !error && (
                <p className="text-sm text-muted-foreground">
                    {description}
                </p>
            )}

            {error && (
                <p className="text-sm text-destructive">
                    {error}
                </p>
            )}
        </div>
    );
});

Input.displayName = "Input";

export default Input;


--- File: ./src/components/ui/LoadingOverlay.jsx ---

import React from 'react';
import Icon from '../AppIcon';

const LoadingOverlay = ({ 
  isVisible = false, 
  message = 'Memproses...', 
  animationType = 'plant',
  className = '' 
}) => {
  if (!isVisible) return null;

  const renderLoadingAnimation = () => {
    switch (animationType) {
      case 'plant':
        return (
          <div className="loading-plant">
            <Icon name="Sprout" size={48} className="text-primary" />
          </div>
        );
      case 'camera':
        return (
          <div className="loading-plant">
            <Icon name="Camera" size={48} className="text-primary" />
          </div>
        );
      case 'sync':
        return (
          <div className="animate-spin">
            <Icon name="RefreshCw" size={48} className="text-primary" />
          </div>
        );
      default:
        return (
          <div className="loading-plant">
            <Icon name="Loader2" size={48} className="text-primary animate-spin" />
          </div>
        );
    }
  };

  return (
    <div 
      className={`
        fixed inset-0 bg-background/80 backdrop-blur-sm z-200 
        flex flex-col items-center justify-center p-6
        ${className}
      `}
      role="dialog"
      aria-modal="true"
      aria-labelledby="loading-message"
    >
      <div className="flex flex-col items-center space-y-4">
        {renderLoadingAnimation()}
        
        <div className="text-center">
          <p 
            id="loading-message"
            className="text-lg font-medium text-foreground mb-2"
          >
            {message}
          </p>
          <p className="text-sm text-muted-foreground">
            Mohon tunggu sebentar...
          </p>
        </div>
        
        {/* Progress indicator dots */}
        <div className="flex space-x-2">
          <div className="w-2 h-2 bg-primary rounded-full animate-pulse"></div>
          <div className="w-2 h-2 bg-primary rounded-full animate-pulse" style={{ animationDelay: '0.2s' }}></div>
          <div className="w-2 h-2 bg-primary rounded-full animate-pulse" style={{ animationDelay: '0.4s' }}></div>
        </div>
      </div>
    </div>
  );
};

export default LoadingOverlay;


--- File: ./src/components/ui/OfflineStatusBanner.jsx ---

import React, { useState, useEffect } from 'react';
import Icon from '../AppIcon';

const OfflineStatusBanner = ({ 
  isOnline = true, 
  pendingSyncCount = 0,
  onRetrySync = null,
  className = '' 
}) => {
  const [isVisible, setIsVisible] = useState(false);
  const [showDetails, setShowDetails] = useState(false);

  useEffect(() => {
    // Show banner when offline or when there are pending syncs
    setIsVisible(!isOnline || pendingSyncCount > 0);
  }, [isOnline, pendingSyncCount]);

  const handleRetry = () => {
    if (onRetrySync) {
      onRetrySync();
    }
  };

  const getBannerContent = () => {
    if (!isOnline) {
      return {
        icon: 'WifiOff',
        title: 'Tidak ada koneksi internet',
        message: 'Data akan disinkronkan saat koneksi kembali',
        bgColor: 'bg-warning/10',
        textColor: 'text-warning-foreground',
        iconColor: 'text-warning'
      };
    } else if (pendingSyncCount > 0) {
      return {
        icon: 'CloudOff',
        title: `${pendingSyncCount} data menunggu sinkronisasi`,
        message: 'Benih telah ditanam, akan tumbuh saat terhubung',
        bgColor: 'bg-secondary/10',
        textColor: 'text-secondary-foreground',
        iconColor: 'text-secondary'
      };
    }
    return null;
  };

  if (!isVisible) return null;

  const content = getBannerContent();
  if (!content) return null;

  return (
    <div 
      className={`
        ${content?.bgColor} border-b border-border transition-smooth
        ${className}
      `}
      role="banner"
      aria-live="polite"
    >
      <div className="px-4 py-3">
        <div className="flex items-center justify-between">
          <div className="flex items-center space-x-3 flex-1">
            <Icon 
              name={content?.icon} 
              size={20} 
              className={content?.iconColor}
            />
            
            <div className="flex-1 min-w-0">
              <p className={`text-sm font-medium ${content?.textColor}`}>
                {content?.title}
              </p>
              {showDetails && (
                <p className={`text-xs ${content?.textColor} opacity-80 mt-1`}>
                  {content?.message}
                </p>
              )}
            </div>
          </div>
          
          <div className="flex items-center space-x-2">
            {onRetrySync && isOnline && pendingSyncCount > 0 && (
              <button
                onClick={handleRetry}
                className={`
                  text-xs px-3 py-1 rounded-md font-medium
                  bg-secondary text-secondary-foreground
                  hover:bg-secondary/90 transition-smooth
                  haptic-feedback
                `}
                aria-label="Coba sinkronisasi ulang"
              >
                Sinkron
              </button>
            )}
            
            <button
              onClick={() => setShowDetails(!showDetails)}
              className={`
                p-1 rounded-md transition-smooth
                ${content?.iconColor} hover:bg-black/5
              `}
              aria-label={showDetails ? 'Sembunyikan detail' : 'Tampilkan detail'}
            >
              <Icon 
                name={showDetails ? 'ChevronUp' : 'ChevronDown'} 
                size={16} 
              />
            </button>
          </div>
        </div>
        
        {/* Connection status indicator */}
        <div className="flex items-center mt-2 space-x-2">
          <div className={`
            w-2 h-2 rounded-full
            ${isOnline ? 'bg-success animate-pulse' : 'bg-warning'}
          `}></div>
          <span className={`text-xs ${content?.textColor} opacity-70`}>
            {isOnline ? 'Terhubung' : 'Terputus'}
          </span>
        </div>
      </div>
    </div>
  );
};

export default OfflineStatusBanner;


--- File: ./src/components/ui/Select.jsx ---

// components/ui/Select.jsx - Shadcn style Select
import React, { useState } from "react";
import { ChevronDown, Check, Search, X } from "lucide-react";
import { cn } from "../../utils/cn";
import Button from "./Button";
import Input from "./Input";

const Select = React.forwardRef(({
    className,
    options = [],
    value,
    defaultValue,
    placeholder = "Select an option",
    multiple = false,
    disabled = false,
    required = false,
    label,
    description,
    error,
    searchable = false,
    clearable = false,
    loading = false,
    id,
    name,
    onChange,
    onOpenChange,
    ...props
}, ref) => {
    const [isOpen, setIsOpen] = useState(false);
    const [searchTerm, setSearchTerm] = useState("");

    // Generate unique ID if not provided
    const selectId = id || `select-${Math.random()?.toString(36)?.substr(2, 9)}`;

    // Filter options based on search
    const filteredOptions = searchable && searchTerm
        ? options?.filter(option =>
            option?.label?.toLowerCase()?.includes(searchTerm?.toLowerCase()) ||
            (option?.value && option?.value?.toString()?.toLowerCase()?.includes(searchTerm?.toLowerCase()))
        )
        : options;

    // Get selected option(s) for display
    const getSelectedDisplay = () => {
        if (!value) return placeholder;

        if (multiple) {
            const selectedOptions = options?.filter(opt => value?.includes(opt?.value));
            if (selectedOptions?.length === 0) return placeholder;
            if (selectedOptions?.length === 1) return selectedOptions?.[0]?.label;
            return `${selectedOptions?.length} items selected`;
        }

        const selectedOption = options?.find(opt => opt?.value === value);
        return selectedOption ? selectedOption?.label : placeholder;
    };

    const handleToggle = () => {
        if (!disabled) {
            const newIsOpen = !isOpen;
            setIsOpen(newIsOpen);
            onOpenChange?.(newIsOpen);
            if (!newIsOpen) {
                setSearchTerm("");
            }
        }
    };

    const handleOptionSelect = (option) => {
        if (multiple) {
            const newValue = value || [];
            const updatedValue = newValue?.includes(option?.value)
                ? newValue?.filter(v => v !== option?.value)
                : [...newValue, option?.value];
            onChange?.(updatedValue);
        } else {
            onChange?.(option?.value);
            setIsOpen(false);
            onOpenChange?.(false);
        }
    };

    const handleClear = (e) => {
        e?.stopPropagation();
        onChange?.(multiple ? [] : '');
    };

    const handleSearchChange = (e) => {
        setSearchTerm(e?.target?.value);
    };

    const isSelected = (optionValue) => {
        if (multiple) {
            return value?.includes(optionValue) || false;
        }
        return value === optionValue;
    };

    const hasValue = multiple ? value?.length > 0 : value !== undefined && value !== '';

    return (
        <div className={cn("relative", className)}>
            {label && (
                <label
                    htmlFor={selectId}
                    className={cn(
                        "text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 mb-2 block",
                        error ? "text-destructive" : "text-foreground"
                    )}
                >
                    {label}
                    {required && <span className="text-destructive ml-1">*</span>}
                </label>
            )}
            <div className="relative">
                <button
                    ref={ref}
                    id={selectId}
                    type="button"
                    className={cn(
                        "flex h-10 w-full items-center justify-between rounded-md border border-input bg-white text-black px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
                        error && "border-destructive focus:ring-destructive",
                        !hasValue && "text-muted-foreground"
                    )}
                    onClick={handleToggle}
                    disabled={disabled}
                    aria-expanded={isOpen}
                    aria-haspopup="listbox"
                    {...props}
                >
                    <span className="truncate">{getSelectedDisplay()}</span>

                    <div className="flex items-center gap-1">
                        {loading && (
                            <svg className="animate-spin h-4 w-4" viewBox="0 0 24 24">
                                <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" fill="none" />
                                <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
                            </svg>
                        )}

                        {clearable && hasValue && !loading && (
                            <Button
                                variant="ghost"
                                size="icon"
                                className="h-4 w-4"
                                onClick={handleClear}
                            >
                                <X className="h-3 w-3" />
                            </Button>
                        )}

                        <ChevronDown className={cn("h-4 w-4 transition-transform", isOpen && "rotate-180")} />
                    </div>
                </button>

                {/* Hidden native select for form submission */}
                <select
                    name={name}
                    value={value || ''}
                    onChange={() => { }} // Controlled by our custom logic
                    className="sr-only"
                    tabIndex={-1}
                    multiple={multiple}
                    required={required}
                >
                    <option value="">Select...</option>
                    {options?.map(option => (
                        <option key={option?.value} value={option?.value}>
                            {option?.label}
                        </option>
                    ))}
                </select>

                {/* Dropdown */}
                {isOpen && (
                    <div className="absolute z-50 w-full mt-1 bg-white text-black border border-border rounded-md shadow-md">
                        {searchable && (
                            <div className="p-2 border-b">
                                <div className="relative">
                                    <Search className="absolute left-2 top-2.5 h-4 w-4 text-muted-foreground" />
                                    <Input
                                        placeholder="Search options..."
                                        value={searchTerm}
                                        onChange={handleSearchChange}
                                        className="pl-8"
                                    />
                                </div>
                            </div>
                        )}

                        <div className="py-1 max-h-60 overflow-auto">
                            {filteredOptions?.length === 0 ? (
                                <div className="px-3 py-2 text-sm text-muted-foreground">
                                    {searchTerm ? 'No options found' : 'No options available'}
                                </div>
                            ) : (
                                filteredOptions?.map((option) => (
                                    <div
                                        key={option?.value}
                                        className={cn(
                                            "relative flex cursor-pointer select-none items-center rounded-sm px-3 py-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground",
                                            isSelected(option?.value) && "bg-primary text-primary-foreground",
                                            option?.disabled && "pointer-events-none opacity-50"
                                        )}
                                        onClick={() => !option?.disabled && handleOptionSelect(option)}
                                    >
                                        <span className="flex-1">{option?.label}</span>
                                        {multiple && isSelected(option?.value) && (
                                            <Check className="h-4 w-4" />
                                        )}
                                        {option?.description && (
                                            <span className="text-xs text-muted-foreground ml-2">
                                                {option?.description}
                                            </span>
                                        )}
                                    </div>
                                ))
                            )}
                        </div>
                    </div>
                )}
            </div>
            {description && !error && (
                <p className="text-sm text-muted-foreground mt-1">
                    {description}
                </p>
            )}
            {error && (
                <p className="text-sm text-destructive mt-1">
                    {error}
                </p>
            )}
        </div>
    );
});

Select.displayName = "Select";

export default Select;


--- File: ./src/components/ui/ShareActionSheet.jsx ---

import React, { useState } from 'react';
import Icon from '../AppIcon';
import Button from './Button';

const ShareActionSheet = ({ 
  isOpen = false, 
  onClose = () => {}, 
  shareData = {},
  className = '' 
}) => {
  const [copySuccess, setCopySuccess] = useState(false);

  const formatShareText = () => {
    const { title, description, results, timestamp } = shareData;
    
    let shareText = `üå± AI Tani Kupang - ${title}\n\n`;
    
    if (description) {
      shareText += `üìù ${description}\n\n`;
    }
    
    if (results && Array.isArray(results)) {
      shareText += `üîç Hasil Diagnosis:\n`;
      results?.forEach((result, index) => {
        shareText += `${index + 1}. ${result?.name} (${result?.confidence}%)\n`;
      });
      shareText += '\n';
    }
    
    if (timestamp) {
      shareText += `üìÖ ${new Date(timestamp)?.toLocaleString('id-ID')}\n\n`;
    }
    
    shareText += `Dibuat dengan AI Tani Kupang üöÄ`;
    
    return shareText;
  };

  const handleWhatsAppShare = () => {
    const text = encodeURIComponent(formatShareText());
    const whatsappUrl = `https://wa.me/?text=${text}`;
    window.open(whatsappUrl, '_blank');
    onClose();
  };

  const handleCopyToClipboard = async () => {
    try {
      await navigator.clipboard?.writeText(formatShareText());
      setCopySuccess(true);
      setTimeout(() => setCopySuccess(false), 2000);
    } catch (err) {
      console.error('Failed to copy text: ', err);
      // Fallback for older browsers
      const textArea = document.createElement('textarea');
      textArea.value = formatShareText();
      document.body?.appendChild(textArea);
      textArea?.select();
      document.execCommand('copy');
      document.body?.removeChild(textArea);
      setCopySuccess(true);
      setTimeout(() => setCopySuccess(false), 2000);
    }
  };

  const handleNativeShare = async () => {
    if (navigator.share) {
      try {
        await navigator.share({
          title: shareData?.title || 'AI Tani Kupang',
          text: formatShareText(),
        });
        onClose();
      } catch (err) {
        if (err?.name !== 'AbortError') {
          console.error('Error sharing:', err);
        }
      }
    }
  };

  if (!isOpen) return null;

  return (
    <>
      {/* Backdrop */}
      <div 
        className="fixed inset-0 bg-black/50 z-300 transition-smooth"
        onClick={onClose}
        aria-hidden="true"
      />
      
      {/* Action Sheet */}
      <div 
        className={`
          fixed bottom-0 left-0 right-0 z-300
          bg-card rounded-t-lg border-t border-border
          transform transition-smooth
          ${className}
        `}
        role="dialog"
        aria-modal="true"
        aria-labelledby="share-title"
      >
        <div className="p-6">
          {/* Header */}
          <div className="flex items-center justify-between mb-6">
            <h3 
              id="share-title"
              className="text-lg font-semibold text-foreground"
            >
              Bagikan Hasil
            </h3>
            <button
              onClick={onClose}
              className="p-2 rounded-lg hover:bg-muted transition-smooth"
              aria-label="Tutup"
            >
              <Icon name="X" size={20} />
            </button>
          </div>
          
          {/* Preview */}
          <div className="bg-muted rounded-lg p-4 mb-6">
            <p className="text-sm text-muted-foreground mb-2">Preview:</p>
            <div className="text-sm text-foreground whitespace-pre-line max-h-32 overflow-y-auto">
              {formatShareText()}
            </div>
          </div>
          
          {/* Share Options */}
          <div className="space-y-3">
            {/* WhatsApp */}
            <Button
              variant="outline"
              fullWidth
              iconName="MessageCircle"
              iconPosition="left"
              onClick={handleWhatsAppShare}
              className="justify-start"
            >
              Bagikan ke WhatsApp
            </Button>
            
            {/* Native Share (if supported) */}
            {navigator.share && (
              <Button
                variant="outline"
                fullWidth
                iconName="Share"
                iconPosition="left"
                onClick={handleNativeShare}
                className="justify-start"
              >
                Bagikan ke Aplikasi Lain
              </Button>
            )}
            
            {/* Copy to Clipboard */}
            <Button
              variant="outline"
              fullWidth
              iconName={copySuccess ? "Check" : "Copy"}
              iconPosition="left"
              onClick={handleCopyToClipboard}
              className="justify-start"
            >
              {copySuccess ? 'Berhasil Disalin!' : 'Salin ke Clipboard'}
            </Button>
          </div>
          
          {/* Cancel */}
          <div className="mt-6 pt-4 border-t border-border">
            <Button
              variant="ghost"
              fullWidth
              onClick={onClose}
            >
              Batal
            </Button>
          </div>
        </div>
      </div>
    </>
  );
};

export default ShareActionSheet;


--- File: ./src/index.jsx ---

import React from "react";
import { createRoot } from "react-dom/client";
import App from "./App";
import "./styles/tailwind.css";
import "./styles/index.css";

const container = document.getElementById("root");
const root = createRoot(container);

root.render(<App />);



--- File: ./src/pages/NotFound.jsx ---

import React from 'react';
import { useNavigate } from 'react-router-dom';
import Button from 'components/ui/Button';
import Icon from 'components/AppIcon';

const NotFound = () => {
  const navigate = useNavigate();

  const handleGoHome = () => {
    navigate('/');
  };

  return (
    <div className="min-h-screen flex flex-col items-center justify-center bg-background p-4">
      <div className="text-center max-w-md">
        <div className="flex justify-center mb-6">
          <div className="relative">
            <h1 className="text-9xl font-bold text-primary opacity-20">404</h1>
          </div>
        </div>

        <h2 className="text-2xl font-medium text-onBackground mb-2">Page Not Found</h2>
        <p className="text-onBackground/70 mb-8">
          The page you're looking for doesn't exist. Let's get you back!
        </p>

        <div className="flex flex-col sm:flex-row gap-4 justify-center">
          <Button
            variant="primary"
            icon={<Icon name="ArrowLeft" />}
            iconPosition="left"
            onClick={() => window.history?.back()}
          >
            Go Back
          </Button>

          <Button
            variant="outline"
            icon={<Icon name="Home" />}
            iconPosition="left"
            onClick={handleGoHome}
          >
            Back to Home
          </Button>
        </div>
      </div>
    </div>
  );
};

export default NotFound;



--- File: ./src/pages/community-alerts/components/AlertCard.jsx ---

import React from 'react';
import Icon from '../../../components/AppIcon';

const AlertCard = ({ alert, onViewDetails, className = '' }) => {
  const getSeverityConfig = (severity) => {
    switch (severity?.toLowerCase()) {
      case 'tinggi':
        return {
          color: 'text-error',
          bg: 'bg-error/10',
          border: 'border-error/20',
          label: 'Tinggi',
          icon: 'AlertTriangle'
        };
      case 'sedang':
        return {
          color: 'text-warning',
          bg: 'bg-warning/10',
          border: 'border-warning/20',
          label: 'Sedang',
          icon: 'AlertCircle'
        };
      case 'baik': case'rendah':
        return {
          color: 'text-success',
          bg: 'bg-success/10',
          border: 'border-success/20',
          label: 'Baik',
          icon: 'CheckCircle'
        };
      default:
        return {
          color: 'text-muted-foreground',
          bg: 'bg-muted',
          border: 'border-border',
          label: 'Unknown',
          icon: 'HelpCircle'
        };
    }
  };

  const formatDistance = (distance) => {
    if (distance < 1) {
      return `${Math.round(distance * 1000)}m`;
    }
    return `${distance?.toFixed(1)}km`;
  };

  const formatTimeAgo = (timestamp) => {
    const now = new Date();
    const alertTime = new Date(timestamp);
    const diffInHours = Math.floor((now - alertTime) / (1000 * 60 * 60));
    
    if (diffInHours < 1) {
      const diffInMinutes = Math.floor((now - alertTime) / (1000 * 60));
      return `${diffInMinutes} menit lalu`;
    } else if (diffInHours < 24) {
      return `${diffInHours} jam lalu`;
    } else {
      return alertTime?.toLocaleDateString('id-ID', {
        day: 'numeric',
        month: 'short',
        hour: '2-digit',
        minute: '2-digit'
      });
    }
  };

  const severityConfig = getSeverityConfig(alert?.severity);

  return (
    <div 
      className={`
        bg-card border border-border rounded-xl p-6 
        hover:shadow-lg hover:border-primary/20 transition-smooth cursor-pointer
        ${className}
      `}
      onClick={() => onViewDetails(alert)}
    >
      {/* Header */}
      <div className="flex items-start justify-between mb-4">
        <div className="flex items-center space-x-3">
          <div className={`w-12 h-12 rounded-xl flex items-center justify-center ${severityConfig?.bg}`}>
            <Icon 
              name={severityConfig?.icon} 
              size={24} 
              className={severityConfig?.color}
            />
          </div>
          <div>
            <h3 className="text-xl font-semibold text-foreground">
              {alert?.pestType}
            </h3>
            <p className="text-sm text-muted-foreground">
              {formatDistance(alert?.distance)} ‚Ä¢ {formatTimeAgo(alert?.timestamp)}
            </p>
          </div>
        </div>
        
        {/* Severity Badge with vibrant colors */}
        <div className={`
          px-3 py-1.5 rounded-lg font-bold text-xs border
          ${severityConfig?.color} ${severityConfig?.bg} ${severityConfig?.border}
        `}>
          {severityConfig?.label}
        </div>
      </div>
      {/* Content */}
      <div className="space-y-3 mb-4">
        <p className="text-foreground line-clamp-2 leading-relaxed">
          {alert?.description?.split('\n')?.[0]}
        </p>
        
        {/* Affected Crops */}
        <div className="flex items-center space-x-2">
          <Icon name="Leaf" size={16} className="text-primary" />
          <span className="text-sm font-medium text-foreground">
            {alert?.affectedCrops?.join(', ')}
          </span>
        </div>
        
        {/* Location */}
        <div className="flex items-center space-x-2">
          <Icon name="MapPin" size={16} className="text-muted-foreground" />
          <span className="text-sm text-muted-foreground">
            {alert?.reporterLocation}
          </span>
        </div>
      </div>
      {/* Footer */}
      <div className="flex items-center justify-between pt-4 border-t border-border">
        <div className="flex items-center space-x-4">
          {/* Photo indicator */}
          {alert?.hasPhoto && (
            <div className="flex items-center space-x-1 text-primary">
              <Icon name="Camera" size={16} />
              <span className="text-xs font-medium">Ada foto</span>
            </div>
          )}
          
          {/* Affected area */}
          <div className="flex items-center space-x-1 text-muted-foreground">
            <Icon name="Square" size={16} />
            <span className="text-xs">{alert?.affectedArea}</span>
          </div>
        </div>
        
        {/* View details indicator */}
        <div className="flex items-center space-x-1 text-primary">
          <span className="text-xs font-medium">Lihat detail</span>
          <Icon name="ChevronRight" size={16} />
        </div>
      </div>
    </div>
  );
};

export default AlertCard;


--- File: ./src/pages/community-alerts/components/AlertDetailModal.jsx ---

import React, { useState } from 'react';
import Icon from '../../../components/AppIcon';
import Button from '../../../components/ui/Button';
import Image from '../../../components/AppImage';

const AlertDetailModal = ({ alert, isOpen, onClose, className = '' }) => {
  const [activeTab, setActiveTab] = useState('details');

  if (!isOpen || !alert) return null;

  const getSeverityColor = (severity) => {
    switch (severity?.toLowerCase()) {
      case 'tinggi':
        return 'text-error bg-error/10 border-error/20';
      case 'sedang':
        return 'text-warning bg-warning/10 border-warning/20';
      case 'rendah':
        return 'text-success bg-success/10 border-success/20';
      default:
        return 'text-muted-foreground bg-muted border-border';
    }
  };

  const formatDistance = (distance) => {
    if (distance < 1) {
      return `${Math.round(distance * 1000)}m`;
    }
    return `${distance?.toFixed(1)}km`;
  };

  const formatTimeAgo = (timestamp) => {
    const now = new Date();
    const alertTime = new Date(timestamp);
    const diffInHours = Math.floor((now - alertTime) / (1000 * 60 * 60));
    
    if (diffInHours < 1) {
      const diffInMinutes = Math.floor((now - alertTime) / (1000 * 60));
      return `${diffInMinutes} menit lalu`;
    } else if (diffInHours < 24) {
      return `${diffInHours} jam lalu`;
    } else {
      return alertTime?.toLocaleDateString('id-ID', {
        day: 'numeric',
        month: 'long',
        year: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
    }
  };

  // Mock discussion data
  const mockDiscussion = [
    {
      id: 1,
      author: 'Pak Budi',
      message: 'Saya juga mengalami hal serupa di kebun sebelah. Sudah coba pakai pestisida organik?',
      timestamp: new Date(Date.now() - 3600000),
      isExpert: false
    },
    {
      id: 2,
      author: 'Dr. Agus (Ahli Pertanian)',
      message: 'Untuk kasus wereng seperti ini, saya sarankan menggunakan perangkap kuning dan semprot dengan insektisida nabati. Hindari penyemprotan berlebihan.',
      timestamp: new Date(Date.now() - 1800000),
      isExpert: true
    },
    {
      id: 3,
      author: 'Ibu Sari',
      message: 'Terima kasih infonya! Sangat membantu untuk petani di sekitar sini.',
      timestamp: new Date(Date.now() - 900000),
      isExpert: false
    }
  ];

  return (
    <>
      {/* Backdrop */}
      <div 
        className="fixed inset-0 bg-black/50 z-300 transition-smooth"
        onClick={onClose}
      />
      {/* Modal */}
      <div className={`
        fixed inset-0 z-300 overflow-y-auto
        flex items-center justify-center p-4
        ${className}
      `}>
        <div className="bg-card rounded-lg border border-border w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col">
          {/* Header */}
          <div className="flex items-center justify-between p-6 border-b border-border">
            <div className="flex items-center space-x-3">
              <Icon name="AlertTriangle" size={24} className="text-warning" />
              <div>
                <h2 className="text-xl font-semibold text-foreground">
                  {alert?.pestType}
                </h2>
                <p className="text-sm text-muted-foreground">
                  {alert?.reporterLocation} ‚Ä¢ {formatTimeAgo(alert?.timestamp)}
                </p>
              </div>
            </div>
            <Button
              variant="ghost"
              size="icon"
              iconName="X"
              onClick={onClose}
            />
          </div>

          {/* Tabs */}
          <div className="flex border-b border-border">
            <button
              onClick={() => setActiveTab('details')}
              className={`
                px-6 py-3 text-sm font-medium border-b-2 transition-smooth
                ${activeTab === 'details' ?'border-primary text-primary' :'border-transparent text-muted-foreground hover:text-foreground'
                }
              `}
            >
              Detail Peringatan
            </button>
            <button
              onClick={() => setActiveTab('discussion')}
              className={`
                px-6 py-3 text-sm font-medium border-b-2 transition-smooth
                ${activeTab === 'discussion' ?'border-primary text-primary' :'border-transparent text-muted-foreground hover:text-foreground'
                }
              `}
            >
              Diskusi Komunitas
            </button>
          </div>

          {/* Content */}
          <div className="flex-1 overflow-y-auto">
            {activeTab === 'details' && (
              <div className="p-6 space-y-6">
                {/* Status and Severity */}
                <div className="flex items-center justify-between">
                  <div className={`
                    px-3 py-2 rounded-lg text-sm font-medium border
                    ${getSeverityColor(alert?.severity)}
                  `}>
                    Tingkat Bahaya: {alert?.severity}
                  </div>
                  
                  <div className="flex items-center space-x-2 text-sm text-muted-foreground">
                    <Icon name="MapPin" size={16} />
                    <span>Jarak: {formatDistance(alert?.distance)}</span>
                  </div>
                </div>

                {/* Photo */}
                {alert?.hasPhoto && (
                  <div className="space-y-2">
                    <h4 className="font-medium text-foreground">Foto Kerusakan</h4>
                    <div className="w-full h-64 bg-muted rounded-lg overflow-hidden">
                      <Image
                        src="https://images.pexels.com/photos/4750274/pexels-photo-4750274.jpeg"
                        alt="Foto kerusakan tanaman"
                        className="w-full h-full object-cover"
                      />
                    </div>
                  </div>
                )}

                {/* Description */}
                <div className="space-y-2">
                  <h4 className="font-medium text-foreground">Deskripsi</h4>
                  <p className="text-sm text-muted-foreground leading-relaxed">
                    {alert?.description}
                  </p>
                </div>

                {/* Affected Crops */}
                <div className="space-y-2">
                  <h4 className="font-medium text-foreground">Tanaman Terserang</h4>
                  <div className="flex flex-wrap gap-2">
                    {alert?.affectedCrops?.map((crop, index) => (
                      <div 
                        key={index}
                        className="bg-primary/10 text-primary px-3 py-1 rounded-md text-sm"
                      >
                        {crop}
                      </div>
                    ))}
                  </div>
                </div>

                {/* Additional Info */}
                <div className="flex flex-col gap-4">
                  <div className="space-y-2">
                    <h4 className="font-medium text-foreground">Luas Area</h4>
                    <p className="text-sm text-muted-foreground">
                      {alert?.affectedArea || '0.5 hektar'}
                    </p>
                  </div>
                  
                  <div className="space-y-2">
                    <h4 className="font-medium text-foreground">Intensitas</h4>
                    <p className="text-sm text-muted-foreground">
                      {alert?.pestCount || 'Populasi sedang'}
                    </p>
                  </div>
                </div>

                {/* Location Map */}
                <div className="space-y-2">
                  <h4 className="font-medium text-foreground">Lokasi</h4>
                  <div className="w-full h-48 bg-muted rounded-lg overflow-hidden">
                    <iframe
                      width="100%"
                      height="100%"
                      loading="lazy"
                      title="Lokasi Peringatan Hama"
                      referrerPolicy="no-referrer-when-downgrade"
                      src="https://www.google.com/maps?q=-10.1772,123.6070&z=14&output=embed"
                      className="border-0"
                    />
                  </div>
                </div>

                {/* Recommendations */}
                <div className="space-y-3">
                  <h4 className="font-medium text-foreground">Rekomendasi Penanganan</h4>
                  <div className="space-y-2">
                    <div className="flex items-start space-x-3 p-3 bg-success/10 rounded-lg">
                      <Icon name="CheckCircle" size={20} className="text-success flex-shrink-0 mt-0.5" />
                      <div>
                        <p className="text-sm font-medium text-success">Tindakan Segera</p>
                        <p className="text-sm text-muted-foreground">
                          Lakukan penyemprotan dengan insektisida nabati pada pagi atau sore hari
                        </p>
                      </div>
                    </div>
                    
                    <div className="flex items-start space-x-3 p-3 bg-warning/10 rounded-lg">
                      <Icon name="AlertCircle" size={20} className="text-warning flex-shrink-0 mt-0.5" />
                      <div>
                        <p className="text-sm font-medium text-warning">Pencegahan</p>
                        <p className="text-sm text-muted-foreground">
                          Pasang perangkap kuning dan jaga kebersihan area sekitar tanaman
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            )}

            {activeTab === 'discussion' && (
              <div className="p-6 space-y-4">
                {/* Discussion Header */}
                <div className="flex items-center justify-between">
                  <h4 className="font-medium text-foreground">
                    Diskusi Komunitas ({mockDiscussion?.length})
                  </h4>
                  <Button
                    variant="outline"
                    size="sm"
                    iconName="MessageCircle"
                    iconPosition="left"
                  >
                    Tambah Komentar
                  </Button>
                </div>

                {/* Discussion Messages */}
                <div className="space-y-4">
                  {mockDiscussion?.map((message) => (
                    <div key={message?.id} className="flex space-x-3">
                      <div className="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0">
                        <Icon 
                          name={message?.isExpert ? "GraduationCap" : "User"} 
                          size={16} 
                          className={message?.isExpert ? "text-secondary" : "text-primary"} 
                        />
                      </div>
                      
                      <div className="flex-1 space-y-1">
                        <div className="flex items-center space-x-2">
                          <span className={`text-sm font-medium ${
                            message?.isExpert ? 'text-secondary' : 'text-foreground'
                          }`}>
                            {message?.author}
                          </span>
                          {message?.isExpert && (
                            <div className="bg-secondary/10 text-secondary px-2 py-0.5 rounded-md text-xs">
                              Ahli
                            </div>
                          )}
                          <span className="text-xs text-muted-foreground">
                            {formatTimeAgo(message?.timestamp)}
                          </span>
                        </div>
                        
                        <p className="text-sm text-muted-foreground leading-relaxed">
                          {message?.message}
                        </p>
                      </div>
                    </div>
                  ))}
                </div>

                {/* Add Comment Form */}
                <div className="pt-4 border-t border-border">
                  <div className="flex space-x-3">
                    <div className="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0">
                      <Icon name="User" size={16} className="text-primary" />
                    </div>
                    
                    <div className="flex-1 space-y-2">
                      <textarea
                        placeholder="Bagikan pengalaman atau saran Anda..."
                        rows={3}
                        className="w-full px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring resize-none"
                      />
                      <div className="flex justify-end">
                        <Button
                          variant="default"
                          size="sm"
                          iconName="Send"
                          iconPosition="left"
                        >
                          Kirim
                        </Button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>
      </div>
    </>
  );
};

export default AlertDetailModal;


--- File: ./src/pages/community-alerts/components/AlertFilters.jsx ---

import React, { useState } from 'react';
import Icon from '../../../components/AppIcon';
import Button from '../../../components/ui/Button';
import Select from '../../../components/ui/Select';

const AlertFilters = ({
  filters,
  onFilterChange,
  alertCount,
  onClearFilters,
  className = ''
}) => {
  const [isExpanded, setIsExpanded] = useState(false);

  const pestTypeOptions = [
    { value: 'all', label: 'Semua Hama' },
    { value: 'wereng', label: 'Wereng' },
    { value: 'ulat', label: 'Ulat' },
    { value: 'kutu', label: 'Kutu' },
    { value: 'trips', label: 'Trips' },
    { value: 'penggerek', label: 'Penggerek' }
  ];

  const severityOptions = [
    { value: 'all', label: 'Semua Tingkat' },
    { value: 'tinggi', label: 'Tinggi' },
    { value: 'sedang', label: 'Sedang' },
    { value: 'rendah', label: 'Baik' }
  ];

  const distanceOptions = [
    { value: 'all', label: 'Semua Jarak' },
    { value: '1', label: 'Dalam 1km' },
    { value: '5', label: 'Dalam 5km' },
    { value: '10', label: 'Dalam 10km' },
    { value: '25', label: 'Dalam 25km' }
  ];

  const timeOptions = [
    { value: '6', label: '6 jam terakhir' },
    { value: '12', label: '12 jam terakhir' },
    { value: '24', label: '24 jam terakhir' },
    { value: '72', label: '3 hari terakhir' },
    { value: '168', label: '1 minggu terakhir' }
  ];

  const hasActiveFilters = 
    filters?.pestType !== 'all' || 
    filters?.severity !== 'all' || 
    filters?.distance !== 'all' ||
    filters?.timeWindow !== '24';

  return (
    <div className={`bg-card border border-border rounded-xl shadow-sm ${className}`}>
      {/* Filter Header */}
      <div className="p-4 border-b border-border">
        <div className="flex items-center justify-between">
          <div className="flex items-center space-x-3">
            <div className="flex items-center space-x-2">
              <Icon name="Filter" size={20} className="text-muted-foreground" />
              <span className="text-lg font-bold text-foreground">Filter</span>
            </div>
            
            {hasActiveFilters && (
              <div className="w-2 h-2 bg-primary rounded-full" />
            )}
          </div>

          <div className="flex items-center space-x-2">
            {hasActiveFilters && (
              <Button
                variant="ghost"
                size="sm"
                onClick={onClearFilters}
                className="text-primary hover:text-primary/80 rounded-lg"
              >
                Reset
              </Button>
            )}
            
            <button
              onClick={() => setIsExpanded(!isExpanded)}
              className="p-2 rounded-lg hover:bg-muted transition-smooth"
            >
              <Icon 
                name={isExpanded ? "ChevronUp" : "ChevronDown"} 
                size={20} 
                className="text-muted-foreground" 
              />
            </button>
          </div>
        </div>
        
        {/* Results count */}
        <div className="flex items-center space-x-2 mt-2">
          <div className="text-sm text-muted-foreground">
            Menampilkan <span className="font-bold text-foreground">{alertCount}</span> peringatan
          </div>
          
          {hasActiveFilters && (
            <div className="flex items-center space-x-1">
              <div className="w-1 h-1 bg-muted-foreground rounded-full" />
              <span className="text-xs text-primary font-medium">Filter aktif</span>
            </div>
          )}
        </div>
      </div>
      
      {/* Filter Controls */}
      {isExpanded && (
        <div className="p-4 space-y-6">
          <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
            {/* Pest Type Filter */}
            <div>
              <label className="block text-sm font-bold text-foreground mb-2">
                Jenis Hama
              </label>
              <Select
                value={filters?.pestType}
                onChange={(value) => onFilterChange('pestType', value)}
                options={pestTypeOptions}
                className="w-full rounded-xl"
              />
            </div>

            {/* Severity Filter */}
            <div>
              <label className="block text-sm font-bold text-foreground mb-2">
                Tingkat Bahaya
              </label>
              <Select
                value={filters?.severity}
                onChange={(value) => onFilterChange('severity', value)}
                options={severityOptions}
                className="w-full rounded-xl"
              />
            </div>

            {/* Distance Filter */}
            <div>
              <label className="block text-sm font-bold text-foreground mb-2">
                Jarak
              </label>
              <Select
                value={filters?.distance}
                onChange={(value) => onFilterChange('distance', value)}
                options={distanceOptions}
                className="w-full rounded-xl"
              />
            </div>

            {/* Time Window Filter */}
            <div>
              <label className="block text-sm font-bold text-foreground mb-2">
                Periode Waktu
              </label>
              <Select
                value={filters?.timeWindow}
                onChange={(value) => onFilterChange('timeWindow', value)}
                options={timeOptions}
                className="w-full rounded-xl"
              />
            </div>
          </div>

          {/* Quick Filter Pills */}
          <div className="pt-4 border-t border-border">
            <div className="text-sm font-bold text-foreground mb-3">
              Filter Cepat
            </div>
            
            <div className="flex flex-wrap gap-3">
              <button
                onClick={() => {
                  onFilterChange('severity', 'tinggi');
                  onFilterChange('distance', '5');
                }}
                className="px-4 py-2 text-sm font-bold bg-error/10 text-error border border-error/20 rounded-xl hover:bg-error/20 transition-smooth"
              >
                üö® Darurat Terdekat
              </button>
              
              <button
                onClick={() => {
                  onFilterChange('timeWindow', '6');
                  onFilterChange('distance', '10');
                }}
                className="px-4 py-2 text-sm font-bold bg-warning/10 text-warning border border-warning/20 rounded-xl hover:bg-warning/20 transition-smooth"
              >
                ‚è∞ Baru Dilaporkan
              </button>
              
              <button
                onClick={() => {
                  onFilterChange('distance', '1');
                }}
                className="px-4 py-2 text-sm font-bold bg-primary/10 text-primary border border-primary/20 rounded-xl hover:bg-primary/20 transition-smooth"
              >
                üìç Sekitar Saya
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default AlertFilters;


--- File: ./src/pages/community-alerts/components/ReportPestModal.jsx ---

import React, { useState } from 'react';
import Icon from '../../../components/AppIcon';
import Button from '../../../components/ui/Button';
import Input from '../../../components/ui/Input';

const ReportPestModal = ({ isOpen, onClose, onSubmit, className = '' }) => {
  const [formData, setFormData] = useState({
    pestType: '',
    severity: 'sedang',
    affectedCrops: '',
    description: '',
    affectedArea: '',
    pestCount: '',
    timeWindow: '24',
    location: '',
    coordinates: null,
    photo: null
  });
  
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [photoPreview, setPhotoPreview] = useState(null);
  const [locationStatus, setLocationStatus] = useState('idle'); // idle, loading, success, error

  const pestTypes = [
    { value: 'wereng', label: 'Wereng' },
    { value: 'ulat', label: 'Ulat' },
    { value: 'kutu', label: 'Kutu Daun' },
    { value: 'trips', label: 'Trips' },
    { value: 'penggerek', label: 'Penggerek Batang' },
    { value: 'lainnya', label: 'Lainnya' }
  ];

  const severityLevels = [
    { value: 'rendah', label: 'Rendah - Sedikit kerusakan' },
    { value: 'sedang', label: 'Sedang - Kerusakan terlihat' },
    { value: 'tinggi', label: 'Tinggi - Kerusakan parah' }
  ];

  const handleInputChange = (field, value) => {
    setFormData(prev => ({
      ...prev,
      [field]: value
    }));
  };

  const handlePhotoUpload = (e) => {
    const file = e?.target?.files?.[0];
    if (file) {
      setFormData(prev => ({ ...prev, photo: file }));
      
      const reader = new FileReader();
      reader.onload = (e) => {
        setPhotoPreview(e?.target?.result);
      };
      reader?.readAsDataURL(file);
    }
  };

  const getCurrentLocation = () => {
    setLocationStatus('loading');
    
    if (navigator.geolocation) {
      navigator.geolocation?.getCurrentPosition(
        (position) => {
          const coords = {
            lat: position?.coords?.latitude,
            lng: position?.coords?.longitude
          };
          
          setFormData(prev => ({
            ...prev,
            coordinates: coords,
            location: `${coords?.lat?.toFixed(6)}, ${coords?.lng?.toFixed(6)}`
          }));
          setLocationStatus('success');
        },
        (error) => {
          console.error('Error getting location:', error);
          setLocationStatus('error');
          // Set mock coordinates for demo
          const mockCoords = { lat: -10.1772, lng: 123.6070 }; // Kupang coordinates
          setFormData(prev => ({
            ...prev,
            coordinates: mockCoords,
            location: `${mockCoords?.lat?.toFixed(6)}, ${mockCoords?.lng?.toFixed(6)}`
          }));
        }
      );
    } else {
      setLocationStatus('error');
      // Set mock coordinates for demo
      const mockCoords = { lat: -10.1772, lng: 123.6070 };
      setFormData(prev => ({
        ...prev,
        coordinates: mockCoords,
        location: `${mockCoords?.lat?.toFixed(6)}, ${mockCoords?.lng?.toFixed(6)}`
      }));
    }
  };

  const handleSubmit = async (e) => {
    e?.preventDefault();
    setIsSubmitting(true);

    try {
      // Simulate API call
      await new Promise(resolve => setTimeout(resolve, 2000));
      
      const reportData = {
        ...formData,
        id: Date.now()?.toString(),
        timestamp: new Date()?.toISOString(),
        reporterLocation: 'Kelurahan Oebobo, Kupang',
        distance: Math.random() * 5, // Mock distance
        hasPhoto: !!formData?.photo
      };

      onSubmit(reportData);
      
      // Reset form
      setFormData({
        pestType: '',
        severity: 'sedang',
        affectedCrops: '',
        description: '',
        affectedArea: '',
        pestCount: '',
        timeWindow: '24',
        location: '',
        coordinates: null,
        photo: null
      });
      setPhotoPreview(null);
      setLocationStatus('idle');
      
      onClose();
    } catch (error) {
      console.error('Error submitting report:', error);
    } finally {
      setIsSubmitting(false);
    }
  };

  if (!isOpen) return null;

  return (
    <>
      {/* Backdrop */}
      <div 
        className="fixed inset-0 bg-black/50 z-300 transition-smooth"
        onClick={onClose}
      />
      {/* Modal */}
      <div className={`
        fixed inset-0 z-300 overflow-y-auto
        flex items-center justify-center p-4
        ${className}
      `}>
        <div className="bg-card rounded-lg border border-border w-full max-w-2xl max-h-[90vh] overflow-y-auto">
          {/* Header */}
          <div className="flex items-center justify-between p-6 border-b border-border">
            <div className="flex items-center space-x-2">
              <Icon name="AlertTriangle" size={24} className="text-warning" />
              <h2 className="text-xl font-semibold text-foreground">
                Laporkan Hama
              </h2>
            </div>
            <Button
              variant="ghost"
              size="icon"
              iconName="X"
              onClick={onClose}
            />
          </div>

          {/* Form */}
          <form onSubmit={handleSubmit} className="p-6 space-y-6">
            {/* Pest Type */}
            <div>
              <label className="block text-sm font-medium text-foreground mb-2">
                Jenis Hama *
              </label>
              <select
                value={formData?.pestType}
                onChange={(e) => handleInputChange('pestType', e?.target?.value)}
                required
                className="w-full px-3 py-2 bg-input border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-ring"
              >
                <option value="">Pilih jenis hama</option>
                {pestTypes?.map((type) => (
                  <option key={type?.value} value={type?.value}>
                    {type?.label}
                  </option>
                ))}
              </select>
            </div>

            {/* Severity */}
            <div>
              <label className="block text-sm font-medium text-foreground mb-2">
                Tingkat Bahaya *
              </label>
              <select
                value={formData?.severity}
                onChange={(e) => handleInputChange('severity', e?.target?.value)}
                required
                className="w-full px-3 py-2 bg-input border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-ring"
              >
                {severityLevels?.map((level) => (
                  <option key={level?.value} value={level?.value}>
                    {level?.label}
                  </option>
                ))}
              </select>
            </div>

            {/* Affected Crops */}
            <Input
              label="Tanaman yang Terserang *"
              type="text"
              placeholder="Contoh: Padi, Jagung, Kacang"
              value={formData?.affectedCrops}
              onChange={(e) => handleInputChange('affectedCrops', e?.target?.value)}
              required
            />

            {/* Description */}
            <div>
              <label className="block text-sm font-medium text-foreground mb-2">
                Deskripsi Kerusakan *
              </label>
              <textarea
                value={formData?.description}
                onChange={(e) => handleInputChange('description', e?.target?.value)}
                placeholder="Jelaskan kerusakan yang terlihat pada tanaman..."
                required
                rows={4}
                className="w-full px-3 py-2 bg-input border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-ring resize-none"
              />
            </div>

            {/* Area and Count */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <Input
                label="Luas Area Terserang"
                type="text"
                placeholder="Contoh: 0.5 hektar"
                value={formData?.affectedArea}
                onChange={(e) => handleInputChange('affectedArea', e?.target?.value)}
              />
              
              <Input
                label="Perkiraan Jumlah Hama"
                type="text"
                placeholder="Contoh: Banyak, Sedikit"
                value={formData?.pestCount}
                onChange={(e) => handleInputChange('pestCount', e?.target?.value)}
              />
            </div>

            {/* Location */}
            <div>
              <label className="block text-sm font-medium text-foreground mb-2">
                Lokasi
              </label>
              <div className="flex space-x-2">
                <Input
                  type="text"
                  placeholder="Koordinat akan terisi otomatis"
                  value={formData?.location}
                  onChange={(e) => handleInputChange('location', e?.target?.value)}
                  className="flex-1"
                />
                <Button
                  type="button"
                  variant="outline"
                  iconName={locationStatus === 'loading' ? 'Loader2' : 'MapPin'}
                  onClick={getCurrentLocation}
                  disabled={locationStatus === 'loading'}
                  className={locationStatus === 'loading' ? 'animate-spin' : ''}
                >
                  {locationStatus === 'loading' ? 'Mencari...' : 'GPS'}
                </Button>
              </div>
              {locationStatus === 'success' && (
                <p className="text-xs text-success mt-1">Lokasi berhasil didapat</p>
              )}
            </div>

            {/* Photo Upload */}
            <div>
              <label className="block text-sm font-medium text-foreground mb-2">
                Foto Kerusakan
              </label>
              <div className="space-y-3">
                <input
                  type="file"
                  accept="image/*"
                  onChange={handlePhotoUpload}
                  className="w-full px-3 py-2 bg-input border border-border rounded-md file:mr-4 file:py-1 file:px-3 file:rounded-md file:border-0 file:text-sm file:bg-primary file:text-primary-foreground hover:file:bg-primary/90"
                />
                
                {photoPreview && (
                  <div className="relative w-full h-48 bg-muted rounded-md overflow-hidden">
                    <img
                      src={photoPreview}
                      alt="Preview foto hama"
                      className="w-full h-full object-cover"
                    />
                    <button
                      type="button"
                      onClick={() => {
                        setPhotoPreview(null);
                        setFormData(prev => ({ ...prev, photo: null }));
                      }}
                      className="absolute top-2 right-2 bg-error text-error-foreground rounded-full p-1 hover:bg-error/90"
                    >
                      <Icon name="X" size={16} />
                    </button>
                  </div>
                )}
              </div>
            </div>

            {/* Submit Buttons */}
            <div className="flex space-x-3 pt-4">
              <Button
                type="button"
                variant="outline"
                fullWidth
                onClick={onClose}
                disabled={isSubmitting}
              >
                Batal
              </Button>
              <Button
                type="submit"
                variant="default"
                fullWidth
                loading={isSubmitting}
                iconName="Send"
                iconPosition="left"
              >
                {isSubmitting ? 'Mengirim...' : 'Kirim Laporan'}
              </Button>
            </div>
          </form>
        </div>
      </div>
    </>
  );
};

export default ReportPestModal;


--- File: ./src/pages/community-alerts/index.jsx ---

import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import Icon from '../../components/AppIcon';
import Button from '../../components/ui/Button';
import BottomNavigation from '../../components/ui/BottomNavigation';
import LoadingOverlay from '../../components/ui/LoadingOverlay';
import OfflineStatusBanner from '../../components/ui/OfflineStatusBanner';
import AlertCard from './components/AlertCard';
import AlertFilters from './components/AlertFilters';
import ReportPestModal from './components/ReportPestModal';
import AlertDetailModal from './components/AlertDetailModal';

const CommunityAlerts = () => {
  const navigate = useNavigate();
  
  // State management
  const [alerts, setAlerts] = useState([]);
  const [filteredAlerts, setFilteredAlerts] = useState([]);
  const [filters, setFilters] = useState({
    pestType: 'all',
    severity: 'all',
    distance: 'all',
    timeWindow: '24'
  });
  const [isLoading, setIsLoading] = useState(true);
  const [isReportModalOpen, setIsReportModalOpen] = useState(false);
  const [selectedAlert, setSelectedAlert] = useState(null);
  const [isOnline, setIsOnline] = useState(navigator.onLine);
  const [pendingSyncCount, setPendingSyncCount] = useState(0);

  // Mock data for community alerts
  const mockAlerts = [
    {
      id: '1',
      pestType: 'Wereng Coklat',
      severity: 'tinggi',
      description: `Serangan wereng coklat terdeteksi pada tanaman padi di area persawahan. Populasi hama cukup tinggi dengan kerusakan daun menguning dan layu.\n\nTanaman mulai menunjukkan gejala hopperburn dengan ujung daun mengering. Perlu tindakan segera untuk mencegah penyebaran ke area lain.`,
      affectedCrops: ['Padi', 'Jagung'],
      reporterLocation: 'Kelurahan Oebobo',
      timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000), // 2 hours ago
      distance: 1.2,
      hasPhoto: true,
      affectedArea: '2 hektar',
      pestCount: 'Populasi tinggi'
    },
    {
      id: '2',
      pestType: 'Ulat Grayak',
      severity: 'sedang',
      description: `Ditemukan ulat grayak pada tanaman jagung muda. Kerusakan masih terbatas pada beberapa tanaman di pinggir lahan.\n\nUlat berukuran 2-3 cm dengan warna hijau kecoklatan. Daun berlubang-lubang kecil dan beberapa batang muda terpotong.`,
      affectedCrops: ['Jagung', 'Kacang Tanah'],
      reporterLocation: 'Kelurahan Fatululi',
      timestamp: new Date(Date.now() - 5 * 60 * 60 * 1000), // 5 hours ago
      distance: 3.8,
      hasPhoto: true,
      affectedArea: '0.5 hektar',
      pestCount: 'Populasi sedang'
    },
    {
      id: '3',
      pestType: 'Kutu Daun',
      severity: 'baik',
      description: `Kutu daun hijau ditemukan pada tanaman cabai. Serangan masih ringan dan terlokalisir pada beberapa tanaman saja.\n\nDaun sedikit mengkerut dan terlihat embun madu pada permukaan daun. Belum ada kerusakan signifikan.`,
      affectedCrops: ['Cabai', 'Tomat'],
      reporterLocation: 'Kelurahan Kelapa Lima',
      timestamp: new Date(Date.now() - 8 * 60 * 60 * 1000), // 8 hours ago
      distance: 5.2,
      hasPhoto: false,
      affectedArea: '0.2 hektar',
      pestCount: 'Populasi rendah'
    },
    {
      id: '4',
      pestType: 'Trips',
      severity: 'sedang',
      description: `Trips terdeteksi pada tanaman bawang merah. Daun menunjukkan bercak-bercak perak dan mengering pada bagian ujung.\n\nHama berukuran sangat kecil berwarna kuning kecoklatan. Aktivitas meningkat pada cuaca panas dan kering.`,
      affectedCrops: ['Bawang Merah', 'Bawang Putih'],
      reporterLocation: 'Kelurahan Fontein',
      timestamp: new Date(Date.now() - 12 * 60 * 60 * 1000), // 12 hours ago
      distance: 7.5,
      hasPhoto: true,
      affectedArea: '1 hektar',
      pestCount: 'Populasi sedang'
    },
    {
      id: '5',
      pestType: 'Penggerek Batang',
      severity: 'tinggi',
      description: `Penggerek batang menyerang tanaman padi pada fase vegetatif. Terlihat lubang-lubang kecil pada batang dan daun pucuk layu.\n\nLarva berwarna putih kekuningan ditemukan di dalam batang. Beberapa tanaman sudah mati dan roboh.`,
      affectedCrops: ['Padi'],
      reporterLocation: 'Kelurahan Nunbaun Sabu',
      timestamp: new Date(Date.now() - 18 * 60 * 60 * 1000), // 18 hours ago
      distance: 2.1,
      hasPhoto: true,
      affectedArea: '1.5 hektar',
      pestCount: 'Populasi tinggi'
    },
    {
      id: '6',
      pestType: 'Kutu Putih',
      severity: 'baik',
      description: `Kutu putih ditemukan pada tanaman singkong. Serangan masih terbatas pada daun-daun tua di bagian bawah tanaman.\n\nTerlihat lapisan putih seperti kapas pada permukaan daun. Tanaman masih dalam kondisi relatif sehat.`,
      affectedCrops: ['Singkong', 'Ubi Jalar'],
      reporterLocation: 'Kelurahan Penfui',
      timestamp: new Date(Date.now() - 20 * 60 * 60 * 1000), // 20 hours ago
      distance: 4.3,
      hasPhoto: false,
      affectedArea: '0.3 hektar',
      pestCount: 'Populasi rendah'
    }
  ];

  // Initialize data
  useEffect(() => {
    const loadAlerts = async () => {
      setIsLoading(true);
      
      // Simulate API call
      await new Promise(resolve => setTimeout(resolve, 1500));
      
      setAlerts(mockAlerts);
      setFilteredAlerts(mockAlerts);
      setIsLoading(false);
    };

    loadAlerts();
  }, []);

  // Online/offline status
  useEffect(() => {
    const handleOnline = () => setIsOnline(true);
    const handleOffline = () => setIsOnline(false);

    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);

    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, []);

  // Filter alerts based on current filters
  useEffect(() => {
    let filtered = [...alerts];

    // Filter by pest type
    if (filters?.pestType !== 'all') {
      filtered = filtered?.filter(alert => 
        alert?.pestType?.toLowerCase()?.includes(filters?.pestType?.toLowerCase())
      );
    }

    // Filter by severity - map 'rendah' to 'baik' for display
    if (filters?.severity !== 'all') {
      const targetSeverity = filters?.severity === 'rendah' ? 'baik' : filters?.severity;
      filtered = filtered?.filter(alert => alert?.severity === targetSeverity);
    }

    // Filter by distance
    if (filters?.distance !== 'all') {
      const maxDistance = parseFloat(filters?.distance);
      filtered = filtered?.filter(alert => alert?.distance <= maxDistance);
    }

    // Filter by time window
    const timeWindowHours = parseInt(filters?.timeWindow);
    const cutoffTime = new Date(Date.now() - timeWindowHours * 60 * 60 * 1000);
    filtered = filtered?.filter(alert => new Date(alert.timestamp) >= cutoffTime);

    setFilteredAlerts(filtered);
  }, [alerts, filters]);

  const handleFilterChange = (filterType, value) => {
    setFilters(prev => ({
      ...prev,
      [filterType]: value
    }));
  };

  const handleClearFilters = () => {
    setFilters({
      pestType: 'all',
      severity: 'all',
      distance: 'all',
      timeWindow: '24'
    });
  };

  const handleViewAlertDetails = (alert) => {
    setSelectedAlert(alert);
  };

  const handleSubmitReport = (reportData) => {
    // Add new report to alerts list
    const newAlert = {
      ...reportData,
      id: Date.now()?.toString(),
      timestamp: new Date(),
      reporterLocation: 'Lokasi Anda',
      distance: 0,
      hasPhoto: !!reportData?.photo
    };

    setAlerts(prev => [newAlert, ...prev]);
    
    // Show success message or navigate
    console.log('Report submitted:', newAlert);
  };

  const handleRetrySync = () => {
    // Simulate sync retry
    setPendingSyncCount(0);
  };

  if (isLoading) {
    return (
      <LoadingOverlay 
        isVisible={true} 
        message="Memuat peringatan komunitas..." 
        animationType="sync"
      />
    );
  }

  return (
    <div className="min-h-screen bg-background">
      {/* Mobile-first container with max width 420px */}
      <div className="max-w-md mx-auto bg-background min-h-screen">
        {/* Offline Status Banner */}
        <OfflineStatusBanner
          isOnline={isOnline}
          pendingSyncCount={pendingSyncCount}
          onRetrySync={handleRetrySync}
        />
        
        {/* Header with modern mobile design */}
        <div className="bg-card border-b border-border sticky top-0 z-50">
          <div className="px-4 py-4">
            <div className="flex items-center justify-between">
              <div className="flex items-center space-x-3">
                <button
                  onClick={() => navigate('/home-dashboard')}
                  className="p-2 rounded-xl hover:bg-muted transition-smooth"
                  aria-label="Kembali ke beranda"
                >
                  <Icon name="ArrowLeft" size={24} className="text-foreground" />
                </button>
                
                <div>
                  <h1 className="text-2xl font-bold text-foreground">
                    Komunitas
                  </h1>
                  <p className="text-sm text-muted-foreground">
                    Pantau hama di sekitar Anda
                  </p>
                </div>
              </div>

              <Button
                variant="default"
                iconName="Plus"
                iconPosition="left"
                onClick={() => setIsReportModalOpen(true)}
                className="shrink-0 rounded-xl"
              >
                Laporkan
              </Button>
            </div>
          </div>
        </div>
        
        {/* Main Content */}
        <div className="px-4 py-6 pb-24 space-y-6">
          {/* Alert Summary Card with modern design */}
          <div className="bg-card border border-border rounded-xl p-6 shadow-lg">
            <div className="flex items-center justify-between">
              <div className="flex items-center space-x-4">
                <div className="w-16 h-16 bg-warning/10 rounded-xl flex items-center justify-center">
                  <Icon name="AlertTriangle" size={32} className="text-warning" />
                </div>
                
                <div>
                  <h3 className="text-xl font-bold text-foreground">
                    {filteredAlerts?.length} Peringatan
                  </h3>
                  <p className="text-sm text-muted-foreground">
                    Dalam radius 25km
                  </p>
                </div>
              </div>
              
              <div className="text-right">
                <div className="text-3xl font-bold text-error">
                  {filteredAlerts?.filter(a => a?.severity === 'tinggi')?.length}
                </div>
                <div className="text-xs text-error font-medium">Tingkat Tinggi</div>
              </div>
            </div>
          </div>

          {/* Filters with collapsible design */}
          <AlertFilters
            filters={filters}
            onFilterChange={handleFilterChange}
            alertCount={filteredAlerts?.length}
            onClearFilters={handleClearFilters}
          />

          {/* Quick Actions */}
          <div className="grid grid-cols-2 gap-3">
            <Button
              variant="outline"
              fullWidth
              iconName="Camera"
              iconPosition="left"
              onClick={() => navigate('/photo-diagnosis')}
              className="justify-start rounded-xl h-14 text-base"
            >
              Diagnosis Foto
            </Button>
            
            <Button
              variant="outline"
              fullWidth
              iconName="Calendar"
              iconPosition="left"
              onClick={() => navigate('/farming-calendar')}
              className="justify-start rounded-xl h-14 text-base"
            >
              Kalender Tanam
            </Button>
          </div>

          {/* Alerts List */}
          <div className="space-y-4">
            <div className="flex items-center justify-between">
              <h3 className="text-xl font-bold text-foreground">
                Peringatan Terbaru
              </h3>
              
              {filteredAlerts?.length > 0 && (
                <div className="text-sm text-muted-foreground">
                  Diurutkan berdasarkan jarak
                </div>
              )}
            </div>

            {filteredAlerts?.length === 0 ? (
              <div className="text-center py-16">
                <div className="w-20 h-20 bg-muted rounded-xl flex items-center justify-center mx-auto mb-4">
                  <Icon name="Search" size={40} className="text-muted-foreground" />
                </div>
                <h3 className="text-xl font-bold text-foreground mb-2">
                  Tidak ada peringatan
                </h3>
                <p className="text-muted-foreground mb-6">
                  Coba ubah filter atau laporkan hama baru
                </p>
                <Button
                  variant="outline"
                  iconName="Plus"
                  iconPosition="left"
                  onClick={() => setIsReportModalOpen(true)}
                  className="rounded-xl"
                >
                  Buat Laporan Baru
                </Button>
              </div>
            ) : (
              <div className="space-y-4">
                {filteredAlerts?.map((alert) => (
                  <AlertCard
                    key={alert?.id}
                    alert={alert}
                    onViewDetails={handleViewAlertDetails}
                  />
                ))}
              </div>
            )}
          </div>

          {/* Emergency Contact */}
          <div className="bg-error/10 border border-error/20 rounded-xl p-6">
            <div className="flex items-start space-x-4">
              <div className="w-12 h-12 bg-error/20 rounded-xl flex items-center justify-center flex-shrink-0">
                <Icon name="Phone" size={24} className="text-error" />
              </div>
              <div className="flex-1">
                <h4 className="text-lg font-bold text-error mb-2">
                  Kontak Darurat Pertanian
                </h4>
                <p className="text-sm text-muted-foreground mb-4">
                  Hubungi Dinas Pertanian Kota Kupang untuk bantuan segera
                </p>
                <Button
                  variant="outline"
                  size="sm"
                  iconName="Phone"
                  iconPosition="left"
                  className="border-error text-error hover:bg-error hover:text-error-foreground rounded-xl"
                >
                  (0380) 881234
                </Button>
              </div>
            </div>
          </div>
        </div>
        
        {/* Modals */}
        <ReportPestModal
          isOpen={isReportModalOpen}
          onClose={() => setIsReportModalOpen(false)}
          onSubmit={handleSubmitReport}
        />
        <AlertDetailModal
          alert={selectedAlert}
          isOpen={!!selectedAlert}
          onClose={() => setSelectedAlert(null)}
        />
        
        {/* Bottom Navigation */}
        <BottomNavigation />
      </div>
    </div>
  );
};

export default CommunityAlerts;


--- File: ./src/pages/diagnosis-results/components/ActionButtons.jsx ---

import React from 'react';
import { useNavigate } from 'react-router-dom';
import Button from '../../../components/ui/Button';

const ActionButtons = ({ onShare, onSaveAllPlans, hasRecommendations }) => {
  const navigate = useNavigate();

  return (
    <div className="bg-card border-t border-border p-4 space-y-3">
      {/* Primary Actions */}
      <div className="flex flex-col gap-3">
        <Button
          variant="outline"
          fullWidth
          iconName="Share"
          iconPosition="left"
          onClick={onShare}
        >
          Bagikan Hasil
        </Button>
        
        {hasRecommendations && (
          <Button
            variant="default"
            fullWidth
            iconName="Save"
            iconPosition="left"
            onClick={onSaveAllPlans}
          >
            Simpan Semua
          </Button>
        )}
      </div>
      
      {/* Navigation Actions */}
      <div className="grid grid-cols-2 gap-3">
        <Button
          variant="secondary"
          fullWidth
          iconName="Camera"
          iconPosition="left"
          onClick={() => navigate('/photo-diagnosis')}
        >
          Diagnosis Lagi
        </Button>
        
        <Button
          variant="secondary"
          fullWidth
          iconName="Calendar"
          iconPosition="left"
          onClick={() => navigate('/farming-calendar')}
        >
          Lihat Kalender
        </Button>
      </div>
      
      {/* Community Action */}
      <Button
        variant="ghost"
        fullWidth
        iconName="Users"
        iconPosition="left"
        onClick={() => navigate('/community-alerts')}
        className="text-muted-foreground"
      >
        Cek Peringatan Komunitas
      </Button>
    </div>
  );
};

export default ActionButtons;


--- File: ./src/pages/diagnosis-results/components/CropImageDisplay.jsx ---

import React from 'react';
import Image from '../../../components/AppImage';
import Icon from '../../../components/AppIcon';

const CropImageDisplay = ({ imageUrl, cropType, timestamp, location }) => {
  return (
    <div className="bg-card rounded-lg border border-border overflow-hidden shadow-agricultural">
      <div className="relative">
        <Image
          src={imageUrl}
          alt="Foto tanaman yang dianalisis"
          className="w-full h-64 object-cover"
        />
        <div className="absolute top-3 right-3 bg-black/60 backdrop-blur-sm rounded-lg px-2 py-1">
          <span className="text-white text-xs font-medium">
            {cropType}
          </span>
        </div>
      </div>
      <div className="p-4 bg-muted/30">
        <div className="flex items-center justify-between text-sm text-muted-foreground">
          <div className="flex items-center space-x-2">
            <Icon name="Calendar" size={16} />
            <span>{new Date(timestamp)?.toLocaleDateString('id-ID', {
              day: 'numeric',
              month: 'long',
              year: 'numeric',
              hour: '2-digit',
              minute: '2-digit'
            })}</span>
          </div>
          
          {location && (
            <div className="flex items-center space-x-2">
              <Icon name="MapPin" size={16} />
              <span className="truncate max-w-32">
                {location?.address || `${location?.lat?.toFixed(4)}, ${location?.lng?.toFixed(4)}`}
              </span>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

export default CropImageDisplay;


--- File: ./src/pages/diagnosis-results/components/DiagnosisCard.jsx ---

import React from 'react';
import Icon from '../../../components/AppIcon';

const DiagnosisCard = ({ diagnosis }) => {
  const getSeverityColor = (severity) => {
    switch (severity?.toLowerCase()) {
      case 'ringan':
        return 'text-success bg-success/10 border-success/20';
      case 'sedang':
        return 'text-warning bg-warning/10 border-warning/20';
      case 'berat':
        return 'text-error bg-error/10 border-error/20';
      default:
        return 'text-muted-foreground bg-muted/10 border-border';
    }
  };

  const getConfidenceColor = (confidence) => {
    if (confidence >= 80) return 'text-success';
    if (confidence >= 60) return 'text-warning';
    return 'text-error';
  };

  return (
    <div className="bg-card rounded-lg border border-border p-6 shadow-agricultural">
      <div className="flex items-start justify-between mb-4">
        <div className="flex-1">
          <h3 className="text-lg font-semibold text-foreground mb-2">
            {diagnosis?.label}
          </h3>
          <p className="text-sm text-muted-foreground leading-relaxed">
            {diagnosis?.description}
          </p>
        </div>
        
        <div className="ml-4 text-right">
          <div className={`text-2xl font-bold ${getConfidenceColor(diagnosis?.confidence)}`}>
            {diagnosis?.confidence}%
          </div>
          <p className="text-xs text-muted-foreground">Akurasi</p>
        </div>
      </div>
      <div className="flex items-center justify-between">
        <div className={`
          inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border
          ${getSeverityColor(diagnosis?.severity)}
        `}>
          <Icon 
            name={diagnosis?.severity === 'berat' ? 'AlertTriangle' : 
                  diagnosis?.severity === 'sedang' ? 'AlertCircle' : 'CheckCircle'} 
            size={16} 
            className="mr-2" 
          />
          Tingkat: {diagnosis?.severity}
        </div>
        
        <div className="flex items-center text-sm text-muted-foreground">
          <Icon name="Zap" size={16} className="mr-1" />
          AI Analysis
        </div>
      </div>
      {diagnosis?.affectedAreas && (
        <div className="mt-4 pt-4 border-t border-border">
          <h4 className="text-sm font-medium text-foreground mb-2">
            Area Terpengaruh
          </h4>
          <div className="flex flex-wrap gap-2">
            {diagnosis?.affectedAreas?.map((area, index) => (
              <span 
                key={index}
                className="inline-flex items-center px-2 py-1 bg-muted rounded-md text-xs text-muted-foreground"
              >
                {area}
              </span>
            ))}
          </div>
        </div>
      )}
    </div>
  );
};

export default DiagnosisCard;


--- File: ./src/pages/diagnosis-results/components/DiagnosisHeader.jsx ---

import React from 'react';
import { useNavigate } from 'react-router-dom';
import Icon from '../../../components/AppIcon';
import Button from '../../../components/ui/Button';

const DiagnosisHeader = ({ onShare }) => {
  const navigate = useNavigate();

  return (
     <div className="bg-card border-b border-border sticky top-0 z-50 shadow-md">
      <div className="flex items-center justify-between p-4">
        <div className="flex items-center space-x-3">
          <Button
            variant="ghost"
            size="icon"
            onClick={() => navigate(-1)}
            className="rounded-full"
          >
            <Icon name="ArrowLeft" size={20} />
          </Button>
          <div>
            <h1 className="text-2xl font-bold text-foreground">
              Hasil Diagnosis
            </h1>
            <p className="text-sm text-muted-foreground">
              Analisis AI Tanaman
            </p>
          </div>
        </div>
        
        <Button
          variant="outline"
          size="sm"
          iconName="Share"
          iconPosition="left"
          onClick={onShare}
          className="rounded-full"
        >
          Bagikan
        </Button>
      </div>
    </div>
  );
};

export default DiagnosisHeader;


--- File: ./src/pages/diagnosis-results/components/EnvironmentalFactors.jsx ---

import React from 'react';
import Icon from '../../../components/AppIcon';

const EnvironmentalFactors = ({ factors }) => {
  const getFactorIcon = (type) => {
    switch (type) {
      case 'temperature': return 'Thermometer';
      case 'humidity': return 'Droplets';
      case 'rainfall': return 'CloudRain';
      case 'soil_moisture': return 'Sprout';
      case 'sunlight': return 'Sun';
      default: return 'Info';
    }
  };

  const getFactorLabel = (type) => {
    switch (type) {
      case 'temperature': return 'Suhu';
      case 'humidity': return 'Kelembaban';
      case 'rainfall': return 'Curah Hujan';
      case 'soil_moisture': return 'Kelembaban Tanah';
      case 'sunlight': return 'Sinar Matahari';
      default: return type;
    }
  };

  const getFactorColor = (impact) => {
    switch (impact?.toLowerCase()) {
      case 'positive': return 'text-success bg-success/10';
      case 'negative': return 'text-error bg-error/10';
      case 'neutral': return 'text-muted-foreground bg-muted/10';
      default: return 'text-muted-foreground bg-muted/10';
    }
  };

  return (
    <div className="bg-card rounded-lg border border-border p-6 shadow-agricultural">
      <div className="flex items-center mb-4">
        <Icon name="CloudSun" size={20} className="text-primary mr-2" />
        <h3 className="text-lg font-semibold text-foreground">
          Faktor Lingkungan
        </h3>
      </div>
      <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
        {factors?.map((factor, index) => (
          <div 
            key={index}
            className={`
              p-4 rounded-lg border transition-smooth
              ${getFactorColor(factor?.impact)}
            `}
          >
            <div className="flex items-center justify-between mb-2">
              <div className="flex items-center space-x-2">
                <Icon name={getFactorIcon(factor?.type)} size={18} />
                <span className="font-medium text-sm">
                  {getFactorLabel(factor?.type)}
                </span>
              </div>
              <span className="text-lg font-semibold">
                {factor?.value}
              </span>
            </div>
            
            <p className="text-xs opacity-80 leading-relaxed">
              {factor?.description}
            </p>
            
            {factor?.recommendation && (
              <div className="mt-2 pt-2 border-t border-current/20">
                <p className="text-xs font-medium">
                  üí° {factor?.recommendation}
                </p>
              </div>
            )}
          </div>
        ))}
      </div>
      <div className="mt-4 p-3 bg-muted/50 rounded-lg">
        <div className="flex items-start space-x-2">
          <Icon name="Info" size={16} className="text-primary mt-0.5" />
          <p className="text-xs text-muted-foreground leading-relaxed">
            Data lingkungan membantu AI memahami kondisi yang mempengaruhi kesehatan tanaman Anda.
          </p>
        </div>
      </div>
    </div>
  );
};

export default EnvironmentalFactors;


--- File: ./src/pages/diagnosis-results/components/OfflineIndicator.jsx ---

import React from 'react';
import Icon from '../../../components/AppIcon';

const OfflineIndicator = ({ isOnline, hasPendingSync, lastSyncTime }) => {
  if (isOnline && !hasPendingSync) return null;

  return (
    <div className="bg-warning/10 border border-warning/20 rounded-lg p-4 mb-6">
      <div className="flex items-start space-x-3">
        <Icon 
          name={isOnline ? "CloudOff" : "WifiOff"} 
          size={20} 
          className="text-warning mt-0.5" 
        />
        <div className="flex-1">
          <h4 className="text-sm font-medium text-warning mb-1">
            {isOnline ? 'Menunggu Sinkronisasi' : 'Mode Offline'}
          </h4>
          <p className="text-xs text-warning/80 leading-relaxed">
            {isOnline 
              ? 'Hasil diagnosis telah disimpan secara lokal dan akan disinkronkan saat koneksi stabil.' :'Hasil diagnosis disimpan secara lokal. Data akan disinkronkan saat terhubung ke internet.'
            }
          </p>
          
          {lastSyncTime && (
            <p className="text-xs text-warning/60 mt-2">
              Sinkronisasi terakhir: {new Date(lastSyncTime)?.toLocaleString('id-ID')}
            </p>
          )}
        </div>
        
        <div className="flex items-center space-x-1">
          <div className={`
            w-2 h-2 rounded-full
            ${isOnline ? 'bg-success animate-pulse' : 'bg-warning'}
          `}></div>
          <span className="text-xs text-warning">
            {isOnline ? 'Online' : 'Offline'}
          </span>
        </div>
      </div>
    </div>
  );
};

export default OfflineIndicator;


--- File: ./src/pages/diagnosis-results/components/RecommendationCard.jsx ---

import React from 'react';
import Icon from '../../../components/AppIcon';
import Button from '../../../components/ui/Button';

const RecommendationCard = ({ recommendation, onSavePlan }) => {
  const getPriorityColor = (priority) => {
    switch (priority?.toLowerCase()) {
      case 'tinggi':
        return 'text-error bg-error/10 border-error/20';
      case 'sedang':
        return 'text-warning bg-warning/10 border-warning/20';
      case 'rendah':
        return 'text-success bg-success/10 border-success/20';
      default:
        return 'text-muted-foreground bg-muted/10 border-border';
    }
  };

  const getCostColor = (cost) => {
    switch (cost?.toLowerCase()) {
      case 'rendah':
        return 'text-success';
      case 'sedang':
        return 'text-warning';
      case 'tinggi':
        return 'text-error';
      default:
        return 'text-muted-foreground';
    }
  };

  return (
    <div className="bg-card rounded-lg border border-border p-6 shadow-agricultural">
      <div className="flex items-start justify-between mb-4">
        <div className="flex-1">
          <div className="flex items-center space-x-2 mb-2">
            <Icon name={recommendation?.icon || 'Lightbulb'} size={20} className="text-primary" />
            <h4 className="font-semibold text-foreground">
              {recommendation?.title}
            </h4>
          </div>
          
          <p className="text-sm text-muted-foreground leading-relaxed mb-3">
            {recommendation?.description}
          </p>
        </div>
        
        <div className={`
          inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ml-3
          ${getPriorityColor(recommendation?.priority)}
        `}>
          {recommendation?.priority}
        </div>
      </div>
      {/* Implementation Steps */}
      <div className="mb-4">
        <h5 className="text-sm font-medium text-foreground mb-2">
          Langkah Implementasi:
        </h5>
        <ol className="space-y-2">
          {recommendation?.steps?.map((step, index) => (
            <li key={index} className="flex items-start space-x-3">
              <span className="flex-shrink-0 w-6 h-6 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-xs font-medium">
                {index + 1}
              </span>
              <span className="text-sm text-muted-foreground leading-relaxed">
                {step}
              </span>
            </li>
          ))}
        </ol>
      </div>
      {/* Timing and Cost */}
      <div className="grid grid-cols-2 gap-4 mb-4">
        <div className="p-3 bg-muted/30 rounded-lg">
          <div className="flex items-center space-x-2 mb-1">
            <Icon name="Clock" size={16} className="text-muted-foreground" />
            <span className="text-xs font-medium text-muted-foreground">
              Waktu Terbaik
            </span>
          </div>
          <p className="text-sm font-medium text-foreground">
            {recommendation?.timing}
          </p>
        </div>
        
        <div className="p-3 bg-muted/30 rounded-lg">
          <div className="flex items-center space-x-2 mb-1">
            <Icon name="DollarSign" size={16} className="text-muted-foreground" />
            <span className="text-xs font-medium text-muted-foreground">
              Estimasi Biaya
            </span>
          </div>
          <p className={`text-sm font-medium ${getCostColor(recommendation?.cost)}`}>
            {recommendation?.costEstimate}
          </p>
        </div>
      </div>
      {/* Expected Outcome */}
      <div className="p-3 bg-success/5 border border-success/20 rounded-lg mb-4">
        <div className="flex items-start space-x-2">
          <Icon name="Target" size={16} className="text-success mt-0.5" />
          <div>
            <p className="text-xs font-medium text-success mb-1">
              Hasil yang Diharapkan:
            </p>
            <p className="text-sm text-success/80 leading-relaxed">
              {recommendation?.expectedOutcome}
            </p>
          </div>
        </div>
      </div>
      {/* Action Button */}
      <Button
        variant="outline"
        fullWidth
        iconName="BookmarkPlus"
        iconPosition="left"
        onClick={() => onSavePlan(recommendation)}
        className="border-primary text-primary hover:bg-primary hover:text-primary-foreground"
      >
        Simpan ke Rencana
      </Button>
    </div>
  );
};

export default RecommendationCard;


--- File: ./src/pages/diagnosis-results/index.jsx ---

import React, { useState, useEffect } from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import DiagnosisHeader from './components/DiagnosisHeader';
import CropImageDisplay from './components/CropImageDisplay';
import DiagnosisCard from './components/DiagnosisCard';
import EnvironmentalFactors from './components/EnvironmentalFactors';
import RecommendationCard from './components/RecommendationCard';
import ActionButtons from './components/ActionButtons';
import OfflineIndicator from './components/OfflineIndicator';
import ShareActionSheet from '../../components/ui/ShareActionSheet';
import LoadingOverlay from '../../components/ui/LoadingOverlay';
import BottomNavigation from '../../components/ui/BottomNavigation';

const DiagnosisResults = () => {
  const location = useLocation();
  const navigate = useNavigate();
  
  // State management
  const [isShareOpen, setIsShareOpen] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  const [isOnline, setIsOnline] = useState(navigator.onLine);
  const [hasPendingSync, setHasPendingSync] = useState(false);
  const [lastSyncTime, setLastSyncTime] = useState(null);

  // Mock diagnosis data - in real app this would come from location.state or API
  const mockDiagnosisData = {
    id: "diag_001",
    timestamp: new Date()?.toISOString(),
    image: {
      url: "https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=800&h=600&fit=crop",
      cropType: "Jagung",
      location: {
        lat: -10.1772,
        lng: 123.6070,
        address: "Kupang, NTT"
      }
    },
    diagnosis: {
      label: "Bercak Daun Jagung (Corn Leaf Blight)",
      description: `Penyakit yang disebabkan oleh jamur Exserohilum turcicum yang menyerang daun jagung. Gejala awal berupa bercak kecil berwarna coklat yang kemudian membesar dan memanjang mengikuti tulang daun.`,
      confidence: 87,
      severity: "sedang",
      affectedAreas: ["Daun bagian bawah", "Tulang daun", "Ujung daun"]
    },
    environmentalFactors: [
      {
        type: "temperature",
        value: "28¬∞C",
        impact: "neutral",
        description: "Suhu optimal untuk pertumbuhan jagung",
        recommendation: "Pertahankan kelembaban tanah untuk mengurangi stress panas"
      },
      {
        type: "humidity",
        value: "75%",
        impact: "negative",
        description: "Kelembaban tinggi mendukung perkembangan jamur",
        recommendation: "Tingkatkan sirkulasi udara dengan pengaturan jarak tanam"
      },
      {
        type: "rainfall",
        value: "15mm/hari",
        impact: "negative",
        description: "Curah hujan berlebih meningkatkan risiko penyakit jamur",
        recommendation: "Pastikan drainase lahan baik untuk mencegah genangan"
      },
      {
        type: "soil_moisture",
        value: "65%",
        impact: "positive",
        description: "Kelembaban tanah cukup untuk pertumbuhan",
        recommendation: "Monitor kelembaban agar tidak berlebihan"
      }
    ],
    recommendations: [
      {
        id: "rec_001",
        title: "Aplikasi Fungisida Sistemik",
        description: "Gunakan fungisida berbahan aktif propikonazol atau tebukonazol untuk mengendalikan jamur penyebab bercak daun.",
        icon: "Spray",
        priority: "tinggi",
        cost: "sedang",
        costEstimate: "Rp 150.000 - 200.000/ha",
        timing: "Pagi hari (06:00-09:00) atau sore hari (16:00-18:00)",
        steps: [
          "Siapkan fungisida sesuai dosis anjuran (2-3 ml/liter air)",
          "Tambahkan perekat perata untuk meningkatkan efektivitas",
          "Semprotkan merata pada seluruh bagian tanaman terutama daun",
          "Ulangi aplikasi setiap 7-10 hari hingga gejala berkurang"
        ],
        expectedOutcome: "Penyebaran penyakit terkendali dalam 2-3 minggu, daun baru tumbuh sehat"
      },
      {
        id: "rec_002",
        title: "Perbaikan Drainase Lahan",
        description: "Buat saluran drainase untuk mengurangi kelembaban berlebih yang mendukung perkembangan jamur.",
        icon: "Waves",
        priority: "sedang",
        cost: "rendah",
        costEstimate: "Rp 50.000 - 100.000/ha",
        timing: "Segera, terutama sebelum musim hujan",
        steps: [
          "Buat saluran drainase sedalam 30-40 cm di sekitar lahan",
          "Pastikan aliran air menuju ke tempat pembuangan yang tepat",
          "Bersihkan saluran dari gulma dan sampah secara rutin",
          "Buat bedengan dengan tinggi 20-30 cm untuk tanaman"
        ],
        expectedOutcome: "Kelembaban tanah terkontrol, risiko penyakit jamur berkurang 60-70%"
      },
      {
        id: "rec_003",
        title: "Pengaturan Jarak Tanam",
        description: "Atur ulang jarak tanam untuk meningkatkan sirkulasi udara dan mengurangi kelembaban di sekitar tanaman.",
        icon: "Grid3x3",
        priority: "rendah",
        cost: "rendah",
        costEstimate: "Tenaga kerja Rp 100.000/ha",
        timing: "Untuk penanaman selanjutnya",
        steps: [
          "Gunakan jarak tanam 75 x 25 cm atau 80 x 20 cm",
          "Buat barisan tanaman mengikuti arah angin dominan",
          "Pangkas daun bagian bawah yang sudah terserang",
          "Buang sisa tanaman yang sakit dari lahan"
        ],
        expectedOutcome: "Sirkulasi udara membaik, kelembaban mikro berkurang, tanaman lebih sehat"
      }
    ]
  };

  // Get data from navigation state or use mock data
  const diagnosisData = location?.state?.diagnosisData || mockDiagnosisData;

  // Network status monitoring
  useEffect(() => {
    const handleOnline = () => setIsOnline(true);
    const handleOffline = () => setIsOnline(false);

    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);

    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, []);

  // Check for pending sync data
  useEffect(() => {
    const checkPendingSync = () => {
      const pendingData = localStorage.getItem('pendingDiagnosisSync');
      setHasPendingSync(!!pendingData);
      
      const lastSync = localStorage.getItem('lastSyncTime');
      if (lastSync) {
        setLastSyncTime(lastSync);
      }
    };

    checkPendingSync();
  }, []);

  // Save diagnosis data locally
  useEffect(() => {
    const saveDiagnosisLocally = () => {
      try {
        const existingResults = JSON.parse(localStorage.getItem('diagnosisResults') || '[]');
        const updatedResults = [diagnosisData, ...existingResults?.slice(0, 9)]; // Keep last 10 results
        localStorage.setItem('diagnosisResults', JSON.stringify(updatedResults));
        
        if (!isOnline) {
          localStorage.setItem('pendingDiagnosisSync', JSON.stringify(diagnosisData));
          setHasPendingSync(true);
        }
      } catch (error) {
        console.error('Error saving diagnosis locally:', error);
      }
    };

    saveDiagnosisLocally();
  }, [diagnosisData, isOnline]);

  // Handle share functionality
  const handleShare = () => {
    const shareData = {
      title: `Diagnosis: ${diagnosisData?.diagnosis?.label}`,
      description: diagnosisData?.diagnosis?.description,
      results: [{
        name: diagnosisData?.diagnosis?.label,
        confidence: diagnosisData?.diagnosis?.confidence
      }],
      timestamp: diagnosisData?.timestamp
    };
    
    setIsShareOpen(true);
  };

  // Handle save individual plan
  const handleSavePlan = (recommendation) => {
    setIsLoading(true);
    
    try {
      const existingPlans = JSON.parse(localStorage.getItem('farmingPlans') || '[]');
      const newPlan = {
        id: `plan_${Date.now()}`,
        title: recommendation?.title,
        description: recommendation?.description,
        steps: recommendation?.steps,
        timing: recommendation?.timing,
        priority: recommendation?.priority,
        cost: recommendation?.costEstimate,
        source: 'diagnosis',
        diagnosisId: diagnosisData?.id,
        createdAt: new Date()?.toISOString(),
        status: 'pending'
      };
      
      const updatedPlans = [newPlan, ...existingPlans];
      localStorage.setItem('farmingPlans', JSON.stringify(updatedPlans));
      
      // Show success feedback
      setTimeout(() => {
        setIsLoading(false);
        // Could show a toast notification here
      }, 1000);
      
    } catch (error) {
      console.error('Error saving plan:', error);
      setIsLoading(false);
    }
  };

  // Handle save all plans
  const handleSaveAllPlans = () => {
    setIsLoading(true);
    
    try {
      const existingPlans = JSON.parse(localStorage.getItem('farmingPlans') || '[]');
      const newPlans = diagnosisData?.recommendations?.map(rec => ({
        id: `plan_${Date.now()}_${rec?.id}`,
        title: rec?.title,
        description: rec?.description,
        steps: rec?.steps,
        timing: rec?.timing,
        priority: rec?.priority,
        cost: rec?.costEstimate,
        source: 'diagnosis',
        diagnosisId: diagnosisData?.id,
        createdAt: new Date()?.toISOString(),
        status: 'pending'
      }));
      
      const updatedPlans = [...newPlans, ...existingPlans];
      localStorage.setItem('farmingPlans', JSON.stringify(updatedPlans));
      
      setTimeout(() => {
        setIsLoading(false);
        navigate('/farming-calendar', { 
          state: { 
            message: `${newPlans?.length} rencana berhasil disimpan ke kalender` 
          }
        });
      }, 1500);
      
    } catch (error) {
      console.error('Error saving all plans:', error);
      setIsLoading(false);
    }
  };

  // Redirect if no diagnosis data
  if (!diagnosisData) {
    navigate('/photo-diagnosis');
    return null;
  }

  return (
    <div className="min-h-screen bg-background">
      {/* Header */}
      <DiagnosisHeader onShare={handleShare} />
      {/* Main Content */}
      <div className="pb-20">
        <div className="p-4 space-y-6">
          {/* Offline Indicator */}
          <OfflineIndicator 
            isOnline={isOnline}
            hasPendingSync={hasPendingSync}
            lastSyncTime={lastSyncTime}
          />
          
          {/* Crop Image */}
          <CropImageDisplay 
            imageUrl={diagnosisData?.image?.url}
            cropType={diagnosisData?.image?.cropType}
            timestamp={diagnosisData?.timestamp}
            location={diagnosisData?.image?.location}
          />
          
          {/* Diagnosis Results */}
          <DiagnosisCard diagnosis={diagnosisData?.diagnosis} />
          
          {/* Environmental Factors */}
          <EnvironmentalFactors factors={diagnosisData?.environmentalFactors} />
          
          {/* Recommendations */}
          <div className="space-y-4">
            <div className="flex items-center justify-between">
              <h3 className="text-lg font-semibold text-foreground">
                Rekomendasi Tindakan
              </h3>
              <span className="text-sm text-muted-foreground">
                {diagnosisData?.recommendations?.length} rekomendasi
              </span>
            </div>
            
            {diagnosisData?.recommendations?.map((recommendation) => (
              <RecommendationCard
                key={recommendation?.id}
                recommendation={recommendation}
                onSavePlan={handleSavePlan}
              />
            ))}
          </div>
        </div>
        
        {/* Action Buttons */}
        <ActionButtons
          onShare={handleShare}
          onSaveAllPlans={handleSaveAllPlans}
          hasRecommendations={diagnosisData?.recommendations?.length > 0}
        />
      </div>
      {/* Share Action Sheet */}
      <ShareActionSheet
        isOpen={isShareOpen}
        onClose={() => setIsShareOpen(false)}
        shareData={{
          title: `Diagnosis: ${diagnosisData?.diagnosis?.label}`,
          description: diagnosisData?.diagnosis?.description,
          results: [{
            name: diagnosisData?.diagnosis?.label,
            confidence: diagnosisData?.diagnosis?.confidence
          }],
          timestamp: diagnosisData?.timestamp
        }}
      />
      {/* Loading Overlay */}
      <LoadingOverlay
        isVisible={isLoading}
        message="Menyimpan rencana..."
        animationType="plant"
      />
      {/* Bottom Navigation */}
      <BottomNavigation />
    </div>
  );
};

export default DiagnosisResults;


--- File: ./src/pages/farming-calendar/components/AddEventModal.jsx ---

import React, { useState } from 'react';
import Icon from '../../../components/AppIcon';
import Button from '../../../components/ui/Button';
import Input from '../../../components/ui/Input';
import Select from '../../../components/ui/Select';

const AddEventModal = ({ 
  isOpen, 
  onClose, 
  onAddEvent, 
  selectedDate 
}) => {
  const [formData, setFormData] = useState({
    title: '',
    type: '',
    crop: '',
    time: '08:00',
    location: '',
    notes: ''
  });

  const eventTypes = [
    { value: 'tanam', label: 'Penanaman' },
    { value: 'pupuk', label: 'Pemupukan' },
    { value: 'semprot', label: 'Penyemprotan' },
    { value: 'panen', label: 'Panen' }
  ];

  const cropOptions = [
    { value: 'jagung', label: 'Jagung' },
    { value: 'padi', label: 'Padi' },
    { value: 'kacang_tanah', label: 'Kacang Tanah' },
    { value: 'ubi_kayu', label: 'Ubi Kayu' },
    { value: 'kacang_hijau', label: 'Kacang Hijau' },
    { value: 'tomat', label: 'Tomat' },
    { value: 'cabai', label: 'Cabai' },
    { value: 'bawang_merah', label: 'Bawang Merah' }
  ];

  const handleInputChange = (field, value) => {
    setFormData(prev => ({
      ...prev,
      [field]: value
    }));
  };

  const handleSubmit = (e) => {
    e?.preventDefault();
    
    if (!formData?.title || !formData?.type || !formData?.crop) {
      return;
    }

    const newEvent = {
      id: Date.now()?.toString(),
      date: selectedDate?.toISOString()?.split('T')?.[0],
      title: formData?.title,
      type: formData?.type,
      crop: formData?.crop,
      time: formData?.time,
      location: formData?.location || 'Lahan Utama',
      completed: false,
      notes: formData?.notes ? [formData?.notes] : [],
      createdAt: new Date()?.toISOString()
    };

    onAddEvent(newEvent);
    
    // Reset form
    setFormData({
      title: '',
      type: '',
      crop: '',
      time: '08:00',
      location: '',
      notes: ''
    });
    
    onClose();
  };

  const formatDate = (date) => {
    return new Intl.DateTimeFormat('id-ID', {
      weekday: 'long',
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    })?.format(date);
  };

  if (!isOpen) return null;

  return (
    <>
      {/* Backdrop */}
      <div 
        className="fixed inset-0 bg-black/50 z-300 transition-smooth"
        onClick={onClose}
        aria-hidden="true"
      />
      {/* Modal */}
      <div className="fixed inset-0 z-300 flex items-center justify-center p-4">
        <div 
          className="bg-card rounded-lg border border-border w-full max-w-md max-h-[90vh] overflow-y-auto"
          role="dialog"
          aria-modal="true"
          aria-labelledby="add-event-title"
        >
          <div className="p-6">
            {/* Header */}
            <div className="flex items-center justify-between mb-6">
              <h3 
                id="add-event-title"
                className="text-lg font-semibold text-foreground"
              >
                Tambah Kegiatan Baru
              </h3>
              <button
                onClick={onClose}
                className="p-2 rounded-lg hover:bg-muted transition-smooth"
                aria-label="Tutup"
              >
                <Icon name="X" size={20} />
              </button>
            </div>

            {/* Selected Date */}
            <div className="bg-muted rounded-lg p-3 mb-6">
              <div className="flex items-center space-x-2 text-sm">
                <Icon name="Calendar" size={16} className="text-primary" />
                <span className="font-medium text-foreground">
                  {formatDate(selectedDate)}
                </span>
              </div>
            </div>

            {/* Form */}
            <form onSubmit={handleSubmit} className="space-y-4">
              <Input
                label="Judul Kegiatan"
                type="text"
                placeholder="Contoh: Penanaman jagung varietas lokal"
                value={formData?.title}
                onChange={(e) => handleInputChange('title', e?.target?.value)}
                required
              />

              <Select
                label="Jenis Kegiatan"
                placeholder="Pilih jenis kegiatan"
                options={eventTypes}
                value={formData?.type}
                onChange={(value) => handleInputChange('type', value)}
                required
              />

              <Select
                label="Jenis Tanaman"
                placeholder="Pilih jenis tanaman"
                options={cropOptions}
                value={formData?.crop}
                onChange={(value) => handleInputChange('crop', value)}
                required
              />

              <div className="grid grid-cols-2 gap-4">
                <Input
                  label="Waktu"
                  type="time"
                  value={formData?.time}
                  onChange={(e) => handleInputChange('time', e?.target?.value)}
                />

                <Input
                  label="Lokasi"
                  type="text"
                  placeholder="Lahan Utama"
                  value={formData?.location}
                  onChange={(e) => handleInputChange('location', e?.target?.value)}
                />
              </div>

              <Input
                label="Catatan (Opsional)"
                type="text"
                placeholder="Tambahkan catatan atau instruksi khusus"
                value={formData?.notes}
                onChange={(e) => handleInputChange('notes', e?.target?.value)}
              />

              {/* Action Buttons */}
              <div className="flex space-x-3 pt-4">
                <Button
                  type="button"
                  variant="outline"
                  fullWidth
                  onClick={onClose}
                >
                  Batal
                </Button>
                <Button
                  type="submit"
                  variant="default"
                  fullWidth
                  iconName="Plus"
                  iconPosition="left"
                  disabled={!formData?.title || !formData?.type || !formData?.crop}
                >
                  Tambah Kegiatan
                </Button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </>
  );
};

export default AddEventModal;


--- File: ./src/pages/farming-calendar/components/CalendarGrid.jsx ---

import React from 'react';
import Icon from '../../../components/AppIcon';

const CalendarGrid = ({ 
  currentDate, 
  viewMode, 
  events, 
  onDateClick, 
  selectedDate 
}) => {
  const getDaysInMonth = (date) => {
    const year = date?.getFullYear();
    const month = date?.getMonth();
    const firstDay = new Date(year, month, 1);
    const lastDay = new Date(year, month + 1, 0);
    const daysInMonth = lastDay?.getDate();
    const startingDayOfWeek = firstDay?.getDay();
    
    const days = [];
    
    // Add empty cells for days before the first day of the month
    for (let i = 0; i < startingDayOfWeek; i++) {
      days?.push(null);
    }
    
    // Add days of the month
    for (let day = 1; day <= daysInMonth; day++) {
      days?.push(new Date(year, month, day));
    }
    
    return days;
  };

  const getEventsForDate = (date) => {
    if (!date) return [];
    const dateStr = date?.toISOString()?.split('T')?.[0];
    return events?.filter(event => event?.date === dateStr);
  };

  const getEventTypeIcon = (type) => {
    const iconMap = {
      tanam: 'Sprout',
      pupuk: 'Droplets',
      semprot: 'Spray',
      panen: 'Wheat'
    };
    return iconMap?.[type] || 'Calendar';
  };

  const getEventTypeColor = (type) => {
    const colorMap = {
      tanam: 'text-success bg-success/10',
      pupuk: 'text-secondary bg-secondary/10',
      semprot: 'text-warning bg-warning/10',
      panen: 'text-accent bg-accent/10'
    };
    return colorMap?.[type] || 'text-muted-foreground bg-muted';
  };

  const isToday = (date) => {
    if (!date) return false;
    const today = new Date();
    return date?.toDateString() === today?.toDateString();
  };

  const isSelected = (date) => {
    if (!date || !selectedDate) return false;
    return date?.toDateString() === selectedDate?.toDateString();
  };

  if (viewMode === 'week') {
    // Week view implementation
    const weekDays = ['Min', 'Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab'];
    const startOfWeek = new Date(selectedDate || currentDate);
    startOfWeek?.setDate(startOfWeek?.getDate() - startOfWeek?.getDay());
    
    const weekDates = [];
    for (let i = 0; i < 7; i++) {
      const date = new Date(startOfWeek);
      date?.setDate(startOfWeek?.getDate() + i);
      weekDates?.push(date);
    }

    return (
      <div className="bg-card">
        <div className="grid grid-cols-7 border-b border-border">
          {weekDays?.map((day, index) => (
            <div key={day} className="p-3 text-center text-sm font-medium text-muted-foreground border-r border-border last:border-r-0">
              {day}
            </div>
          ))}
        </div>
        <div className="grid grid-cols-7 min-h-96">
          {weekDates?.map((date, index) => {
            const dayEvents = getEventsForDate(date);
            return (
              <div
                key={index}
                className={`
                  p-2 border-r border-b border-border last:border-r-0 cursor-pointer
                  hover:bg-muted/50 transition-smooth min-h-32
                  ${isToday(date) ? 'bg-primary/5' : ''}
                  ${isSelected(date) ? 'bg-primary/10' : ''}
                `}
                onClick={() => onDateClick(date)}
              >
                <div className={`
                  text-sm font-medium mb-2
                  ${isToday(date) ? 'text-primary' : 'text-foreground'}
                `}>
                  {date?.getDate()}
                </div>
                <div className="space-y-1">
                  {dayEvents?.slice(0, 3)?.map((event, eventIndex) => (
                    <div
                      key={eventIndex}
                      className={`
                        text-xs px-2 py-1 rounded-md flex items-center space-x-1
                        ${getEventTypeColor(event?.type)}
                      `}
                    >
                      <Icon name={getEventTypeIcon(event?.type)} size={12} />
                      <span className="truncate">{event?.title}</span>
                    </div>
                  ))}
                  {dayEvents?.length > 3 && (
                    <div className="text-xs text-muted-foreground">
                      +{dayEvents?.length - 3} lainnya
                    </div>
                  )}
                </div>
              </div>
            );
          })}
        </div>
      </div>
    );
  }

  // Month view
  const days = getDaysInMonth(currentDate);
  const weekDays = ['Min', 'Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab'];

  return (
    <div className="bg-card">
      <div className="grid grid-cols-7 border-b border-border">
        {weekDays?.map(day => (
          <div key={day} className="p-3 text-center text-sm font-medium text-muted-foreground border-r border-border last:border-r-0">
            {day}
          </div>
        ))}
      </div>
      <div className="grid grid-cols-7">
        {days?.map((date, index) => {
          const dayEvents = date ? getEventsForDate(date) : [];
          return (
            <div
              key={index}
              className={`
                min-h-24 p-2 border-r border-b border-border last:border-r-0
                ${date ? 'cursor-pointer hover:bg-muted/50' : 'bg-muted/20'}
                ${date && isToday(date) ? 'bg-primary/5' : ''}
                ${date && isSelected(date) ? 'bg-primary/10' : ''}
                transition-smooth
              `}
              onClick={() => date && onDateClick(date)}
            >
              {date && (
                <>
                  <div className={`
                    text-sm font-medium mb-1
                    ${isToday(date) ? 'text-primary' : 'text-foreground'}
                  `}>
                    {date?.getDate()}
                  </div>
                   {/* --- TAMBAHKAN KODE INI --- */}
      {dayEvents.length > 0 && (
        <div className="flex justify-center items-center mt-1">
          <div className="w-1.5 h-1.5 rounded-full bg-primary"></div>
        </div>
      )}
      {/* --- AKHIR DARI KODE TAMBAHAN --- */}
                  <div className="space-y-1">
                    {dayEvents?.slice(0, 2)?.map((event, eventIndex) => (
                      <div
                        key={eventIndex}
                        className={`
                          text-xs px-1 py-0.5 rounded flex items-center space-x-1
                          ${getEventTypeColor(event?.type)}
                        `}
                      >
                        <Icon name={getEventTypeIcon(event?.type)} size={10} />
                        <span className="truncate">{event?.title}</span>
                      </div>
                    ))}
                    {dayEvents?.length > 2 && (
                      <div className="text-xs text-muted-foreground">
                        +{dayEvents?.length - 2}
                      </div>
                    )}
                  </div>
                </>
              )}
            </div>
          );
        })}
      </div>
    </div>
  );
};

export default CalendarGrid;


--- File: ./src/pages/farming-calendar/components/CalendarHeader.jsx ---

import React from 'react';
import Icon from '../../../components/AppIcon';
import Button from '../../../components/ui/Button';

const CalendarHeader = ({ 
  currentDate, 
  viewMode, 
  onViewModeChange, 
  onPreviousMonth, 
  onNextMonth,
  onAddEvent 
}) => {
  const formatMonthYear = (date) => {
    return new Intl.DateTimeFormat('id-ID', { 
      month: 'long', 
      year: 'numeric' 
    })?.format(date);
  };

  return (
    <div className="bg-card border-b border-border p-4 shadow-md">
      <div className="flex items-center justify-between mb-4">
        <div className="flex items-center space-x-4">
          <button
            onClick={onPreviousMonth}
            className="p-2 rounded-lg hover:bg-muted transition-smooth"
            aria-label="Bulan sebelumnya"
          >
            <Icon name="ChevronLeft" size={20} />
          </button>
          
          <h2 className="text-2xl font-bold text-foreground">
            {formatMonthYear(currentDate)}
          </h2>
          
          <button
            onClick={onNextMonth}
            className="p-2 rounded-lg hover:bg-muted transition-smooth"
            aria-label="Bulan selanjutnya"
          >
            <Icon name="ChevronRight" size={20} />
          </button>
        </div>
        
        <Button
          variant="default"
          size="sm"
          iconName="Plus"
          iconPosition="left"
          onClick={onAddEvent}
        >
          Tambah Kegiatan
        </Button>
      </div>
      
      <div className="flex items-center space-x-2">
        <Button
          variant={viewMode === 'month' ? 'default' : 'outline'}
          size="sm"
          onClick={() => onViewModeChange('month')}
        >
          Bulanan
        </Button>
        <Button
          variant={viewMode === 'week' ? 'default' : 'outline'}
          size="sm"
          onClick={() => onViewModeChange('week')}
        >
          Mingguan
        </Button>
      </div>
    </div>
  );
};

export default CalendarHeader;


--- File: ./src/pages/farming-calendar/components/EventDetailsPanel.jsx ---

import React, { useState } from 'react';
import Icon from '../../../components/AppIcon';
import Button from '../../../components/ui/Button';
import Input from '../../../components/ui/Input';

const EventDetailsPanel = ({ 
  selectedDate, 
  events, 
  onAddNote, 
  onUpdateEvent, 
  onDeleteEvent 
}) => {
  const [newNote, setNewNote] = useState('');
  const [editingEvent, setEditingEvent] = useState(null);
  const [editTitle, setEditTitle] = useState('');

  if (!selectedDate) {
    return (
      <div className="bg-card border-l border-border p-6 flex items-center justify-center">
        <div className="text-center text-muted-foreground">
          <Icon name="Calendar" size={48} className="mx-auto mb-4 opacity-50" />
          <p>Pilih tanggal untuk melihat detail kegiatan</p>
        </div>
      </div>
    );
  }

  const dateStr = selectedDate?.toISOString()?.split('T')?.[0];
  const dayEvents = events?.filter(event => event?.date === dateStr);

  const formatDate = (date) => {
    return new Intl.DateTimeFormat('id-ID', {
      weekday: 'long',
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    })?.format(date);
  };

  const getEventTypeIcon = (type) => {
    const iconMap = {
      tanam: 'Sprout',
      pupuk: 'Droplets',
      semprot: 'Spray',
      panen: 'Wheat'
    };
    return iconMap?.[type] || 'Calendar';
  };

  const getEventTypeColor = (type) => {
    const colorMap = {
      tanam: 'text-success bg-success/10 border-success/20',
      pupuk: 'text-secondary bg-secondary/10 border-secondary/20',
      semprot: 'text-warning bg-warning/10 border-warning/20',
      panen: 'text-accent bg-accent/10 border-accent/20'
    };
    return colorMap?.[type] || 'text-muted-foreground bg-muted border-border';
  };

  const getEventTypeName = (type) => {
    const nameMap = {
      tanam: 'Penanaman',
      pupuk: 'Pemupukan',
      semprot: 'Penyemprotan',
      panen: 'Panen'
    };
    return nameMap?.[type] || type;
  };

  const handleAddNote = () => {
    if (newNote?.trim()) {
      onAddNote(dateStr, newNote?.trim());
      setNewNote('');
    }
  };

  const handleEditEvent = (event) => {
    setEditingEvent(event?.id);
    setEditTitle(event?.title);
  };

  const handleSaveEdit = (eventId) => {
    if (editTitle?.trim()) {
      onUpdateEvent(eventId, { title: editTitle?.trim() });
      setEditingEvent(null);
      setEditTitle('');
    }
  };

  const handleCancelEdit = () => {
    setEditingEvent(null);
    setEditTitle('');
  };

  return (
    <div className="bg-card border-l border-border p-6 overflow-y-auto">
      <div className="mb-6">
        <h3 className="text-lg font-semibold text-foreground mb-2">
          {formatDate(selectedDate)}
        </h3>
        <p className="text-sm text-muted-foreground">
          {dayEvents?.length} kegiatan terjadwal
        </p>
      </div>
      {/* Events List */}
      <div className="space-y-4 mb-6">
        {dayEvents?.length === 0 ? (
          <div className="text-center py-8 text-muted-foreground">
            <Icon name="CalendarX" size={32} className="mx-auto mb-2 opacity-50" />
            <p>Tidak ada kegiatan pada tanggal ini</p>
          </div>
        ) : (
          dayEvents?.map((event) => (
            <div
              key={event?.id}
              className={`
                p-4 rounded-lg border transition-smooth
                ${getEventTypeColor(event?.type)}
              `}
            >
              <div className="flex items-start justify-between mb-3">
                <div className="flex items-center space-x-3">
                  <Icon name={getEventTypeIcon(event?.type)} size={20} />
                  <div>
                    {editingEvent === event?.id ? (
                      <div className="flex items-center space-x-2">
                        <Input
                          type="text"
                          value={editTitle}
                          onChange={(e) => setEditTitle(e?.target?.value)}
                          className="text-sm"
                          placeholder="Judul kegiatan"
                        />
                        <Button
                          variant="ghost"
                          size="sm"
                          iconName="Check"
                          onClick={() => handleSaveEdit(event?.id)}
                        />
                        <Button
                          variant="ghost"
                          size="sm"
                          iconName="X"
                          onClick={handleCancelEdit}
                        />
                      </div>
                    ) : (
                      <>
                        <h4 className="font-medium">{event?.title}</h4>
                        <p className="text-xs opacity-80">
                          {getEventTypeName(event?.type)} ‚Ä¢ {event?.crop}
                        </p>
                      </>
                    )}
                  </div>
                </div>
                
                {editingEvent !== event?.id && (
                  <div className="flex items-center space-x-1">
                    <Button
                      variant="ghost"
                      size="sm"
                      iconName="Edit2"
                      onClick={() => handleEditEvent(event)}
                    />
                    <Button
                      variant="ghost"
                      size="sm"
                      iconName="Trash2"
                      onClick={() => onDeleteEvent(event?.id)}
                    />
                  </div>
                )}
              </div>

              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-4 text-xs">
                  <span className="flex items-center space-x-1">
                    <Icon name="Clock" size={12} />
                    <span>{event?.time}</span>
                  </span>
                  <span className="flex items-center space-x-1">
                    <Icon name="MapPin" size={12} />
                    <span>{event?.location}</span>
                  </span>
                </div>
                
                <div className={`
                  px-2 py-1 rounded-full text-xs font-medium
                  ${event?.completed 
                    ? 'bg-success text-success-foreground' 
                    : 'bg-muted text-muted-foreground'
                  }
                `}>
                  {event?.completed ? 'Selesai' : 'Belum'}
                </div>
              </div>

              {event?.notes && event?.notes?.length > 0 && (
                <div className="mt-3 pt-3 border-t border-current/10">
                  <p className="text-xs font-medium mb-2">Catatan:</p>
                  <div className="space-y-1">
                    {event?.notes?.map((note, index) => (
                      <p key={index} className="text-xs opacity-80">
                        ‚Ä¢ {note}
                      </p>
                    ))}
                  </div>
                </div>
              )}
            </div>
          ))
        )}
      </div>
      {/* Add Note Section */}
      <div className="border-t border-border pt-6">
        <h4 className="font-medium text-foreground mb-3 flex items-center space-x-2">
          <Icon name="FileText" size={16} />
          <span>Tambah Catatan</span>
        </h4>
        
        <div className="space-y-3">
          <Input
            type="text"
            placeholder="Tulis catatan untuk hari ini..."
            value={newNote}
            onChange={(e) => setNewNote(e?.target?.value)}
            onKeyPress={(e) => e?.key === 'Enter' && handleAddNote()}
          />
          
          <Button
            variant="outline"
            fullWidth
            iconName="Plus"
            iconPosition="left"
            onClick={handleAddNote}
            disabled={!newNote?.trim()}
          >
            Simpan Catatan
          </Button>
        </div>

        {/* Quick Note Templates */}
        <div className="mt-4">
          <p className="text-xs text-muted-foreground mb-2">Template cepat:</p>
          <div className="flex flex-wrap gap-4">
            {[
              'Cuaca cerah, cocok untuk penyemprotan',
              'Tanah masih lembab dari hujan kemarin',
              'Terlihat tanda-tanda hama pada daun',
              'Pertumbuhan tanaman baik'
            ]?.map((template, index) => (
              <button
                key={index}
                onClick={() => setNewNote(template)}
                className="text-xs px-2 py-1 bg-muted text-muted-foreground rounded hover:bg-muted/80 transition-smooth"
              >
                {template}
              </button>
            ))}
          </div>
        </div>
      </div>
    </div>
  );
};

export default EventDetailsPanel;


--- File: ./src/pages/farming-calendar/components/EventFilterBar.jsx ---

import React from 'react';
import Icon from '../../../components/AppIcon';
import Button from '../../../components/ui/Button';

const EventFilterBar = ({ 
  activeFilters, 
  onFilterChange, 
  eventCounts 
}) => {
  const filterOptions = [
    {
      key: 'all',
      label: 'Semua',
      icon: 'Calendar',
      color: 'text-foreground',
      count: eventCounts?.total
    },
    {
      key: 'tanam',
      label: 'Penanaman',
      icon: 'Sprout',
      color: 'text-success',
      count: eventCounts?.tanam
    },
    {
      key: 'pupuk',
      label: 'Pemupukan',
      icon: 'Droplets',
      color: 'text-secondary',
      count: eventCounts?.pupuk
    },
    {
      key: 'semprot',
      label: 'Penyemprotan',
      icon: 'Spray',
      color: 'text-warning',
      count: eventCounts?.semprot
    },
    {
      key: 'panen',
      label: 'Panen',
      icon: 'Wheat',
      color: 'text-accent',
      count: eventCounts?.panen
    }
  ];

  const statusFilters = [
    {
      key: 'pending',
      label: 'Belum Selesai',
      icon: 'Clock',
      count: eventCounts?.pending
    },
    {
      key: 'completed',
      label: 'Selesai',
      icon: 'CheckCircle',
      count: eventCounts?.completed
    }
  ];

  return (
    <div className="bg-card border-b border-border p-4">
      {/* Activity Type Filters */}
      <div className="mb-4">
        <p className="text-sm font-medium text-foreground mb-3">Jenis Kegiatan</p>
        <div className="flex flex-wrap gap-2">
          {filterOptions?.map((filter) => (
            <Button
              key={filter?.key}
              variant={activeFilters?.includes(filter?.key) ? 'default' : 'outline'}
              size="sm"
              onClick={() => onFilterChange('type', filter?.key)}
              className="flex items-center space-x-2"
            >
              <Icon 
                name={filter?.icon} 
                size={16} 
                className={activeFilters?.includes(filter?.key) ? '' : filter?.color}
              />
              <span>{filter?.label}</span>
              {filter?.count > 0 && (
                <span className={`
                  px-1.5 py-0.5 rounded-full text-xs font-medium
                  ${activeFilters?.includes(filter?.key) 
                    ? 'bg-primary-foreground/20 text-primary-foreground' 
                    : 'bg-muted text-muted-foreground'
                  }
                `}>
                  {filter?.count}
                </span>
              )}
            </Button>
          ))}
        </div>
      </div>
      {/* Status Filters */}
      <div className="mb-4">
        <p className="text-sm font-medium text-foreground mb-3">Status</p>
        <div className="flex flex-wrap gap-2">
          {statusFilters?.map((filter) => (
            <Button
              key={filter?.key}
              variant={activeFilters?.includes(filter?.key) ? 'default' : 'outline'}
              size="sm"
              onClick={() => onFilterChange('status', filter?.key)}
              className="flex items-center space-x-2"
            >
              <Icon name={filter?.icon} size={16} />
              <span>{filter?.label}</span>
              {filter?.count > 0 && (
                <span className={`
                  px-1.5 py-0.5 rounded-full text-xs font-medium
                  ${activeFilters?.includes(filter?.key) 
                    ? 'bg-primary-foreground/20 text-primary-foreground' 
                    : 'bg-muted text-muted-foreground'
                  }
                `}>
                  {filter?.count}
                </span>
              )}
            </Button>
          ))}
        </div>
      </div>
      {/* Active Filters Summary */}
      {activeFilters?.length > 0 && !activeFilters?.includes('all') && (
        <div className="flex items-center justify-between pt-3 border-t border-border">
          <div className="flex items-center space-x-2 text-sm text-muted-foreground">
            <Icon name="Filter" size={16} />
            <span>{activeFilters?.length} filter aktif</span>
          </div>
          <Button
            variant="ghost"
            size="sm"
            onClick={() => onFilterChange('clear')}
            className="text-muted-foreground hover:text-foreground"
          >
            Hapus Filter
          </Button>
        </div>
      )}
    </div>
  );
};

export default EventFilterBar;


--- File: ./src/pages/farming-calendar/components/MobileCalendarView.jsx ---

import React from 'react';
import Icon from '../../../components/AppIcon';
import Button from '../../../components/ui/Button';

const MobileCalendarView = ({ 
  events, 
  onEventClick, 
  onAddEvent,
  currentDate,
  onDateChange 
}) => {
  const getUpcomingEvents = () => {
    const today = new Date();
    const nextWeek = new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000);
    
    return events?.filter(event => {
        const eventDate = new Date(event.date);
        return eventDate >= today && eventDate <= nextWeek;
      })?.sort((a, b) => new Date(a.date) - new Date(b.date));
  };

  const getTodayEvents = () => {
    const today = new Date()?.toISOString()?.split('T')?.[0];
    return events?.filter(event => event?.date === today);
  };

  const getEventTypeIcon = (type) => {
    const iconMap = {
      tanam: 'Sprout',
      pupuk: 'Droplets',
      semprot: 'Spray',
      panen: 'Wheat'
    };
    return iconMap?.[type] || 'Calendar';
  };

  const getEventTypeColor = (type) => {
    const colorMap = {
      tanam: 'text-success bg-success/10 border-success/20',
      pupuk: 'text-secondary bg-secondary/10 border-secondary/20',
      semprot: 'text-warning bg-warning/10 border-warning/20',
      panen: 'text-accent bg-accent/10 border-accent/20'
    };
    return colorMap?.[type] || 'text-muted-foreground bg-muted border-border';
  };

  const getEventTypeName = (type) => {
    const nameMap = {
      tanam: 'Penanaman',
      pupuk: 'Pemupukan',
      semprot: 'Penyemprotan',
      panen: 'Panen'
    };
    return nameMap?.[type] || type;
  };

  const formatDate = (dateStr) => {
    const date = new Date(dateStr);
    const today = new Date();
    const tomorrow = new Date(today.getTime() + 24 * 60 * 60 * 1000);
    
    if (date?.toDateString() === today?.toDateString()) {
      return 'Hari Ini';
    } else if (date?.toDateString() === tomorrow?.toDateString()) {
      return 'Besok';
    } else {
      return new Intl.DateTimeFormat('id-ID', {
        weekday: 'long',
        day: 'numeric',
        month: 'short'
      })?.format(date);
    }
  };

  const formatTime = (timeStr) => {
    return timeStr?.substring(0, 5);
  };

  const todayEvents = getTodayEvents();
  const upcomingEvents = getUpcomingEvents();

  return (
    <div className="bg-background min-h-screen pb-20">
      {/* Header */}
      <div className="bg-card border-b border-border p-4">
        <div className="flex items-center justify-between mb-4">
          <h1 className="text-xl font-semibold text-foreground">
            Kalender Pertanian
          </h1>
          <Button
            variant="default"
            size="sm"
            iconName="Plus"
            iconPosition="left"
            onClick={onAddEvent}
          >
            Tambah
          </Button>
        </div>
        
        <div className="text-sm text-muted-foreground">
          {new Intl.DateTimeFormat('id-ID', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          })?.format(new Date())}
        </div>
      </div>
      {/* Today's Events */}
      <div className="p-4">
        <div className="flex items-center justify-between mb-4">
          <h2 className="text-lg font-medium text-foreground">Hari Ini</h2>
          <span className="text-sm text-muted-foreground">
            {todayEvents?.length} kegiatan
          </span>
        </div>

        {todayEvents?.length === 0 ? (
          <div className="bg-card rounded-lg p-6 text-center">
            <Icon name="Calendar" size={32} className="mx-auto mb-2 text-muted-foreground opacity-50" />
            <p className="text-muted-foreground">Tidak ada kegiatan hari ini</p>
          </div>
        ) : (
          <div className="space-y-3">
            {todayEvents?.map((event) => (
              <div
                key={event?.id}
                onClick={() => onEventClick(event)}
                className={`
                  p-4 rounded-lg border cursor-pointer transition-smooth
                  ${getEventTypeColor(event?.type)}
                  hover:shadow-md
                `}
              >
                <div className="flex items-start space-x-3">
                  <Icon name={getEventTypeIcon(event?.type)} size={20} />
                  <div className="flex-1 min-w-0">
                    <h3 className="font-medium truncate">{event?.title}</h3>
                    <p className="text-sm opacity-80 mb-2">
                      {getEventTypeName(event?.type)} ‚Ä¢ {event?.crop}
                    </p>
                    <div className="flex items-center justify-between">
                      <div className="flex items-center space-x-3 text-xs">
                        <span className="flex items-center space-x-1">
                          <Icon name="Clock" size={12} />
                          <span>{formatTime(event?.time)}</span>
                        </span>
                        <span className="flex items-center space-x-1">
                          <Icon name="MapPin" size={12} />
                          <span>{event?.location}</span>
                        </span>
                      </div>
                      <div className={`
                        px-2 py-1 rounded-full text-xs font-medium
                        ${event?.completed 
                          ? 'bg-success text-success-foreground' 
                          : 'bg-muted text-muted-foreground'
                        }
                      `}>
                        {event?.completed ? 'Selesai' : 'Belum'}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        )}
      </div>
      {/* Upcoming Events */}
      <div className="p-4">
        <div className="flex items-center justify-between mb-4">
          <h2 className="text-lg font-medium text-foreground">Minggu Ini</h2>
          <span className="text-sm text-muted-foreground">
            {upcomingEvents?.length} kegiatan
          </span>
        </div>

        {upcomingEvents?.length === 0 ? (
          <div className="bg-card rounded-lg p-6 text-center">
            <Icon name="CalendarX" size={32} className="mx-auto mb-2 text-muted-foreground opacity-50" />
            <p className="text-muted-foreground">Tidak ada kegiatan minggu ini</p>
          </div>
        ) : (
          <div className="space-y-3">
            {upcomingEvents?.map((event) => (
              <div
                key={event?.id}
                onClick={() => onEventClick(event)}
                className={`
                  p-4 rounded-lg border cursor-pointer transition-smooth
                  ${getEventTypeColor(event?.type)}
                  hover:shadow-md
                `}
              >
                <div className="flex items-start space-x-3">
                  <Icon name={getEventTypeIcon(event?.type)} size={20} />
                  <div className="flex-1 min-w-0">
                    <div className="flex items-center justify-between mb-1">
                      <h3 className="font-medium truncate">{event?.title}</h3>
                      <span className="text-xs text-muted-foreground">
                        {formatDate(event?.date)}
                      </span>
                    </div>
                    <p className="text-sm opacity-80 mb-2">
                      {getEventTypeName(event?.type)} ‚Ä¢ {event?.crop}
                    </p>
                    <div className="flex items-center justify-between">
                      <div className="flex items-center space-x-3 text-xs">
                        <span className="flex items-center space-x-1">
                          <Icon name="Clock" size={12} />
                          <span>{formatTime(event?.time)}</span>
                        </span>
                        <span className="flex items-center space-x-1">
                          <Icon name="MapPin" size={12} />
                          <span>{event?.location}</span>
                        </span>
                      </div>
                      <div className={`
                        px-2 py-1 rounded-full text-xs font-medium
                        ${event?.completed 
                          ? 'bg-success text-success-foreground' 
                          : 'bg-muted text-muted-foreground'
                        }
                      `}>
                        {event?.completed ? 'Selesai' : 'Belum'}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        )}
      </div>
    </div>
  );
};

export default MobileCalendarView;


--- File: ./src/pages/farming-calendar/index.jsx ---

import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import BottomNavigation from '../../components/ui/BottomNavigation';
import LoadingOverlay from '../../components/ui/LoadingOverlay';
import OfflineStatusBanner from '../../components/ui/OfflineStatusBanner';
import CalendarHeader from './components/CalendarHeader';
import CalendarGrid from './components/CalendarGrid';
import EventDetailsPanel from './components/EventDetailsPanel';
import EventFilterBar from './components/EventFilterBar';
import AddEventModal from './components/AddEventModal';
import MobileCalendarView from './components/MobileCalendarView';

const FarmingCalendar = () => {
  const navigate = useNavigate();
  const [currentDate, setCurrentDate] = useState(new Date());
  const [selectedDate, setSelectedDate] = useState(new Date());
  const [viewMode, setViewMode] = useState('month');
  const [events, setEvents] = useState([]);
  const [activeFilters, setActiveFilters] = useState(['all']);
  const [isAddEventModalOpen, setIsAddEventModalOpen] = useState(false);
  const [isLoading, setIsLoading] = useState(true);
  const [isOnline, setIsOnline] = useState(navigator.onLine);
  const [pendingSyncCount, setPendingSyncCount] = useState(0);
  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);

  // Mock farming events data
  const mockEvents = [
    {
      id: '1',
      date: '2025-01-03',
      title: 'Penanaman Jagung Varietas Lokal',
      type: 'tanam',
      crop: 'jagung',
      time: '06:00',
      location: 'Lahan A (0.5 Ha)',
      completed: false,
      notes: ['Cuaca cerah, tanah sudah diolah dengan baik', 'Menggunakan benih jagung varietas Bisma'],
      createdAt: '2025-01-01T10:00:00Z'
    },
    {
      id: '2',
      date: '2025-01-03',
      title: 'Penyemprotan Pestisida Organik',
      type: 'semprot',
      crop: 'tomat',
      time: '16:00',
      location: 'Lahan B (0.3 Ha)',
      completed: true,
      notes: ['Menggunakan pestisida organik neem oil', 'Konsentrasi 2ml per liter air'],
      createdAt: '2025-01-01T11:00:00Z'
    },
    {
      id: '3',
      date: '2025-01-04',
      title: 'Pemupukan Dasar NPK',
      type: 'pupuk',
      crop: 'padi',
      time: '07:30',
      location: 'Sawah Utama (1 Ha)',
      completed: false,
      notes: ['Pupuk NPK 15-15-15 sebanyak 200kg per hektar'],
      createdAt: '2025-01-01T12:00:00Z'
    },
    {
      id: '4',
      date: '2025-01-05',
      title: 'Panen Kacang Tanah',
      type: 'panen',
      crop: 'kacang_tanah',
      time: '05:30',
      location: 'Lahan C (0.8 Ha)',
      completed: false,
      notes: ['Umur tanaman 90 hari, siap panen', 'Perkiraan hasil 1.2 ton per hektar'],
      createdAt: '2025-01-01T13:00:00Z'
    },
    {
      id: '5',
      date: '2025-01-06',
      title: 'Penanaman Cabai Rawit',
      type: 'tanam',
      crop: 'cabai',
      time: '06:30',
      location: 'Lahan D (0.2 Ha)',
      completed: false,
      notes: ['Bibit cabai rawit umur 30 hari', 'Jarak tanam 40x40 cm'],
      createdAt: '2025-01-01T14:00:00Z'
    },
    {
      id: '6',
      date: '2025-01-07',
      title: 'Penyemprotan Fungisida',
      type: 'semprot',
      crop: 'jagung',
      time: '17:00',
      location: 'Lahan A (0.5 Ha)',
      completed: false,
      notes: ['Pencegahan penyakit bulai pada jagung'],
      createdAt: '2025-01-01T15:00:00Z'
    },
    {
      id: '7',
      date: '2025-01-08',
      title: 'Pemupukan Susulan Urea',
      type: 'pupuk',
      crop: 'padi',
      time: '08:00',
      location: 'Sawah Utama (1 Ha)',
      completed: false,
      notes: ['Urea 100kg per hektar pada fase anakan aktif'],
      createdAt: '2025-01-01T16:00:00Z'
    },
    {
      id: '8',
      date: '2025-01-10',
      title: 'Panen Tomat',
      type: 'panen',
      crop: 'tomat',
      time: '06:00',
      location: 'Lahan B (0.3 Ha)',
      completed: false,
      notes: ['Panen perdana tomat, buah sudah merah 80%'],
      createdAt: '2025-01-01T17:00:00Z'
    }
  ];

  // Initialize component
  useEffect(() => {
    const initializeCalendar = async () => {
      setIsLoading(true);
      
      // Simulate loading time
      await new Promise(resolve => setTimeout(resolve, 1000));
      
      // Load events from localStorage or use mock data
      const savedEvents = localStorage.getItem('farming-calendar-events');
      if (savedEvents) {
        setEvents(JSON.parse(savedEvents));
      } else {
        setEvents(mockEvents);
        localStorage.setItem('farming-calendar-events', JSON.stringify(mockEvents));
      }
      
      // Load saved filters
      const savedFilters = localStorage.getItem('farming-calendar-filters');
      if (savedFilters) {
        setActiveFilters(JSON.parse(savedFilters));
      }
      
      setIsLoading(false);
    };

    initializeCalendar();
  }, []);

  // Handle online/offline status
  useEffect(() => {
    const handleOnline = () => setIsOnline(true);
    const handleOffline = () => setIsOnline(false);
    
    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);
    
    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, []);

  // Handle responsive design
  useEffect(() => {
    const handleResize = () => {
      setIsMobile(window.innerWidth < 768);
    };

    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  // Save events to localStorage whenever events change
  useEffect(() => {
    localStorage.setItem('farming-calendar-events', JSON.stringify(events));
  }, [events]);

  // Save filters to localStorage whenever filters change
  useEffect(() => {
    localStorage.setItem('farming-calendar-filters', JSON.stringify(activeFilters));
  }, [activeFilters]);

  // Calendar navigation handlers
  const handlePreviousMonth = () => {
    const newDate = new Date(currentDate);
    newDate?.setMonth(currentDate?.getMonth() - 1);
    setCurrentDate(newDate);
  };

  const handleNextMonth = () => {
    const newDate = new Date(currentDate);
    newDate?.setMonth(currentDate?.getMonth() + 1);
    setCurrentDate(newDate);
  };

  const handleDateClick = (date) => {
    setSelectedDate(date);
  };

  const handleViewModeChange = (mode) => {
    setViewMode(mode);
  };

  // Event management handlers
  const handleAddEvent = (newEvent) => {
    setEvents(prev => [...prev, newEvent]);
    
    if (!isOnline) {
      setPendingSyncCount(prev => prev + 1);
    }
  };

  const handleUpdateEvent = (eventId, updates) => {
    setEvents(prev => prev?.map(event => 
      event?.id === eventId ? { ...event, ...updates } : event
    ));
    
    if (!isOnline) {
      setPendingSyncCount(prev => prev + 1);
    }
  };

  const handleDeleteEvent = (eventId) => {
    setEvents(prev => prev?.filter(event => event?.id !== eventId));
    
    if (!isOnline) {
      setPendingSyncCount(prev => prev + 1);
    }
  };

  const handleAddNote = (dateStr, note) => {
    const noteEntry = {
      id: Date.now()?.toString(),
      date: dateStr,
      title: `Catatan - ${new Date(dateStr)?.toLocaleDateString('id-ID')}`,
      type: 'note',
      crop: 'umum',
      time: new Date()?.toTimeString()?.substring(0, 5),
      location: 'Catatan Harian',
      completed: true,
      notes: [note],
      createdAt: new Date()?.toISOString()
    };
    
    handleAddEvent(noteEntry);
  };

  // Filter handlers
  const handleFilterChange = (filterType, filterValue) => {
    if (filterType === 'clear') {
      setActiveFilters(['all']);
      return;
    }
    
    if (filterValue === 'all') {
      setActiveFilters(['all']);
      return;
    }
    
    setActiveFilters(prev => {
      const newFilters = prev?.filter(f => f !== 'all');
      
      if (newFilters?.includes(filterValue)) {
        const filtered = newFilters?.filter(f => f !== filterValue);
        return filtered?.length === 0 ? ['all'] : filtered;
      } else {
        return [...newFilters, filterValue];
      }
    });
  };

  // Get filtered events
  const getFilteredEvents = () => {
    if (activeFilters?.includes('all')) {
      return events;
    }
    
    return events?.filter(event => {
      const typeMatch = activeFilters?.some(filter => 
        ['tanam', 'pupuk', 'semprot', 'panen']?.includes(filter) && event?.type === filter
      );
      
      const statusMatch = activeFilters?.some(filter => {
        if (filter === 'completed') return event?.completed;
        if (filter === 'pending') return !event?.completed;
        return false;
      });
      
      return typeMatch || statusMatch;
    });
  };

  // Get event counts for filters
  const getEventCounts = () => {
    return {
      total: events?.length,
      tanam: events?.filter(e => e?.type === 'tanam')?.length,
      pupuk: events?.filter(e => e?.type === 'pupuk')?.length,
      semprot: events?.filter(e => e?.type === 'semprot')?.length,
      panen: events?.filter(e => e?.type === 'panen')?.length,
      completed: events?.filter(e => e?.completed)?.length,
      pending: events?.filter(e => !e?.completed)?.length
    };
  };

  const handleEventClick = (event) => {
    const eventDate = new Date(event.date);
    setSelectedDate(eventDate);
    setCurrentDate(eventDate);
  };

  const handleRetrySync = () => {
    // Simulate sync retry
    setPendingSyncCount(0);
  };

  const filteredEvents = getFilteredEvents();
  const eventCounts = getEventCounts();

  if (isLoading) {
    return (
      <LoadingOverlay
        isVisible={true}
        message="Memuat kalender pertanian..."
        animationType="plant"
      />
    );
  }

  // Mobile view
  if (isMobile) {
    return (
      <div className="min-h-screen bg-background">
        <OfflineStatusBanner
          isOnline={isOnline}
          pendingSyncCount={pendingSyncCount}
          onRetrySync={handleRetrySync}
        />
        
        <MobileCalendarView
          events={filteredEvents}
          onEventClick={handleEventClick}
          onAddEvent={() => setIsAddEventModalOpen(true)}
          currentDate={currentDate}
          onDateChange={setCurrentDate}
        />
        
        <AddEventModal
          isOpen={isAddEventModalOpen}
          onClose={() => setIsAddEventModalOpen(false)}
          onAddEvent={handleAddEvent}
          selectedDate={selectedDate}
        />
        
        <BottomNavigation />
      </div>
    );
  }

  // Desktop view
  return (
    <div className="min-h-screen bg-background">
      <OfflineStatusBanner
        isOnline={isOnline}
        pendingSyncCount={pendingSyncCount}
        onRetrySync={handleRetrySync}
      />
      
      <div className="flex h-screen">
        {/* Main Calendar Area */}
        <div className="flex-1 flex flex-col">
          <CalendarHeader
            currentDate={currentDate}
            viewMode={viewMode}
            onViewModeChange={handleViewModeChange}
            onPreviousMonth={handlePreviousMonth}
            onNextMonth={handleNextMonth}
            onAddEvent={() => setIsAddEventModalOpen(true)}
          />
          
          <EventFilterBar
            activeFilters={activeFilters}
            onFilterChange={handleFilterChange}
            eventCounts={eventCounts}
          />
          
          <div className="flex-1 overflow-hidden">
            <CalendarGrid
              currentDate={currentDate}
              viewMode={viewMode}
              events={filteredEvents}
              onDateClick={handleDateClick}
              selectedDate={selectedDate}
            />
          </div>
        </div>
        
        {/* Event Details Panel */}
        <div className="w-80 border-l border-border">
          <EventDetailsPanel
            selectedDate={selectedDate}
            events={filteredEvents}
            onAddNote={handleAddNote}
            onUpdateEvent={handleUpdateEvent}
            onDeleteEvent={handleDeleteEvent}
          />
        </div>
      </div>
      
      <AddEventModal
        isOpen={isAddEventModalOpen}
        onClose={() => setIsAddEventModalOpen(false)}
        onAddEvent={handleAddEvent}
        selectedDate={selectedDate}
      />
      
      <BottomNavigation />
    </div>
  );
};

export default FarmingCalendar;


--- File: ./src/pages/home-dashboard/components/CommunityAlertSnippet.jsx ---

import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import Icon from '../../../components/AppIcon';
import Button from '../../../components/ui/Button';

const CommunityAlertSnippet = ({ className = '' }) => {
  const navigate = useNavigate();
  const [expandedAlert, setExpandedAlert] = useState(null);

  // Mock community alerts data
  const communityAlerts = [
    {
      id: 1,
      title: "Serangan Hama Wereng Coklat",
      location: "Desa Oesao, Kupang Tengah",
      severity: "tinggi",
      timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000), // 2 hours ago
      reportedBy: "Petani Lokal",
      cropType: "Padi",
      description: `Ditemukan serangan hama wereng coklat yang cukup parah di area persawahan. Gejala yang terlihat:\n‚Ä¢ Daun padi menguning dan mengering\n‚Ä¢ Tanaman menjadi kerdil\n‚Ä¢ Populasi wereng sangat tinggi\n\nRekomendasi segera lakukan penyemprotan insektisida dan pantau perkembangan.`,
      affectedArea: "15 hektar",
      reportCount: 8
    },
    {
      id: 2,
      title: "Penyakit Blas Daun Padi",
      location: "Kelurahan Fatululi, Kupang",
      severity: "sedang",
      timestamp: new Date(Date.now() - 5 * 60 * 60 * 1000), // 5 hours ago
      reportedBy: "Kelompok Tani Makmur",
      cropType: "Padi",
      description: `Terdeteksi gejala penyakit blas pada daun padi di beberapa lokasi:\n‚Ä¢ Bercak coklat memanjang pada daun\n‚Ä¢ Daun mengering dari ujung\n‚Ä¢ Produktivitas menurun\n\nSegera aplikasikan fungisida dan perbaiki drainase lahan.`,
      affectedArea: "8 hektar",
      reportCount: 5
    }
  ];

  const getSeverityColor = (severity) => {
    switch (severity) {
      case 'tinggi':
        return 'text-error bg-error/10 border-error/20';
      case 'sedang':
        return 'text-warning bg-warning/10 border-warning/20';
      case 'rendah':
        return 'text-success bg-success/10 border-success/20';
      default:
        return 'text-muted-foreground bg-muted border-border';
    }
  };

  const getSeverityIcon = (severity) => {
    switch (severity) {
      case 'tinggi':
        return 'AlertTriangle';
      case 'sedang':
        return 'AlertCircle';
      case 'rendah':
        return 'Info';
      default:
        return 'Bell';
    }
  };

  const formatTimeAgo = (timestamp) => {
    const now = new Date();
    const diff = now - timestamp;
    const hours = Math.floor(diff / (1000 * 60 * 60));
    const minutes = Math.floor(diff / (1000 * 60));

    if (hours > 0) {
      return `${hours} jam yang lalu`;
    } else if (minutes > 0) {
      return `${minutes} menit yang lalu`;
    } else {
      return 'Baru saja';
    }
  };

  const handleViewAllAlerts = () => {
    navigate('/community-alerts');
  };

  const toggleExpand = (alertId) => {
    setExpandedAlert(expandedAlert === alertId ? null : alertId);
  };

  if (!communityAlerts?.length) {
    return (
      <div className={`bg-card border border-border rounded-2xl p-6 ${className}`}>
        <div className="text-center py-8">
          <Icon name="Bell" size={48} className="text-muted-foreground mx-auto mb-4" />
          <h3 className="text-lg font-medium text-foreground mb-2">
            Tidak Ada Peringatan
          </h3>
          <p className="text-sm text-muted-foreground">
            Belum ada peringatan hama terbaru di area Anda
          </p>
        </div>
      </div>
    );
  }

  return (
    <div className={`bg-card border border-border rounded-2xl p-6 ${className}`}>
      {/* Header */}
      <div className="flex items-center justify-between mb-6">
        <div className="flex items-center space-x-3">
          <div className="p-2 bg-accent/10 rounded-lg">
            <Icon name="Bell" size={20} className="text-accent" />
          </div>
          <div>
            <h2 className="text-lg font-semibold text-foreground">
              Peringatan Komunitas
            </h2>
            <p className="text-sm text-muted-foreground">
              Alert terbaru dari petani sekitar
            </p>
          </div>
        </div>
        
        <Button
          variant="ghost"
          size="sm"
          iconName="ExternalLink"
          iconPosition="right"
          onClick={handleViewAllAlerts}
          className="text-primary hover:text-primary/80"
        >
          Lihat Semua
        </Button>
      </div>
      {/* Latest Alerts */}
      <div className="space-y-4">
        {communityAlerts?.slice(0, 2)?.map((alert) => (
          <div
            key={alert?.id}
            className="border border-border rounded-xl p-4 hover:bg-muted/30 transition-smooth"
          >
            {/* Alert Header */}
            <div className="flex items-start justify-between mb-3">
              <div className="flex items-start space-x-3 flex-1">
                <Icon 
                  name={getSeverityIcon(alert?.severity)} 
                  size={20} 
                  className={getSeverityColor(alert?.severity)?.split(' ')?.[0]} 
                />
                
                <div className="flex-1 min-w-0">
                  <h3 className="font-medium text-foreground mb-1">
                    {alert?.title}
                  </h3>
                  
                  <div className="flex items-center space-x-4 text-xs text-muted-foreground mb-2">
                    <div className="flex items-center space-x-1">
                      <Icon name="MapPin" size={12} />
                      <span>{alert?.location}</span>
                    </div>
                    <div className="flex items-center space-x-1">
                      <Icon name="Clock" size={12} />
                      <span>{formatTimeAgo(alert?.timestamp)}</span>
                    </div>
                  </div>
                  
                  <div className="flex items-center space-x-2">
                    <span className={`
                      inline-flex items-center px-2 py-1 rounded-md text-xs font-medium border
                      ${getSeverityColor(alert?.severity)}
                    `}>
                      {alert?.severity?.charAt(0)?.toUpperCase() + alert?.severity?.slice(1)}
                    </span>
                    
                    <span className="text-xs text-muted-foreground">
                      {alert?.cropType} ‚Ä¢ {alert?.reportCount} laporan
                    </span>
                  </div>
                </div>
              </div>
              
              <button
                onClick={() => toggleExpand(alert?.id)}
                className="p-1 rounded-md hover:bg-muted transition-smooth flex-shrink-0 ml-2"
                aria-label={expandedAlert === alert?.id ? 'Tutup detail' : 'Lihat detail'}
              >
                <Icon 
                  name={expandedAlert === alert?.id ? 'ChevronUp' : 'ChevronDown'} 
                  size={16} 
                  className="text-muted-foreground"
                />
              </button>
            </div>

            {/* Expanded Content */}
            {expandedAlert === alert?.id && (
              <div className="mt-4 pt-4 border-t border-border">
                <div className="space-y-3">
                  <div>
                    <h4 className="text-sm font-medium text-foreground mb-2">
                      Detail Peringatan:
                    </h4>
                    <p className="text-sm text-muted-foreground whitespace-pre-line leading-relaxed">
                      {alert?.description}
                    </p>
                  </div>
                  
                  <div className="flex flex-col gap-4 pt-2">
                    <div>
                      <span className="text-xs font-medium text-muted-foreground">
                        Area Terdampak:
                      </span>
                      <p className="text-sm text-foreground">
                        {alert?.affectedArea}
                      </p>
                    </div>
                    <div>
                      <span className="text-xs font-medium text-muted-foreground">
                        Dilaporkan oleh:
                      </span>
                      <p className="text-sm text-foreground">
                        {alert?.reportedBy}
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            )}
          </div>
        ))}
      </div>
      {/* View All Button */}
      {communityAlerts?.length > 2 && (
        <div className="mt-6 pt-4 border-t border-border">
          <Button
            variant="outline"
            fullWidth
            iconName="ArrowRight"
            iconPosition="right"
            onClick={handleViewAllAlerts}
          >
            Lihat {communityAlerts?.length - 2} Peringatan Lainnya
          </Button>
        </div>
      )}
    </div>
  );
};

export default CommunityAlertSnippet;


--- File: ./src/pages/home-dashboard/components/NavigationCard.jsx ---

import React from 'react';
import { useNavigate } from 'react-router-dom';
import Icon from '../../../components/AppIcon';


const NavigationCard = ({ 
  title, 
  description, 
  iconName, 
  route, 
  variant = 'default',
  className = '' 
}) => {
  const navigate = useNavigate();

  const handleNavigation = () => {
    navigate(route);
  };

  const getVariantStyles = () => {
    switch (variant) {
      case 'camera':
        return 'bg-primary/10 border-primary/20 hover:bg-primary/15';
      case 'calendar':
        return 'bg-secondary/10 border-secondary/20 hover:bg-secondary/15';
      case 'alerts':
        return 'bg-accent/10 border-accent/20 hover:bg-accent/15';
      default:
        return 'bg-card border-border hover:bg-muted/50';
    }
  };

  return (
    <div 
      className={`
        ${getVariantStyles()}
        border rounded-2xl p-6 transition-smooth cursor-pointer
        shadow-agricultural hover:shadow-agricultural-lg
        ${className}
      `}
      onClick={handleNavigation}
      role="button"
      tabIndex={0}
      onKeyDown={(e) => {
        if (e?.key === 'Enter' || e?.key === ' ') {
          e?.preventDefault();
          handleNavigation();
        }
      }}
    >
      <div className="flex items-center space-x-4">
        <div className={`
          p-3 rounded-xl
          ${variant === 'camera' ? 'bg-primary text-primary-foreground' : ''}
          ${variant === 'calendar' ? 'bg-secondary text-secondary-foreground' : ''}
          ${variant === 'alerts' ? 'bg-accent text-accent-foreground' : ''}
          ${variant === 'default' ? 'bg-muted text-foreground' : ''}
        `}>
          <Icon name={iconName} size={24} strokeWidth={2} />
        </div>
        
        <div className="flex-1 min-w-0">
          <h3 className="text-lg font-semibold text-foreground mb-1">
            {title}
          </h3>
          <p className="text-sm text-muted-foreground leading-relaxed">
            {description}
          </p>
        </div>
        
        <div className="flex-shrink-0">
          <Icon 
            name="ChevronRight" 
            size={20} 
            className="text-muted-foreground" 
          />
        </div>
      </div>
    </div>
  );
};

export default NavigationCard;


--- File: ./src/pages/home-dashboard/components/QuickActions.jsx ---

import React from 'react';
import { useNavigate } from 'react-router-dom';
import Icon from '../../../components/AppIcon';


const QuickActions = ({ className = '' }) => {
  const navigate = useNavigate();

  const quickActions = [
    {
      id: 'diagnosis',
      title: 'Diagnosis Cepat',
      description: 'Foto tanaman untuk analisis AI',
      icon: 'Camera',
      route: '/photo-diagnosis',
      color: 'primary'
    },
    {
      id: 'weather',
      title: 'Cuaca Hari Ini',
      description: 'Prakiraan dan rekomendasi',
      icon: 'CloudSun',
      action: 'weather',
      color: 'secondary'
    },
    {
      id: 'notes',
      title: 'Catatan Cepat',
      description: 'Tulis observasi lapangan',
      icon: 'PenTool',
      action: 'notes',
      color: 'accent'
    },
    {
      id: 'help',
      title: 'Bantuan',
      description: 'Panduan dan tips',
      icon: 'HelpCircle',
      action: 'help',
      color: 'muted'
    }
  ];

  const handleAction = (action) => {
    if (action?.route) {
      navigate(action?.route);
    } else {
      // Handle other actions
      switch (action?.action) {
        case 'weather':
          // Show weather modal or navigate to weather page
          console.log('Show weather details');
          break;
        case 'notes':
          // Open quick notes modal
          console.log('Open quick notes');
          break;
        case 'help':
          // Navigate to help section
          console.log('Show help');
          break;
        default:
          break;
      }
    }
  };

  const getColorClasses = (color) => {
    switch (color) {
      case 'primary':
        return 'bg-primary/10 text-primary hover:bg-primary/15';
      case 'secondary':
        return 'bg-secondary/10 text-secondary hover:bg-secondary/15';
      case 'accent':
        return 'bg-accent/10 text-accent hover:bg-accent/15';
      default:
        return 'bg-muted text-muted-foreground hover:bg-muted/80';
    }
  };

  return (
    <div className={`${className}`}>
      <div className="mb-4">
        <h2 className="text-lg font-semibold text-foreground mb-1">
          Aksi Cepat
        </h2>
        <p className="text-sm text-muted-foreground">
          Fitur yang sering digunakan
        </p>
      </div>
      <div className="grid grid-cols-2 gap-3">
        {quickActions?.map((action) => (
          <button
            key={action?.id}
            onClick={() => handleAction(action)}
            className={`
              ${getColorClasses(action?.color)}
              p-4 rounded-xl border border-border/50 transition-smooth
              text-left hover:shadow-agricultural
            `}
          >
            <div className="flex items-center space-x-3">
              <div className={`
                p-2 rounded-lg
                ${action?.color === 'primary' ? 'bg-primary text-primary-foreground' : ''}
                ${action?.color === 'secondary' ? 'bg-secondary text-secondary-foreground' : ''}
                ${action?.color === 'accent' ? 'bg-accent text-accent-foreground' : ''}
                ${action?.color === 'muted' ? 'bg-muted-foreground text-background' : ''}
              `}>
                <Icon name={action?.icon} size={20} />
              </div>
              
              <div className="flex-1 min-w-0">
                <h3 className="font-medium text-foreground text-sm mb-1">
                  {action?.title}
                </h3>
                <p className="text-xs text-muted-foreground leading-tight">
                  {action?.description}
                </p>
              </div>
            </div>
          </button>
        ))}
      </div>
    </div>
  );
};

export default QuickActions;


--- File: ./src/pages/home-dashboard/components/WelcomeHeader.jsx ---

import React from 'react';
import Icon from '../../../components/AppIcon';

const WelcomeHeader = ({ className = '' }) => {
  // Mock user data
  const userData = {
    name: "Bapak Yosef",
    location: "Desa Oesao, Kupang",
    lastActivity: new Date(Date.now() - 3 * 60 * 60 * 1000), // 3 hours ago
    totalFields: 3,
    activeCrops: 2
  };

  const getCurrentGreeting = () => {
    const hour = new Date()?.getHours();
    if (hour < 12) return "Selamat Pagi";
    if (hour < 15) return "Selamat Siang";
    if (hour < 18) return "Selamat Sore";
    return "Selamat Malam";
  };

  const formatLastActivity = (timestamp) => {
    const now = new Date();
    const diff = now - timestamp;
    const hours = Math.floor(diff / (1000 * 60 * 60));
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));

    if (days > 0) {
      return `${days} hari yang lalu`;
    } else if (hours > 0) {
      return `${hours} jam yang lalu`;
    } else {
      return 'Baru saja aktif';
    }
  };

  return (
    <div className={`bg-gradient-to-r from-primary/5 to-secondary/5 rounded-2xl p-6 ${className}`}>
      <div className="flex items-start justify-between">
        <div className="flex-1">
          {/* Greeting */}
          <div className="mb-4">
            <h1 className="text-2xl font-bold text-foreground mb-1">
              {getCurrentGreeting()}, {userData?.name}! üå±
            </h1>
            <p className="text-sm text-muted-foreground">
              Semoga hari ini membawa hasil panen yang melimpah
            </p>
          </div>

          {/* Location & Activity */}
          <div className="space-y-2">
            <div className="flex items-center space-x-2 text-sm text-muted-foreground">
              <Icon name="MapPin" size={16} />
              <span>{userData?.location}</span>
            </div>
            
            <div className="flex items-center space-x-2 text-sm text-muted-foreground">
              <Icon name="Clock" size={16} />
              <span>Terakhir aktif {formatLastActivity(userData?.lastActivity)}</span>
            </div>
          </div>

          {/* Quick Stats */}
          <div className="flex items-center space-x-6 mt-4 pt-4 border-t border-border/50">
            <div className="text-center">
              <div className="text-lg font-semibold text-foreground">
                {userData?.totalFields}
              </div>
              <div className="text-xs text-muted-foreground">
                Lahan
              </div>
            </div>
            
            <div className="text-center">
              <div className="text-lg font-semibold text-foreground">
                {userData?.activeCrops}
              </div>
              <div className="text-xs text-muted-foreground">
                Tanaman Aktif
              </div>
            </div>
            
            <div className="text-center">
              <div className="text-lg font-semibold text-success">
                Baik
              </div>
              <div className="text-xs text-muted-foreground">
                Status Lahan
              </div>
            </div>
          </div>
        </div>

        {/* Weather Widget */}
        <div className="flex-shrink-0 ml-4">
          <div className="bg-card/50 backdrop-blur-sm rounded-xl p-4 text-center min-w-[80px]">
            <Icon name="Sun" size={32} className="text-warning mx-auto mb-2" />
            <div className="text-lg font-semibold text-foreground">32¬∞</div>
            <div className="text-xs text-muted-foreground">Cerah</div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default WelcomeHeader;


--- File: ./src/pages/home-dashboard/index.jsx ---

import React, { useState, useEffect } from 'react';
import { Helmet } from 'react-helmet';
import WelcomeHeader from './components/WelcomeHeader';
import NavigationCard from './components/NavigationCard';
import CommunityAlertSnippet from './components/CommunityAlertSnippet';
import QuickActions from './components/QuickActions';
import BottomNavigation from '../../components/ui/BottomNavigation';
import LoadingOverlay from '../../components/ui/LoadingOverlay';
import OfflineStatusBanner from '../../components/ui/OfflineStatusBanner';

const HomeDashboard = () => {
  const [isLoading, setIsLoading] = useState(true);
  const [isOnline, setIsOnline] = useState(navigator.onLine);
  const [pendingSyncCount, setPendingSyncCount] = useState(0);

  // Main navigation options
  const navigationOptions = [
    {
      title: "Ambil/Upload Foto",
      description: "Diagnosis tanaman dengan AI untuk deteksi hama dan penyakit",
      iconName: "Camera",
      route: "/photo-diagnosis",
      variant: "camera"
    },
    {
      title: "Kalender Tanam",
      description: "Jadwal tanam, pupuk, semprot, dan panen untuk semua lahan",
      iconName: "Calendar",
      route: "/farming-calendar",
      variant: "calendar"
    },
    {
      title: "Peringatan Hama",
      description: "Alert komunitas dan laporan hama terbaru di sekitar Anda",
      iconName: "AlertTriangle",
      route: "/community-alerts",
      variant: "alerts"
    }
  ];

  // Handle online/offline status
  useEffect(() => {
    const handleOnline = () => setIsOnline(true);
    const handleOffline = () => setIsOnline(false);

    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);

    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, []);

  // Simulate initial loading
  useEffect(() => {
    const timer = setTimeout(() => {
      setIsLoading(false);
    }, 1500);

    return () => clearTimeout(timer);
  }, []);

  // Mock pending sync data
  useEffect(() => {
    // Simulate some pending sync items when offline
    if (!isOnline) {
      setPendingSyncCount(3);
    } else {
      setPendingSyncCount(0);
    }
  }, [isOnline]);

  const handleRetrySync = () => {
    setIsLoading(true);
    // Simulate sync process
    setTimeout(() => {
      setPendingSyncCount(0);
      setIsLoading(false);
    }, 2000);
  };

  return (
    <>
      <Helmet>
        <title>Dashboard - AI Tani Kupang</title>
        <meta name="description" content="Dashboard utama AI Tani Kupang untuk diagnosis tanaman, kalender pertanian, dan peringatan komunitas" />
        <meta name="keywords" content="pertanian, AI, diagnosis tanaman, kalender tanam, hama, Kupang" />
      </Helmet>
      <div className="min-h-screen bg-background">
        {/* Offline Status Banner */}
        <OfflineStatusBanner
          isOnline={isOnline}
          pendingSyncCount={pendingSyncCount}
          onRetrySync={handleRetrySync}
        />

        {/* Main Content */}
        <div className="pb-20"> {/* Bottom padding for navigation */}
          <div className="max-w-md mx-auto px-4 py-6 space-y-6">
            
            {/* Welcome Header */}
            <WelcomeHeader />

            {/* Main Navigation Cards */}
            <div className="space-y-4">
              <div className="mb-4">
                <h2 className="text-lg font-semibold text-foreground mb-1">
                  Fitur Utama
                </h2>
                <p className="text-sm text-muted-foreground">
                  Pilih fitur yang ingin Anda gunakan
                </p>
              </div>

              {navigationOptions?.map((option, index) => (
                <NavigationCard
                  key={index}
                  title={option?.title}
                  description={option?.description}
                  iconName={option?.iconName}
                  route={option?.route}
                  variant={option?.variant}
                />
              ))}
            </div>

            {/* Quick Actions */}
            <QuickActions />

            {/* Community Alert Snippet */}
            <CommunityAlertSnippet />

            {/* Additional Info Section */}
            <div className="bg-card border border-border rounded-2xl p-6">
              <div className="text-center">
                <h3 className="text-lg font-semibold text-foreground mb-2">
                  Tips Hari Ini üí°
                </h3>
                <p className="text-sm text-muted-foreground leading-relaxed">
                  Cuaca cerah hari ini cocok untuk penyemprotan pestisida. 
                  Lakukan penyemprotan pada pagi atau sore hari untuk hasil optimal.
                </p>
              </div>
            </div>

            {/* App Info */}
            <div className="text-center py-4">
              <p className="text-xs text-muted-foreground">
                AI Tani Kupang v1.0 ‚Ä¢ Dikembangkan untuk Petani Indonesia
              </p>
              <p className="text-xs text-muted-foreground mt-1">
                ¬© {new Date()?.getFullYear()} - Semua hak dilindungi
              </p>
            </div>
          </div>
        </div>

        {/* Bottom Navigation */}
        <BottomNavigation />

        {/* Loading Overlay */}
        <LoadingOverlay
          isVisible={isLoading}
          message="Memuat dashboard..."
          animationType="plant"
        />
      </div>
    </>
  );
};

export default HomeDashboard;


--- File: ./src/pages/photo-diagnosis/components/CameraInterface.jsx ---

import React, { useState, useRef, useEffect } from 'react';
import Icon from '../../../components/AppIcon';
import Image from '../../../components/AppImage';
import Button from '../../../components/ui/Button';

const CameraInterface = ({ 
  onImageCapture, 
  capturedImage, 
  onImageRemove,
  isLoading = false 
}) => {
  const [cameraStream, setCameraStream] = useState(null);
  const [isCameraActive, setIsCameraActive] = useState(false);
  const [cameraError, setCameraError] = useState(null);
  const videoRef = useRef(null);
  const canvasRef = useRef(null);
  const fileInputRef = useRef(null);

  useEffect(() => {
    return () => {
      if (cameraStream) {
        cameraStream?.getTracks()?.forEach(track => track?.stop());
      }
    };
  }, [cameraStream]);

  const startCamera = async () => {
    try {
      setCameraError(null);
      const stream = await navigator.mediaDevices?.getUserMedia({
        video: { 
          facingMode: 'environment',
          width: { ideal: 1280 },
          height: { ideal: 720 }
        }
      });
      
      setCameraStream(stream);
      setIsCameraActive(true);
      
      if (videoRef?.current) {
        videoRef.current.srcObject = stream;
      }
    } catch (error) {
      setCameraError('Tidak dapat mengakses kamera. Pastikan izin kamera telah diberikan.');
      console.error('Camera access error:', error);
    }
  };

  const stopCamera = () => {
    if (cameraStream) {
      cameraStream?.getTracks()?.forEach(track => track?.stop());
      setCameraStream(null);
      setIsCameraActive(false);
    }
  };

  const capturePhoto = () => {
    if (!videoRef?.current || !canvasRef?.current) return;

    const video = videoRef?.current;
    const canvas = canvasRef?.current;
    const context = canvas?.getContext('2d');

    canvas.width = video?.videoWidth;
    canvas.height = video?.videoHeight;
    
    context?.drawImage(video, 0, 0, canvas?.width, canvas?.height);
    
    canvas?.toBlob((blob) => {
      if (blob) {
        const file = new File([blob], `diagnosis_${Date.now()}.jpg`, {
          type: 'image/jpeg'
        });
        onImageCapture(file);
        stopCamera();
      }
    }, 'image/jpeg', 0.8);
  };

  const handleFileSelect = (event) => {
    const file = event?.target?.files?.[0];
    if (file && file?.type?.startsWith('image/')) {
      onImageCapture(file);
    }
  };

  const triggerFileSelect = () => {
    fileInputRef?.current?.click();
  };

  if (capturedImage) {
    return (
      <div className="bg-card rounded-lg border border-border overflow-hidden">
        <div className="relative">
          <Image
            src={URL.createObjectURL(capturedImage)}
            alt="Foto tanaman yang akan didiagnosis"
            className="w-full h-64 object-cover"
          />
          <div className="absolute top-4 right-4">
            <Button
              variant="destructive"
              size="icon"
              onClick={onImageRemove}
              disabled={isLoading}
              iconName="X"
              className="bg-error/80 hover:bg-error"
            />
          </div>
        </div>
        <div className="p-4 bg-muted/50">
          <div className="flex items-center space-x-2">
            <Icon name="CheckCircle" size={16} className="text-success" />
            <span className="text-sm text-muted-foreground">
              Foto siap untuk dianalisis
            </span>
          </div>
          <p className="text-xs text-muted-foreground mt-1">
            Ukuran: {(capturedImage?.size / 1024 / 1024)?.toFixed(2)} MB
          </p>
        </div>
      </div>
    );
  }

  if (isCameraActive) {
    return (
      <div className="bg-card rounded-lg border border-border overflow-hidden">
        <div className="relative">
          <video
            ref={videoRef}
            autoPlay
            playsInline
            muted
            className="w-full h-64 object-cover bg-muted"
          />
          
          <div className="absolute inset-0 flex items-center justify-center">
            <div className="w-48 h-48 border-2 border-primary/50 rounded-lg"></div>
          </div>
          
          <div className="absolute top-4 right-4">
            <Button
              variant="ghost"
              size="icon"
              onClick={stopCamera}
              className="bg-black/50 text-white hover:bg-black/70"
              iconName="X"
            />
          </div>
        </div>
        
        <div className="p-4 bg-muted/50">
          <div className="flex items-center justify-center space-x-4">
            <Button
              variant="default"
              onClick={capturePhoto}
              iconName="Camera"
              iconPosition="left"
              className="flex-1"
            >
              Ambil Foto
            </Button>
          </div>
          <p className="text-xs text-center text-muted-foreground mt-2">
            Posisikan tanaman di dalam kotak untuk hasil terbaik
          </p>
        </div>
        
        <canvas ref={canvasRef} className="hidden" />
      </div>
    );
  }

  return (
    <div className="bg-card rounded-lg border border-border overflow-hidden">
      <div className="p-8 text-center">
        <div className="w-24 h-24 mx-auto mb-6 bg-primary/10 rounded-full flex items-center justify-center">
          <Icon name="Camera" size={32} className="text-primary" />
        </div>
        
        <h3 className="text-lg font-semibold text-foreground mb-2">
          Ambil Foto Tanaman
        </h3>
        <p className="text-sm text-muted-foreground mb-6">
          Foto tanaman yang menunjukkan gejala penyakit atau hama untuk diagnosis AI
        </p>
        
        {cameraError && (
          <div className="mb-4 p-3 bg-error/10 border border-error/20 rounded-lg">
            <div className="flex items-center space-x-2">
              <Icon name="AlertCircle" size={16} className="text-error" />
              <p className="text-sm text-error">{cameraError}</p>
            </div>
          </div>
        )}
        
        <div className="space-y-3">
          <Button
            variant="default"
            fullWidth
            onClick={startCamera}
            iconName="Camera"
            iconPosition="left"
            disabled={isLoading}
          >
            Buka Kamera
          </Button>
          
          <Button
            variant="outline"
            fullWidth
            onClick={triggerFileSelect}
            iconName="Upload"
            iconPosition="left"
            disabled={isLoading}
          >
            Pilih dari Galeri
          </Button>
        </div>
        
        <input
          ref={fileInputRef}
          type="file"
          accept="image/*"
          onChange={handleFileSelect}
          className="hidden"
        />
      </div>
    </div>
  );
};

export default CameraInterface;


--- File: ./src/pages/photo-diagnosis/components/DiagnosisForm.jsx ---

import React, { useState, useEffect } from 'react';
import Icon from '../../../components/AppIcon';
import Button from '../../../components/ui/Button';
import Input from '../../../components/ui/Input';
import Select from '../../../components/ui/Select';

const DiagnosisForm = ({ 
  onSubmit, 
  isLoading = false, 
  hasImage = false 
}) => {
  const [formData, setFormData] = useState({
    field_id: '',
    crop_type: '',
    latitude: '',
    longitude: '',
    notes: ''
  });
  const [locationLoading, setLocationLoading] = useState(false);
  const [locationError, setLocationError] = useState(null);
  const [errors, setErrors] = useState({});

  const cropOptions = [
    { value: 'padi', label: 'Padi' },
    { value: 'jagung', label: 'Jagung' },
    { value: 'kedelai', label: 'Kedelai' },
    { value: 'cabai', label: 'Cabai' },
    { value: 'tomat', label: 'Tomat' },
    { value: 'kentang', label: 'Kentang' },
    { value: 'bawang_merah', label: 'Bawang Merah' },
    { value: 'bawang_putih', label: 'Bawang Putih' },
    { value: 'wortel', label: 'Wortel' },
    { value: 'bayam', label: 'Bayam' },
    { value: 'kangkung', label: 'Kangkung' },
    { value: 'singkong', label: 'Singkong' }
  ];

  useEffect(() => {
    getCurrentLocation();
  }, []);

  const getCurrentLocation = () => {
    if (!navigator.geolocation) {
      setLocationError('Geolokasi tidak didukung di browser ini');
      return;
    }

    setLocationLoading(true);
    setLocationError(null);

    navigator.geolocation?.getCurrentPosition(
      (position) => {
        setFormData(prev => ({
          ...prev,
          latitude: position?.coords?.latitude?.toFixed(6),
          longitude: position?.coords?.longitude?.toFixed(6)
        }));
        setLocationLoading(false);
      },
      (error) => {
        let errorMessage = 'Tidak dapat mendapatkan lokasi';
        switch (error?.code) {
          case error?.PERMISSION_DENIED:
            errorMessage = 'Izin lokasi ditolak. Silakan masukkan koordinat manual.';
            break;
          case error?.POSITION_UNAVAILABLE:
            errorMessage = 'Informasi lokasi tidak tersedia.';
            break;
          case error?.TIMEOUT:
            errorMessage = 'Permintaan lokasi timeout.';
            break;
        }
        setLocationError(errorMessage);
        setLocationLoading(false);
      },
      {
        enableHighAccuracy: true,
        timeout: 10000,
        maximumAge: 300000
      }
    );
  };

  const handleInputChange = (field, value) => {
    setFormData(prev => ({
      ...prev,
      [field]: value
    }));
    
    // Clear error when user starts typing
    if (errors?.[field]) {
      setErrors(prev => ({
        ...prev,
        [field]: null
      }));
    }
  };

  const validateForm = () => {
    const newErrors = {};

    if (!formData?.field_id?.trim()) {
      newErrors.field_id = 'ID Lahan wajib diisi';
    }

    if (!formData?.crop_type) {
      newErrors.crop_type = 'Jenis tanaman wajib dipilih';
    }

    if (!formData?.latitude || !formData?.longitude) {
      newErrors.location = 'Koordinat lokasi wajib diisi';
    }

    setErrors(newErrors);
    return Object.keys(newErrors)?.length === 0;
  };

  const handleSubmit = (e) => {
    e?.preventDefault();
    
    if (!hasImage) {
      alert('Silakan ambil foto tanaman terlebih dahulu');
      return;
    }

    if (validateForm()) {
      const submissionData = {
        ...formData,
        latitude: parseFloat(formData?.latitude),
        longitude: parseFloat(formData?.longitude),
        timestamp: new Date()?.toISOString()
      };
      onSubmit(submissionData);
    }
  };

  return (
    <div className="bg-card rounded-lg border border-border p-6">
      <div className="flex items-center space-x-3 mb-6">
        <div className="w-10 h-10 bg-secondary/10 rounded-lg flex items-center justify-center">
          <Icon name="FileText" size={20} className="text-secondary" />
        </div>
        <div>
          <h3 className="text-lg font-semibold text-foreground">
            Informasi Diagnosis
          </h3>
          <p className="text-sm text-muted-foreground">
            Lengkapi data untuk analisis yang akurat
          </p>
        </div>
      </div>
      <form onSubmit={handleSubmit} className="space-y-6">
        {/* Field ID */}
        <Input
          label="ID Lahan"
          type="text"
          placeholder="Contoh: LAHAN-001"
          value={formData?.field_id}
          onChange={(e) => handleInputChange('field_id', e?.target?.value)}
          error={errors?.field_id}
          required
          description="Kode identifikasi lahan pertanian Anda"
        />

        {/* Crop Type */}
        <Select
          label="Jenis Tanaman"
          placeholder="Pilih jenis tanaman"
          options={cropOptions}
          value={formData?.crop_type}
          onChange={(value) => handleInputChange('crop_type', value)}
          error={errors?.crop_type}
          required
          searchable
          description="Pilih tanaman yang akan didiagnosis"
        />

        {/* Location Section */}
        <div className="space-y-4">
          <div className="flex items-center justify-between">
            <label className="text-sm font-medium text-foreground">
              Koordinat Lokasi *
            </label>
            <Button
              type="button"
              variant="outline"
              size="sm"
              onClick={getCurrentLocation}
              loading={locationLoading}
              iconName="MapPin"
              iconPosition="left"
            >
              {locationLoading ? 'Mencari...' : 'Deteksi Otomatis'}
            </Button>
          </div>

          {locationError && (
            <div className="p-3 bg-warning/10 border border-warning/20 rounded-lg">
              <div className="flex items-center space-x-2">
                <Icon name="AlertTriangle" size={16} className="text-warning" />
                <p className="text-sm text-warning">{locationError}</p>
              </div>
            </div>
          )}

          <div className="grid grid-cols-2 gap-4">
            <Input
              label="Latitude"
              type="number"
              step="any"
              placeholder="-10.123456"
              value={formData?.latitude}
              onChange={(e) => handleInputChange('latitude', e?.target?.value)}
              error={errors?.location}
            />
            <Input
              label="Longitude"
              type="number"
              step="any"
              placeholder="123.456789"
              value={formData?.longitude}
              onChange={(e) => handleInputChange('longitude', e?.target?.value)}
              error={errors?.location}
            />
          </div>
        </div>

        {/* Notes */}
        <div>
          <label className="block text-sm font-medium text-foreground mb-2">
            Catatan Tambahan
          </label>
          <textarea
            placeholder="Deskripsikan gejala yang terlihat pada tanaman..."
            value={formData?.notes}
            onChange={(e) => handleInputChange('notes', e?.target?.value)}
            rows={3}
            className="w-full px-3 py-2 border border-border rounded-lg bg-input text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent resize-none"
          />
          <p className="text-xs text-muted-foreground mt-1">
            Opsional: Informasi tambahan untuk diagnosis yang lebih akurat
          </p>
        </div>

        {/* Submit Button */}
        <div className="pt-4 border-t border-border">
          <Button
            type="submit"
            variant="default"
            fullWidth
            loading={isLoading}
            iconName="Zap"
            iconPosition="left"
            disabled={!hasImage}
          >
            {isLoading ? 'Menganalisis...' : 'Mulai Diagnosis AI'}
          </Button>
          
          {!hasImage && (
            <p className="text-xs text-center text-muted-foreground mt-2">
              Ambil foto tanaman terlebih dahulu untuk melanjutkan
            </p>
          )}
        </div>
      </form>
    </div>
  );
};

export default DiagnosisForm;


--- File: ./src/pages/photo-diagnosis/components/DiagnosisResults.jsx ---

import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import Icon from '../../../components/AppIcon';
import Image from '../../../components/AppImage';
import Button from '../../../components/ui/Button';
import ShareActionSheet from '../../../components/ui/ShareActionSheet';

const DiagnosisResults = ({ 
  results, 
  image, 
  formData, 
  onSavePlan, 
  onStartNew 
}) => {
  const navigate = useNavigate();
  const [showShareSheet, setShowShareSheet] = useState(false);
  const [isSaving, setIsSaving] = useState(false);

  // Mock diagnosis results for demo
  const mockResults = {
    diagnosis: {
      label: 'Bercak Daun Bakteri',
      confidence: 87.5,
      severity: 'sedang',
      description: 'Penyakit yang disebabkan oleh bakteri Xanthomonas yang menyerang daun tanaman'
    },
    recommendations: [
      {
        id: 1,
        title: 'Semprot Bakterisida',
        description: 'Gunakan bakterisida berbahan aktif tembaga oksiklorida 50% dengan dosis 2-3 gram per liter air',
        priority: 'tinggi',
        timeframe: '1-2 hari'
      },
      {
        id: 2,
        title: 'Perbaiki Drainase',
        description: 'Pastikan drainase lahan baik untuk mengurangi kelembaban berlebih yang memicu pertumbuhan bakteri',
        priority: 'sedang',
        timeframe: '3-7 hari'
      },
      {
        id: 3,
        title: 'Monitoring Rutin',
        description: 'Lakukan pemantauan setiap 2-3 hari untuk memastikan penyebaran tidak meluas ke tanaman lain',
        priority: 'sedang',
        timeframe: 'berkelanjutan'
      }
    ]
  };

  const getSeverityColor = (severity) => {
    switch (severity) {
      case 'ringan':
        return 'text-success bg-success/10 border-success/20';
      case 'sedang':
        return 'text-warning bg-warning/10 border-warning/20';
      case 'berat':
        return 'text-error bg-error/10 border-error/20';
      default:
        return 'text-muted-foreground bg-muted/10 border-border';
    }
  };

  const getPriorityIcon = (priority) => {
    switch (priority) {
      case 'tinggi':
        return { icon: 'AlertTriangle', color: 'text-error' };
      case 'sedang':
        return { icon: 'AlertCircle', color: 'text-warning' };
      case 'rendah':
        return { icon: 'Info', color: 'text-secondary' };
      default:
        return { icon: 'Info', color: 'text-muted-foreground' };
    }
  };

  const handleSavePlan = async () => {
    setIsSaving(true);
    try {
      const planData = {
        id: `plan_${Date.now()}`,
        diagnosis: mockResults?.diagnosis,
        recommendations: mockResults?.recommendations,
        formData,
        image: image ? URL.createObjectURL(image) : null,
        timestamp: new Date()?.toISOString(),
        status: 'active'
      };
      
      // Save to localStorage for demo
      const savedPlans = JSON.parse(localStorage.getItem('diagnosis_plans') || '[]');
      savedPlans?.push(planData);
      localStorage.setItem('diagnosis_plans', JSON.stringify(savedPlans));
      
      if (onSavePlan) {
        onSavePlan(planData);
      }
      
      // Show success message
      alert('Rencana berhasil disimpan!');
    } catch (error) {
      console.error('Error saving plan:', error);
      alert('Gagal menyimpan rencana. Silakan coba lagi.');
    } finally {
      setIsSaving(false);
    }
  };

  const shareData = {
    title: `Diagnosis AI: ${mockResults?.diagnosis?.label}`,
    description: `Tingkat kepercayaan: ${mockResults?.diagnosis?.confidence}% | Tingkat keparahan: ${mockResults?.diagnosis?.severity}`,
    results: mockResults?.recommendations?.map(rec => ({
      name: rec?.title,
      confidence: rec?.priority === 'tinggi' ? '95' : rec?.priority === 'sedang' ? '80' : '65'
    })),
    timestamp: new Date()?.toISOString()
  };

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="bg-card rounded-lg border border-border p-6">
        <div className="flex items-center space-x-3 mb-4">
          <div className="w-12 h-12 bg-success/10 rounded-lg flex items-center justify-center">
            <Icon name="CheckCircle" size={24} className="text-success" />
          </div>
          <div>
            <h2 className="text-xl font-bold text-foreground">
              Diagnosis Selesai
            </h2>
            <p className="text-sm text-muted-foreground">
              Analisis AI berhasil dilakukan
            </p>
          </div>
        </div>

        {/* Image Preview */}
        {image && (
          <div className="mb-4">
            <Image
              src={URL.createObjectURL(image)}
              alt="Foto tanaman yang didiagnosis"
              className="w-full h-48 object-cover rounded-lg border border-border"
            />
          </div>
        )}

        {/* Diagnosis Result */}
        <div className="space-y-4">
          <div className="flex items-center justify-between">
            <h3 className="text-lg font-semibold text-foreground">
              {mockResults?.diagnosis?.label}
            </h3>
            <div className={`px-3 py-1 rounded-full text-xs font-medium border ${getSeverityColor(mockResults?.diagnosis?.severity)}`}>
              {mockResults?.diagnosis?.severity?.toUpperCase()}
            </div>
          </div>

          <div className="flex items-center space-x-4">
            <div className="flex items-center space-x-2">
              <Icon name="Target" size={16} className="text-primary" />
              <span className="text-sm text-muted-foreground">
                Akurasi: {mockResults?.diagnosis?.confidence}%
              </span>
            </div>
            <div className="flex items-center space-x-2">
              <Icon name="MapPin" size={16} className="text-secondary" />
              <span className="text-sm text-muted-foreground">
                {formData?.field_id || 'Lahan tidak diketahui'}
              </span>
            </div>
          </div>

          <p className="text-sm text-muted-foreground">
            {mockResults?.diagnosis?.description}
          </p>
        </div>
      </div>
      {/* Recommendations */}
      <div className="bg-card rounded-lg border border-border p-6">
        <div className="flex items-center space-x-3 mb-6">
          <div className="w-10 h-10 bg-accent/10 rounded-lg flex items-center justify-center">
            <Icon name="Lightbulb" size={20} className="text-accent" />
          </div>
          <div>
            <h3 className="text-lg font-semibold text-foreground">
              Rekomendasi Tindakan
            </h3>
            <p className="text-sm text-muted-foreground">
              Langkah-langkah untuk mengatasi masalah
            </p>
          </div>
        </div>

        <div className="space-y-4">
          {mockResults?.recommendations?.map((recommendation, index) => {
            const priorityInfo = getPriorityIcon(recommendation?.priority);
            
            return (
              <div key={recommendation?.id} className="border border-border rounded-lg p-4">
                <div className="flex items-start space-x-3">
                  <div className="w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0 mt-1">
                    <span className="text-sm font-semibold text-primary">
                      {index + 1}
                    </span>
                  </div>
                  
                  <div className="flex-1">
                    <div className="flex items-center space-x-2 mb-2">
                      <h4 className="font-medium text-foreground">
                        {recommendation?.title}
                      </h4>
                      <Icon 
                        name={priorityInfo?.icon} 
                        size={16} 
                        className={priorityInfo?.color} 
                      />
                    </div>
                    
                    <p className="text-sm text-muted-foreground mb-3">
                      {recommendation?.description}
                    </p>
                    
                    <div className="flex items-center space-x-4 text-xs text-muted-foreground">
                      <span>Prioritas: {recommendation?.priority}</span>
                      <span>‚Ä¢</span>
                      <span>Waktu: {recommendation?.timeframe}</span>
                    </div>
                  </div>
                </div>
              </div>
            );
          })}
        </div>
      </div>
      {/* Action Buttons */}
      <div className="space-y-3">
        <div className="flex flex-col gap-3">
          <Button
            variant="default"
            onClick={handleSavePlan}
            loading={isSaving}
            iconName="Save"
            iconPosition="left"
          >
            Simpan Rencana
          </Button>
          
          <Button
            variant="outline"
            onClick={() => setShowShareSheet(true)}
            iconName="Share"
            iconPosition="left"
          >
            Bagikan
          </Button>
        </div>

        <Button
          variant="secondary"
          fullWidth
          onClick={onStartNew}
          iconName="Camera"
          iconPosition="left"
        >
          Diagnosis Baru
        </Button>

        <Button
          variant="ghost"
          fullWidth
          onClick={() => navigate('/home-dashboard')}
          iconName="Home"
          iconPosition="left"
        >
          Kembali ke Beranda
        </Button>
      </div>
      {/* Share Action Sheet */}
      <ShareActionSheet
        isOpen={showShareSheet}
        onClose={() => setShowShareSheet(false)}
        shareData={shareData}
      />
    </div>
  );
};

export default DiagnosisResults;


--- File: ./src/pages/photo-diagnosis/index.jsx ---

import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import Icon from '../../components/AppIcon';
import Button from '../../components/ui/Button';
import LoadingOverlay from '../../components/ui/LoadingOverlay';
import OfflineStatusBanner from '../../components/ui/OfflineStatusBanner';
import BottomNavigation from '../../components/ui/BottomNavigation';
import CameraInterface from './components/CameraInterface';
import DiagnosisForm from './components/DiagnosisForm';
import DiagnosisResults from './components/DiagnosisResults';

const PhotoDiagnosis = () => {
  const navigate = useNavigate();
  const [currentStep, setCurrentStep] = useState('capture'); // capture, form, results
  const [capturedImage, setCapturedImage] = useState(null);
  const [formData, setFormData] = useState(null);
  const [isLoading, setIsLoading] = useState(false);
  const [isOnline, setIsOnline] = useState(navigator.onLine);
  const [pendingSyncCount, setPendingSyncCount] = useState(0);

  // Mock offline detection
  React.useEffect(() => {
    const handleOnline = () => setIsOnline(true);
    const handleOffline = () => setIsOnline(false);

    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);

    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, []);

  const handleImageCapture = (imageFile) => {
    setCapturedImage(imageFile);
    setCurrentStep('form');
  };

  const handleImageRemove = () => {
    setCapturedImage(null);
    setCurrentStep('capture');
  };

  const handleFormSubmit = async (data) => {
    setIsLoading(true);
    setFormData(data);

    try {
      // Simulate API call delay
      await new Promise(resolve => setTimeout(resolve, 3000));
      
      // Mock API response
      const mockResponse = {
        success: true,
        diagnosis: {
          label: 'Bercak Daun Bakteri',
          confidence: 87.5,
          severity: 'sedang'
        }
      };

      if (mockResponse?.success) {
        setCurrentStep('results');
      } else {
        throw new Error('Diagnosis failed');
      }
    } catch (error) {
      console.error('Diagnosis error:', error);
      alert('Gagal melakukan diagnosis. Silakan coba lagi.');
      
      if (!isOnline) {
        setPendingSyncCount(prev => prev + 1);
      }
    } finally {
      setIsLoading(false);
    }
  };

  const handleSavePlan = (planData) => {
    console.log('Plan saved:', planData);
    // Additional save logic can be added here
  };

  const handleStartNew = () => {
    setCapturedImage(null);
    setFormData(null);
    setCurrentStep('capture');
  };

  const handleRetrySync = () => {
    // Mock retry sync
    setPendingSyncCount(0);
    alert('Sinkronisasi berhasil!');
  };

  const renderStepIndicator = () => {
  const steps = [
    { id: 'capture', label: 'Foto', icon: 'Camera' },
    { id: 'form', label: 'Data', icon: 'FileText' },
    { id: 'results', label: 'Hasil', icon: 'CheckCircle' }
  ];
  const currentStepIndex = steps.findIndex(s => s.id === currentStep);

  return (
    <div className="flex items-center w-full mb-8">
      {steps.map((step, index) => (
        <React.Fragment key={step.id}>
          <div className="flex flex-col items-center">
            <div
              className={`
                w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all duration-300
                ${currentStepIndex === index
                  ? 'bg-primary border-primary text-primary-foreground ring-4 ring-primary/20'
                  : currentStepIndex > index
                    ? 'bg-success border-success text-success-foreground'
                    : 'bg-muted border-border text-muted-foreground'
                }
              `}
            >
              <Icon name={currentStepIndex > index ? 'Check' : step.icon} size={20} />
            </div>
            <p className={`
              mt-2 text-xs font-medium transition-colors
              ${currentStepIndex >= index ? 'text-foreground' : 'text-muted-foreground'}
            `}>
              {step.label}
            </p>
          </div>

          {index < steps.length - 1 && (
            <div className={`
              flex-1 h-1 mx-2 transition-all duration-500 rounded-full
              ${currentStepIndex > index ? 'bg-success' : 'bg-border'}
            `} />
          )}
        </React.Fragment>
      ))}
    </div>
  );
};

  const renderCurrentStep = () => {
    switch (currentStep) {
      case 'capture':
        return (
          <CameraInterface
            onImageCapture={handleImageCapture}
            capturedImage={capturedImage}
            onImageRemove={handleImageRemove}
            isLoading={isLoading}
          />
        );
      
      case 'form':
        return (
          <DiagnosisForm
            onSubmit={handleFormSubmit}
            isLoading={isLoading}
            hasImage={!!capturedImage}
          />
        );
      
      case 'results':
        return (
          <DiagnosisResults
            image={capturedImage}
            formData={formData}
            results={{
              label: 'Bercak Daun Bakteri',
              confidence: 87.5,
              severity: 'sedang'
            }}
            onSavePlan={handleSavePlan}
            onStartNew={handleStartNew}
          />
        );
      
      default:
        return null;
    }
  };

  return (
    <div className="min-h-screen bg-background">
      {/* Offline Status Banner */}
      <OfflineStatusBanner
        isOnline={isOnline}
        pendingSyncCount={pendingSyncCount}
        onRetrySync={handleRetrySync}
      />

      {/* Header */}
      <div className="bg-card border-b border-border sticky top-0 z-50">
        <div className="px-4 py-4">
          <div className="flex items-center space-x-3">
            <Button
              variant="ghost"
              size="icon"
              onClick={() => navigate('/home-dashboard')}
              iconName="ArrowLeft"
            />
            <div className="flex-1">
              <h1 className="text-lg font-semibold text-foreground">
                Diagnosis AI
              </h1>
              <p className="text-sm text-muted-foreground">
                Analisis penyakit tanaman dengan AI
              </p>
            </div>
            <div className="flex items-center space-x-2">
              <div className={`
                w-2 h-2 rounded-full
                ${isOnline ? 'bg-success animate-pulse' : 'bg-warning'}
              `} />
              <span className="text-xs text-muted-foreground">
                {isOnline ? 'Online' : 'Offline'}
              </span>
            </div>
          </div>
        </div>
      </div>

      {/* Main Content */}
      <div className="px-4 py-6 pb-24">
        {/* Step Indicator */}
        {renderStepIndicator()}

        {/* Current Step Content */}
        {renderCurrentStep()}

        {/* Help Section */}
        {currentStep === 'capture' && (
          <div className="mt-8 bg-secondary/5 rounded-lg p-4 border border-secondary/10">
            <div className="flex items-start space-x-3">
              <Icon name="HelpCircle" size={20} className="text-secondary mt-0.5" />
              <div>
                <h4 className="font-medium text-foreground mb-2">
                  Tips Foto yang Baik
                </h4>
                <ul className="text-sm text-muted-foreground space-y-1">
                  <li>‚Ä¢ Pastikan pencahayaan cukup terang</li>
                  <li>‚Ä¢ Fokuskan pada bagian tanaman yang bermasalah</li>
                  <li>‚Ä¢ Hindari bayangan yang menutupi objek</li>
                  <li>‚Ä¢ Ambil foto dari jarak 20-30 cm</li>
                </ul>
              </div>
            </div>
          </div>
        )}
      </div>

      {/* Loading Overlay */}
      <LoadingOverlay
        isVisible={isLoading}
        message="Menganalisis foto tanaman..."
        animationType="plant"
      />

      {/* Bottom Navigation */}
      <BottomNavigation />
    </div>
  );
};

export default PhotoDiagnosis;


--- File: ./src/styles/index.css ---

body {
  margin: 0;
  padding: 0;
  font-family: Inter;
}

* {
  box-sizing: border-box;
  line-height: normal;
  font-family: inherit;
  margin: unset;
}



--- File: ./src/styles/tailwind.css ---

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Core Colors */
    --color-background: #F8FAFC; /* light gray background for mobile */
    --color-foreground: #1F2937; /* dark-gray */
    --color-border: #E5E7EB; /* neutral-gray */
    --color-input: #FFFFFF; /* white input background */
    --color-ring: #16A34A; /* vibrant primary green */
    
    /* Card Colors */
    --color-card: #FFFFFF; /* white */
    --color-card-foreground: #1F2937; /* dark-gray */
    --color-popover: #FFFFFF; /* white */
    --color-popover-foreground: #1F2937; /* dark-gray */
    
    /* Muted Colors */
    --color-muted: #F3F4F6; /* lighter gray for mobile */
    --color-muted-foreground: #6B7280; /* medium-gray */
    
    /* Primary Colors - Vibrant Green */
    --color-primary: #16A34A; /* vibrant primary green */
    --color-primary-foreground: #FFFFFF; /* white */
    
    /* Secondary Colors - Professional Blue */
    --color-secondary: #0284C7; /* vibrant secondary blue */
    --color-secondary-foreground: #FFFFFF; /* white */
    
    /* Accent Colors - Warning Orange */
    --color-accent: #F97316; /* vibrant warning orange */
    --color-accent-foreground: #FFFFFF; /* white */
    
    /* Success Colors - Green (Baik) */
    --color-success: #16A34A; /* same as primary for consistency */
    --color-success-foreground: #FFFFFF; /* white */
    
    /* Warning Colors - Orange (Sedang) */
    --color-warning: #F97316; /* vibrant warning orange */
    --color-warning-foreground: #FFFFFF; /* white */
    
    /* Error/Destructive Colors - Red (Tinggi) */
    --color-error: #DC2626; /* vibrant error red */
    --color-error-foreground: #FFFFFF; /* white */
    --color-destructive: #DC2626; /* vibrant error red */
    --color-destructive-foreground: #FFFFFF; /* white */
    
    /* Surface Color */
    --color-surface: #F8FAFC; /* subtle-gray */
    
    /* Text Colors */
    --color-text-primary: #1F2937; /* dark-gray */
    --color-text-secondary: #6B7280; /* medium-gray */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  }
  
  h1, h2, h3, h4, h5, h6 {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  }
  
  .font-mono {
    font-family: 'JetBrains Mono', 'Courier New', monospace;
  }
}

@layer components {
  /* Agricultural Loading Animation */
  .loading-plant {
    animation: grow 2s ease-in-out infinite;
  }
  
  @keyframes grow {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }
  
  /* Haptic Feedback Simulation */
  .haptic-feedback {
    animation: pulse 0.2s ease-out;
  }
  
  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(0.95); }
    100% { transform: scale(1); }
  }
  
  /* Smooth Transitions */
  .transition-smooth {
    transition: all 300ms ease-out;
  }
  
  /* Agricultural Shadow */
  .shadow-agricultural {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }
  
  .shadow-agricultural-lg {
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }
}


--- File: ./src/utils/cn.js ---

import { clsx } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs) {
    return twMerge(clsx(inputs));
}


--- File: ./tailwind.config.js ---

/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
  border: '#E5E7EB',
  input: '#FFFFFF',
  ring: '#16A34A',
  background: '#F8FAFC',
  foreground: '#1F2937',
  primary: {
    DEFAULT: '#16A34A',
    foreground: '#FFFFFF',
  },
  secondary: {
    DEFAULT: '#0284C7',
    foreground: '#FFFFFF',
  },
  destructive: {
    DEFAULT: '#DC2626',
    foreground: '#FFFFFF',
  },
  muted: {
    DEFAULT: '#F3F4F6',
    foreground: '#6B7280',
  },
  accent: {
    DEFAULT: '#F97316',
    foreground: '#FFFFFF',
  },
  popover: {
    DEFAULT: '#FFFFFF',
    foreground: '#1F2937',
  },
  card: {
    DEFAULT: '#FFFFFF',
    foreground: '#1F2937',
  },
  // --- Warna tambahan dari instruksi ---
  warning: {
    DEFAULT: '#F97316',
    foreground: '#FFFFFF',
  },
  error: {
    DEFAULT: '#DC2626',
    foreground: '#FFFFFF',
  },
  success: {
    DEFAULT: '#16A34A',
    foreground: '#FFFFFF',
  },
},
      fontFamily: {
        sans: ['Inter', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif'],
        mono: ['JetBrains Mono', 'Courier New', 'monospace']
      },
      fontSize: {
        'xs': ['0.75rem', { lineHeight: '1rem' }],
        'sm': ['0.875rem', { lineHeight: '1.25rem' }],
        'base': ['1rem', { lineHeight: '1.5rem' }],
        'lg': ['1.125rem', { lineHeight: '1.75rem' }],
        'xl': ['1.25rem', { lineHeight: '1.75rem' }],
        '2xl': ['1.5rem', { lineHeight: '2rem' }],
        '3xl': ['1.875rem', { lineHeight: '2.25rem' }],
        '4xl': ['2.25rem', { lineHeight: '2.5rem' }]
      },
      borderRadius: {
        'lg': '16px',
        'md': '12px',
        'sm': '8px',
        'xs': '4px'
      },
      boxShadow: {
        'agricultural': '0 1px 3px rgba(0, 0, 0, 0.1)',
        'agricultural-lg': '0 4px 6px rgba(0, 0, 0, 0.1)'
      },
      spacing: {
        '18': '4.5rem',
        '88': '22rem',
        '128': '32rem'
      },
      minHeight: {
        'touch': '48px'
      },
      animation: {
        'grow': 'grow 2s ease-in-out infinite',
        'pulse-gentle': 'pulse 0.2s ease-out'
      },
      keyframes: {
        grow: {
          '0%, 100%': { transform: 'scale(1)' },
          '50%': { transform: 'scale(1.1)' }
        }
      },
      zIndex: {
        '60': '60',
        '70': '70',
        '80': '80',
        '90': '90',
        '100': '100',
        '150': '150',
        '200': '200',
        '300': '300'
      }
    },
  },
  plugins: [
    require('@tailwindcss/forms'),
    require('tailwindcss-animate')
  ],
}


--- File: ./vite.config.mjs ---

import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import tsconfigPaths from "vite-tsconfig-paths";
import tagger from "@dhiwise/component-tagger";

// https://vitejs.dev/config/
export default defineConfig({
  // This changes the out put dir from dist to build
  // comment this out if that isn't relevant for your project
  build: {
    outDir: "build",
    chunkSizeWarningLimit: 2000,
  },
  plugins: [tsconfigPaths(), react(), tagger()],
  server: {
    port: "4028",
    host: "0.0.0.0",
    strictPort: true,
    allowedHosts: ['.amazonaws.com', '.builtwithrocket.new']
  }
});


================================================================================
--- AKHIR DARI SNAPSHOT KODE ---
================================================================================
